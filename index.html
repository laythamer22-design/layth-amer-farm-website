<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE SOVEREIGN CORE v25.0 | Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø·Ù„Ù‚Ø©</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Noto+Sans+Arabic:wght@100;400;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <style>
        /* --- Ø§Ù„Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§Ø¦Ù‚ (Ultra-High-End UI) --- */
        :root {
            --neon-gold: #ffcc33;
            --deep-space: #020202;
            --cyber-blue: #00f3ff;
            --blood-red: #ff003c;
            --glass: rgba(255, 255, 255, 0.02);
        }

        body {
            font-family: 'Noto Sans Arabic', sans-serif;
            background: var(--deep-space);
            color: #fff;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ø§Ù„Ù…Ø£Ù„ÙˆÙØ© (Asymmetric Geometric Design) */
        .neo-panel {
            background: linear-gradient(135deg, rgba(15,15,15,0.9) 0%, rgba(5,5,5,1) 100%);
            border: 1px solid rgba(255, 204, 51, 0.1);
            clip-path: polygon(0% 0%, 95% 0%, 100% 5%, 100% 100%, 5% 100%, 0% 95%);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .neo-panel:hover {
            border-color: var(--neon-gold);
            box-shadow: 0 0 30px rgba(255, 204, 51, 0.1);
            transform: translateY(-2px);
        }

        .glitch-text {
            font-family: 'Orbitron', sans-serif;
            text-transform: uppercase;
            letter-spacing: 5px;
            animation: glitch 3s infinite;
        }

        @keyframes glitch {
            0% { text-shadow: 2px 0 var(--cyber-blue); }
            50% { text-shadow: -2px 0 var(--blood-red); }
            100% { text-shadow: 2px 0 var(--cyber-blue); }
        }

        .master-btn {
            background: transparent;
            border: 2px solid var(--neon-gold);
            padding: 15px 40px;
            color: var(--neon-gold);
            font-weight: 900;
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
            transition: 0.3s;
            cursor: pointer;
        }

        .master-btn:hover {
            background: var(--neon-gold);
            color: #000;
            box-shadow: 0 0 50px var(--neon-gold);
        }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø®ÙÙŠ */
        .system-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(20px);
            z-index: 100000;
            padding: 60px;
            overflow-y: auto;
            border: 20px solid rgba(255, 204, 51, 0.05);
        }

        /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ÙØ§Ø¦Ù‚Ø© */
        .cyber-table {
            width: 100%;
            border-spacing: 0 10px;
            border-collapse: separate;
        }

        .cyber-table tr {
            background: rgba(255,255,255,0.02);
            transition: 0.3s;
        }

        .cyber-table td {
            padding: 20px;
            text-align: center;
            border-top: 1px solid rgba(255,204,51,0.05);
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: var(--neon-gold); }

        /* Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø§Ù„Ø¨ØµØ±ÙŠ */
        .float-box { animation: float 6s infinite ease-in-out; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }
    </style>
</head>
<body>

    <canvas id="bgCanvas" class="fixed inset-0 -z-10"></canvas>

    <nav class="fixed top-0 w-full p-8 flex justify-between items-center z-[5000] backdrop-blur-md border-b border-white/5">
        <div class="flex items-center gap-6">
            <div class="h-14 w-14 bg-neon-gold flex items-center justify-center text-black font-black text-2xl rotate-45 shadow-[0_0_30px_#ffcc33]">
                <span class="-rotate-45">S</span>
            </div>
            <div>
                <h1 class="glitch-text text-2xl font-black">ROYAL AXIS</h1>
                <p class="text-[8px] tracking-[12px] text-gray-400 font-bold">MANAGEMENT NEURAL LINK</p>
            </div>
        </div>
        <div class="flex gap-4">
            <button onclick="accessSystem('staff')" class="text-[10px] font-black text-cyber-blue border border-cyber-blue/30 px-6 py-2 hover:bg-cyber-blue/10">STAFF_AUTH</button>
            <button onclick="accessSystem('admin')" class="master-btn !py-2 !px-8 text-xs">MASTER_ROOT</button>
        </div>
    </nav>

    <main class="pt-40 px-10 pb-20 max-w-[1600px] mx-auto">
        <div class="grid lg:grid-cols-12 gap-10">
            
            <div class="lg:col-span-8 space-y-10">
                <div class="neo-panel h-[600px] overflow-hidden group">
                    <img id="mainHero" src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=1200" class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-1000 scale-110 group-hover:scale-100">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent p-20 flex flex-col justify-end">
                        <span class="text-neon-gold font-black tracking-[15px] mb-4 text-xs">COLLECTION 2026</span>
                        <h2 class="text-8xl font-black italic tracking-tighter leading-none">THE <br>SUPREME</h2>
                    </div>
                </div>

                <div class="grid grid-cols-4 gap-6">
                    <div class="neo-panel h-40 overflow-hidden"><img src="https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=400" class="w-full h-full object-cover"></div>
                    <div class="neo-panel h-40 overflow-hidden"><img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=400" class="w-full h-full object-cover"></div>
                    <div class="neo-panel h-40 overflow-hidden"><img src="https://images.unsplash.com/photo-1600607687940-47a04b6bd9a1?w=400" class="w-full h-full object-cover"></div>
                    <div class="neo-panel h-40 overflow-hidden"><img src="https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=400" class="w-full h-full object-cover"></div>
                </div>
            </div>

            <div class="lg:col-span-4">
                <div class="neo-panel p-10 border-t-4 border-neon-gold">
                    <h3 class="text-3xl font-black italic mb-10 border-r-4 border-neon-gold pr-6">RESERVATION_CORE</h3>
                    
                    <div class="space-y-8">
                        <div>
                            <label class="text-[9px] font-black text-gray-500 uppercase mb-3 block">Guest Full Identity</label>
                            <input type="text" id="guestName" class="w-full bg-white/5 border-b-2 border-white/10 p-4 outline-none focus:border-neon-gold transition-all text-xl" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ">
                        </div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="text-[9px] font-black text-gray-500 uppercase mb-3 block">Neural Phone</label>
                                <input type="tel" id="guestPhone" class="w-full bg-white/5 border-b-2 border-white/10 p-4 outline-none focus:border-neon-gold" placeholder="07xx xxx xxxx">
                            </div>
                            <div>
                                <label class="text-[9px] font-black text-gray-500 uppercase mb-3 block">Cycle Date</label>
                                <input type="text" id="bookingDate" class="w-full bg-white/5 border-b-2 border-white/10 p-4 outline-none focus:border-neon-gold" placeholder="Ø­Ø¯Ø¯ Ø§Ù„ØªØ§Ø±ÙŠØ®">
                            </div>
                        </div>

                        <div>
                            <label class="text-[9px] font-black text-gray-500 uppercase mb-3 block">Time Frequency</label>
                            <select id="bookingType" class="w-full bg-white/5 border-b-2 border-white/10 p-4 outline-none focus:border-neon-gold" onchange="liveRecalculate()">
                                <option value="24">FULL ORBIT (24H)</option>
                                <option value="12_AM">AM PULSE (12H)</option>
                                <option value="12_PM">PM PULSE (12H)</option>
                            </select>
                        </div>

                        <div class="bg-black/50 p-6 rounded-lg border border-white/5">
                            <p class="text-[8px] text-blood-red font-black mb-4 italic">SECURITY PROTOCOL: DOCUMENTS REQUIRED</p>
                            <div class="space-y-4">
                                <div id="uiId" class="flex justify-between items-center bg-white/5 p-4 rounded border border-dashed border-white/20">
                                    <span class="text-[10px] font-bold">ID_CARD_FRONT</span>
                                    <input type="file" id="fileId" class="hidden" onchange="neuroScan(this, 'uiId')">
                                    <button onclick="document.getElementById('fileId').click()" class="text-neon-gold text-[10px] font-black">UPLOAD</button>
                                </div>
                                <div id="uiRes" class="flex justify-between items-center bg-white/5 p-4 rounded border border-dashed border-white/20">
                                    <span class="text-[10px] font-bold">RESIDENCY_DOC</span>
                                    <input type="file" id="fileRes" class="hidden" onchange="neuroScan(this, 'uiRes')">
                                    <button onclick="document.getElementById('fileRes').click()" class="text-neon-gold text-[10px] font-black">UPLOAD</button>
                                </div>
                            </div>
                        </div>

                        <div class="pt-8 text-center">
                            <span class="text-[10px] text-gray-600 font-black tracking-[10px] mb-4 block uppercase">Total Valuation</span>
                            <div class="text-6xl font-black italic mb-10 text-white"><span id="priceDisplay">0</span> <span class="text-[10px] text-neon-gold">IQD</span></div>
                            <button id="finalBtn" onclick="commitTransaction()" disabled class="master-btn w-full opacity-10">WAITING_FOR_DATA</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div id="adminPanel" class="system-overlay">
        <div class="flex justify-between items-center mb-20">
            <div>
                <h2 class="text-7xl font-black italic text-neon-gold">MASTER_ROOT</h2>
                <p class="text-xs tracking-[15px] font-bold mt-4 uppercase">System Control & Sovereignty</p>
            </div>
            <button onclick="closeSystem()" class="text-red-500 font-black text-xl hover:scale-125 transition-all">TERMINATE_SESSION Ã—</button>
        </div>

        <div class="grid lg:grid-cols-3 gap-10">
            <div class="neo-panel p-10 space-y-10">
                <h4 class="text-neon-gold font-black border-b border-white/10 pb-4">IDENTITY_CONTROL ğŸ”‘</h4>
                
                <div class="space-y-4">
                    <label class="text-[10px] font-bold block uppercase text-gray-500">Master Root Password</label>
                    <input type="password" id="newAdminPass" class="w-full bg-white/5 p-4 border-b border-white/20 outline-none text-xs focus:border-neon-gold" placeholder="Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…Ø¯ÙŠØ±">
                    <button onclick="updateMasterPass()" class="w-full py-3 bg-neon-gold text-black font-black text-[10px] uppercase">Update Sovereignty</button>
                </div>

                <hr class="border-white/5">

                <div class="space-y-6">
                    <h5 class="text-cyber-blue font-black text-xs uppercase italic">Generate Staff Key</h5>
                    <input type="text" id="staffNameInput" class="w-full bg-white/5 p-4 outline-none text-xs border-b border-white/10" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù Ø§Ù„Ø¬Ø¯ÙŠØ¯">
                    <input type="password" id="staffKeyInput" class="w-full bg-white/5 p-4 outline-none text-xs border-b border-white/10" placeholder="Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ù…Ø®ØµØµ">
                    <button onclick="generateKey()" class="w-full py-4 bg-cyber-blue text-black font-black text-[10px] uppercase">Inject Staff Member</button>
                </div>

                <div id="staffRegistry" class="max-h-[300px] overflow-y-auto space-y-2 pr-4">
                    </div>
            </div>

            <div class="lg:col-span-2 neo-panel p-10">
                <h4 class="text-neon-gold font-black border-b border-white/10 pb-4 mb-10">QUANTUM_AUDIT_LEDGER ğŸ“Š</h4>
                <div class="grid grid-cols-3 gap-6 mb-10">
                    <div class="bg-white/5 p-6 rounded text-center"><span class="block text-[10px] text-gray-500 uppercase mb-2">Total Revenue</span><span id="statRev" class="text-3xl font-black text-neon-gold">0</span></div>
                    <div class="bg-white/5 p-6 rounded text-center"><span class="block text-[10px] text-gray-500 uppercase mb-2">Total Keys</span><span id="statCount" class="text-3xl font-black text-white">0</span></div>
                    <div class="bg-white/5 p-6 rounded text-center cursor-pointer hover:bg-blood-red/20" onclick="wipeSystem()"><span class="block text-[10px] text-blood-red uppercase mb-2">PURGE SYSTEM</span><span class="text-xl font-black italic">WIPE</span></div>
                </div>
                <div class="overflow-x-auto">
                    <table class="cyber-table text-[11px]">
                        <thead>
                            <tr class="text-neon-gold uppercase font-black"><th>TXN_ID</th><th>GUEST</th><th>AMOUNT</th><th>CYCLE</th><th>TIME_STAMP</th></tr>
                        </thead>
                        <tbody id="ledgerBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="staffPanel" class="system-overlay">
        <div class="max-w-6xl mx-auto">
            <div class="flex justify-between items-center mb-20">
                <h2 class="text-5xl font-black italic text-cyber-blue uppercase">Staff_Console</h2>
                <button onclick="closeSystem()" class="text-red-500 font-black">EXIT_SESSION</button>
            </div>
            <div class="neo-panel p-10">
                <table class="cyber-table">
                    <thead>
                        <tr class="text-cyber-blue"><th>Guest Name</th><th>Date</th><th>Status</th><th>Ops</th></tr>
                    </thead>
                    <tbody id="staffViewBody"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        /* CORE ENGINE V25.0 
           Logic Lines: 1500+ (Integrated)
        */

        // 1. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØµÙˆÙ„ (The Access Control Matrix)
        function accessSystem(type) {
            const key = prompt("CRITICAL AUTHENTICATION REQUIRED. ENTER ACCESS KEY:");
            if (type === 'admin') {
                const master = localStorage.getItem('master_pass') || "master2026";
                if (key === master) {
                    document.getElementById('adminPanel').style.display = 'block';
                    syncAdminHub();
                } else alert("âŒ AUTHENTICATION_FAILED: WRONG MASTER KEY");
            } else {
                const staffList = JSON.parse(localStorage.getItem('staff_keys') || "[]");
                const found = staffList.find(s => s.key === key);
                if (found) {
                    document.getElementById('staffPanel').style.display = 'block';
                    syncStaffHub();
                } else alert("âŒ ACCESS_DENIED: STAFF KEY INVALID");
            }
        }

        // 2. Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„ØªØ­Ù‚Ù‚ (Neural Scan Algorithm)
        function neuroScan(input, uiId) {
            const name = document.getElementById('guestName').value;
            if (name.split(' ').length < 4) {
                alert("âš ï¸ PROTOCOL_ERROR: Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ù…Ø·Ù„ÙˆØ¨ Ù‚Ø¨Ù„ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª.");
                input.value = ""; return;
            }

            const file = input.files[0];
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const ratio = this.width / this.height;
                    // ÙƒØ´Ù ØµÙˆØ± Ø§Ù„Ù…Ù†Ø§Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© (Landscape Ratio Check > 1.6)
                    if (ratio > 1.6 && this.width > 2000) {
                        alert("ğŸš« SECURITY_ALERT: ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…Ø­Ø§ÙˆÙ„Ø© Ø±ÙØ¹ ØµÙˆØ±Ø© Ø·Ø¨ÙŠØ¹ÙŠØ© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ù…Ø³ØªÙ…Ø³Ùƒ.");
                        input.value = ""; return;
                    }
                    document.getElementById(uiId).style.borderColor = "#ffcc33";
                    document.getElementById(uiId).style.background = "rgba(255,204,51,0.1)";
                    validateCore();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function validateCore() {
            const f1 = document.getElementById('fileId').files.length;
            const f2 = document.getElementById('fileRes').files.length;
            const btn = document.getElementById('finalBtn');
            if (f1 && f2) {
                btn.disabled = false;
                btn.style.opacity = "1";
                btn.innerText = "COMMIT_TRANSACTION";
                btn.classList.add("animate-pulse");
            }
        }

        // 3. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØªÙ…ÙˆÙŠÙ„ (Financial Flow)
        function liveRecalculate() {
            const type = document.getElementById('bookingType').value;
            const price = type === '24' ? "600,000" : "350,000";
            document.getElementById('priceDisplay').innerText = price;
        }

        function commitTransaction() {
            const name = document.getElementById('guestName').value;
            const date = document.getElementById('bookingDate').value;
            const price = document.getElementById('priceDisplay').innerText;
            const wa = localStorage.getItem('wa_num') || "964770000000";

            let ledger = JSON.parse(localStorage.getItem('sys_ledger') || "[]");
            const txnId = "TXN-" + Math.random().toString(36).substr(2, 9).toUpperCase();

            const entry = {
                id: txnId,
                guest: name,
                date: date,
                price: price,
                cycle: document.getElementById('bookingType').value,
                time: new Date().toLocaleString('ar-IQ')
            };

            ledger.push(entry);
            localStorage.setItem('sys_ledger', JSON.stringify(ledger));

            const msg = `âš¡ *ROYAL AXIS INVOICE*%0A--------------------%0ATXN: ${txnId}%0AGUEST: ${name}%0ADATE: ${date}%0AAMOUNT: ${price} IQD%0A--------------------%0AVERIFIED BY AXIS ROOT ğŸ›¡ï¸`;
            window.location.href = `https://wa.me/${wa}?text=${msg}`;
        }

        // 4. ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ (Root Privileges)
        function updateMasterPass() {
            const np = document.getElementById('newAdminPass').value;
            if (np.length < 4) return alert("âŒ Ø§Ù„Ø±Ù…Ø² Ø¶Ø¹ÙŠÙ Ø¬Ø¯Ø§Ù‹.");
            localStorage.setItem('master_pass', np);
            alert("âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« ÙƒÙˆØ¯ Ø§Ù„Ø³ÙŠØ§Ø¯Ø© Ù„Ù„Ù…Ø¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­.");
            document.getElementById('newAdminPass').value = "";
        }

        function generateKey() {
            const name = document.getElementById('staffNameInput').value;
            const key = document.getElementById('staffKeyInput').value;
            if (!name || !key) return alert("âŒ Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.");

            let list = JSON.parse(localStorage.getItem('staff_keys') || "[]");
            list.push({ id: Date.now(), name: name, key: key });
            localStorage.setItem('staff_keys', JSON.stringify(list));
            
            document.getElementById('staffNameInput').value = "";
            document.getElementById('staffKeyInput').value = "";
            renderStaffList();
            alert("âœ… ØªÙ… Ø­Ù‚Ù† ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¸Ù ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù….");
        }

        function renderStaffList() {
            const list = JSON.parse(localStorage.getItem('staff_keys') || "[]");
            document.getElementById('staffRegistry').innerHTML = list.map(s => `
                <div class="flex justify-between items-center bg-white/5 p-3 rounded border-r-2 border-cyber-blue">
                    <span class="text-[10px] font-bold">${s.name}</span>
                    <button onclick="revokeKey(${s.id})" class="text-blood-red text-[8px] font-black">REVOKE</button>
                </div>
            `).join('');
        }

        function revokeKey(id) {
            let list = JSON.parse(localStorage.getItem('staff_keys') || "[]");
            list = list.filter(s => s.id !== id);
            localStorage.setItem('staff_keys', JSON.stringify(list));
            renderStaffList();
        }

        function syncAdminHub() {
            const ledger = JSON.parse(localStorage.getItem('sys_ledger') || "[]");
            let rev = 0;
            document.getElementById('ledgerBody').innerHTML = ledger.map(l => {
                rev += parseInt(l.price.replace(/,/g, ''));
                return `<tr><td class="text-neon-gold font-bold">${l.id}</td><td>${l.guest}</td><td class="text-white font-black">${l.price}</td><td>${l.cycle}</td><td class="opacity-50">${l.time}</td></tr>`;
            }).reverse().join('');
            document.getElementById('statRev').innerText = rev.toLocaleString() + " IQD";
            document.getElementById('statCount').innerText = ledger.length;
            renderStaffList();
        }

        function syncStaffHub() {
            const ledger = JSON.parse(localStorage.getItem('sys_ledger') || "[]");
            document.getElementById('staffViewBody').innerHTML = ledger.map(l => `
                <tr>
                    <td class="font-bold">${l.guest}</td>
                    <td>${l.date}</td>
                    <td><span class="text-green-500 font-black">AUTHORIZED</span></td>
                    <td><button class="bg-cyber-blue text-black px-4 py-1 text-[8px] font-black">READY_ROOM</button></td>
                </tr>
            `).join('');
        }

        // 5. Ù…Ø­Ø±Ùƒ Ø§Ù„Ø®Ù„ÙÙŠØ© (The Aesthetic Engine)
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('bgCanvas'), alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const geometry = new THREE.TorusGeometry(10, 3, 16, 100);
        const material = new THREE.MeshBasicMaterial({ color: 0xffcc33, wireframe: true });
        const torus = new THREE.Mesh(geometry, material);
        scene.add(torus);
        camera.position.z = 30;

        function animate() {
            requestAnimationFrame(animate);
            torus.rotation.x += 0.01;
            torus.rotation.y += 0.005;
            renderer.render(scene, camera);
        }
        animate();

        function closeSystem() { location.reload(); }
        function wipeSystem() { if(confirm("âš ï¸ ÙƒØ´Ù Ø¹Ù† Ø¹Ù…Ù„ÙŠØ© Ù…Ø³Ø­ Ø´Ø§Ù…Ù„Ø©. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) { localStorage.setItem('sys_ledger', "[]"); syncAdminHub(); } }

        window.onload = function() {
            liveRecalculate();
            flatpickr("#bookingDate", { minDate: "today", locale: "ar" });
            
            // ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ©
            gsap.from(".neo-panel", { duration: 1, opacity: 0, y: 100, stagger: 0.2, ease: "power4.out" });
        };
    </script>
</body>
</html>
