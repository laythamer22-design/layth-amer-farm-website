<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Royal Oasis | Management System</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <style>
        :root { --gold: #c5a059; --dark: #050505; }
        body { font-family: 'Tajawal', sans-serif; background: var(--dark); color: white; overflow-x: hidden; }
        .font-ultra { font-weight: 900 !important; text-shadow: 3px 3px 15px #000; }
        
        /* Ù…Ø¸Ù‡Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Modern Glass) */
        .booking-glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(197, 160, 89, 0.3);
            border-radius: 60px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            padding: 50px;
            position: relative;
            overflow: hidden;
        }
        .booking-glass::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(197,160,89,0.05) 0%, transparent 70%);
            pointer-events: none;
        }

        .main-bg { position: fixed; inset: 0; z-index: -2; background-size: cover; background-position: center; filter: brightness(0.3); }
        .album-card { position: relative; height: 280px; border-radius: 30px; overflow: hidden; cursor: pointer; border: 1px solid rgba(197,160,89,0.2); transition: 0.5s; }
        .overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); display: flex; flex-direction: column; justify-content: flex-end; padding: 25px; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± OS */
        #adminOS { display: none; position: fixed; inset: 0; z-index: 9999; background: #080808; padding: 30px; border: 4px solid var(--gold); overflow-y: auto; }
        .admin-card { background: rgba(255,255,255,0.02); border: 1px solid #222; padding: 20px; border-radius: 20px; margin-bottom: 20px; }
        
        input, select { background: #000 !important; border: 1px solid #333 !important; color: var(--gold) !important; padding: 12px; border-radius: 12px; width: 100%; outline: none; }
        .locked-field { background: rgba(34, 197, 94, 0.1) !important; border-color: #22c55e !important; color: #22c55e !important; }
    </style>
</head>
<body>

    <div id="heroBg" class="main-bg" style="background-image: url('https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?w=1600')"></div>

    <nav class="fixed top-0 w-full z-50 p-6 flex justify-between items-center backdrop-blur-md">
        <h1 id="farmTitle" class="text-3xl font-ultra text-gold italic">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h1>
        <button onclick="openAdmin()" class="bg-gold text-black px-8 py-2 rounded-full font-black text-sm">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
    </nav>

    <div class="pt-32 px-6 max-w-7xl mx-auto">
        <div class="grid md:grid-cols-3 gap-8 mb-20">
            <div class="album-card" onclick="alert('ÙØªØ­ Ø§Ù„Ù…Ø¹Ø±Ø¶...')"><img id="img_pool" src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=600"><div class="overlay"><h4 id="txt_pool" class="text-xl font-black">Ø§Ù„Ù…Ø³Ø§Ø¨Ø­ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h4></div></div>
            <div class="album-card" onclick="alert('ÙØªØ­ Ø§Ù„Ù…Ø¹Ø±Ø¶...')"><img id="img_sports" src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600"><div class="overlay"><h4 id="txt_sports" class="text-xl font-black">Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©</h4></div></div>
            <div class="album-card" onclick="alert('ÙØªØ­ Ø§Ù„Ù…Ø¹Ø±Ø¶...')"><img id="img_billiard" src="https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=600"><div class="overlay"><h4 id="txt_billiard" class="text-xl font-black">ØµØ§Ù„Ø© Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</h4></div></div>
        </div>

        <div class="max-w-4xl mx-auto booking-glass mb-20">
            <div class="text-center mb-10">
                <h3 id="txt_bookingTitle" class="text-4xl font-ultra text-gold italic mb-2">ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ù„ÙƒÙŠ</h3>
                <div class="h-1 w-24 bg-gold mx-auto rounded-full"></div>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="md:col-span-2">
                    <label class="text-[10px] text-gold/60 mr-4 uppercase tracking-widest">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <input type="text" id="custName" class="mt-2 !py-4 !px-6 text-lg" placeholder="ÙŠØ¬Ø¨ Ø§Ù„ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„Ù‡ÙˆÙŠØ©">
                </div>

                <div>
                    <label class="text-[10px] text-gold/60 mr-4">Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</label>
                    <input type="tel" id="custPhone" class="mt-2" placeholder="07XXXXXXXX">
                </div>
                <div>
                    <label class="text-[10px] text-gold/60 mr-4">ØªØ§Ø±ÙŠØ® Ø§Ù„ÙˆØµÙˆÙ„</label>
                    <input type="text" id="bookDate" class="mt-2" placeholder="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®">
                </div>
                
                <div class="md:col-span-2">
                    <label class="text-[10px] text-gold/60 mr-4">ÙØªØ±Ø© Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</label>
                    <select id="bookType" onchange="calcTotal()" class="mt-2">
                        <option value="24">Ø¥Ù‚Ø§Ù…Ø© ÙƒØ§Ù…Ù„Ø© (24 Ø³Ø§Ø¹Ø©)</option>
                        <option value="12_AM">ÙØªØ±Ø© ØµØ¨Ø§Ø­ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                        <option value="12_PM">ÙØªØ±Ø© Ù…Ø³Ø§Ø¦ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                    </select>
                </div>

                <div class="md:col-span-2 bg-white/5 p-8 rounded-[40px] border border-gold/10">
                    <p id="txt_securityHint" class="text-[11px] text-center text-red-400 font-bold mb-6">Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù…Ù†ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±: ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ø§Ù„Ù…Ø³ØªÙ…Ø³ÙƒØ§Øª Ø¨ÙˆØ¶ÙˆØ­</p>
                    <div class="grid grid-cols-2 gap-6">
                        <div class="text-center bg-black/40 p-4 rounded-3xl border border-dashed border-gold/20">
                            <input type="file" id="fId" onchange="securityLock()" class="text-[10px]">
                            <span class="text-[9px] text-gray-400 block mt-2">ØµÙˆØ±Ø© Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ¬Ù‡ÙŠÙ†</span>
                        </div>
                        <div class="text-center bg-black/40 p-4 rounded-3xl border border-dashed border-gold/20">
                            <input type="file" id="fRes" onchange="securityLock()" class="text-[10px]">
                            <span class="text-[9px] text-gray-400 block mt-2">Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ†</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-10 py-6 border-t border-gold/10 text-center">
                <p class="text-sm opacity-60">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚</p>
                <p class="text-4xl font-black text-gold mt-1"><span id="finalPrice">0</span> <span class="text-sm">Ø¯.Ø¹</span></p>
            </div>

            <button id="mainBtn" onclick="issueInvoice()" disabled class="w-full mt-8 bg-gray-800 text-white font-black py-6 rounded-3xl text-2xl opacity-30 cursor-not-allowed transform transition active:scale-95">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚...</button>
        </div>
    </div>

    <div id="adminOS">
        <div class="max-w-6xl mx-auto pb-20">
            <div class="flex justify-between items-center border-b-2 border-gold pb-6 mb-10">
                <h2 class="text-3xl font-ultra text-gold">Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­ÙƒÙ… (Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø¹Ø§Ù…)</h2>
                <div class="flex gap-4">
                    <button id="staffPortalBtn" onclick="toggleStaffMode()" class="bg-blue-600 px-4 py-2 rounded-xl text-xs font-bold">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</button>
                    <button onclick="closeAdmin()" class="bg-red-600 px-8 py-2 rounded-full font-bold">Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>

            <div id="fullAdminTools" class="grid lg:grid-cols-2 gap-8">
                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4 underline">ØªØ¹Ø¯ÙŠÙ„ Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h4>
                    <div class="space-y-3">
                        <input type="text" id="admTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹">
                        <input type="text" id="admBookTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø¬Ø²">
                        <input type="text" id="admSecHint" placeholder="Ù†Øµ Ù†ØµÙŠØ­Ø© Ø§Ù„Ø£Ù…Ø§Ù†">
                    </div>
                </div>

                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4 underline">Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h4>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="genReport('ÙŠÙˆÙ…ÙŠ')" class="bg-gray-700 py-2 rounded text-[10px]">ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ</button>
                        <button onclick="genReport('Ø£Ø³Ø¨ÙˆØ¹ÙŠ')" class="bg-gray-700 py-2 rounded text-[10px]">ØªÙ‚Ø±ÙŠØ± Ø£Ø³Ø¨ÙˆØ¹ÙŠ</button>
                        <button onclick="genReport('Ø´Ù‡Ø±ÙŠ')" class="bg-gray-700 py-2 rounded text-[10px]">ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ</button>
                    </div>
                    <div class="mt-4">
                        <label class="text-[10px]">ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ:</label>
                        <input type="password" id="admPass" class="mt-1" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©">
                    </div>
                </div>

                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4 underline">Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„Ø§ØªØµØ§Ù„</h4>
                    <div class="space-y-3">
                        <input type="number" id="admP24" placeholder="Ø³Ø¹Ø± 24 Ø³Ø§Ø¹Ø©">
                        <input type="number" id="admP12" placeholder="Ø³Ø¹Ø± 12 Ø³Ø§Ø¹Ø©">
                        <input type="text" id="admWA" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
                    </div>
                </div>

                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4 underline">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙˆØ±</h4>
                    <div class="grid grid-cols-2 gap-2 text-[9px]">
                        <div>Ø§Ù„Ø®Ù„ÙÙŠØ©: <input type="file" onchange="sync(this, 'heroBg')"></div>
                        <div>Ø§Ù„Ù…Ø³Ø¨Ø­: <input type="file" onchange="sync(this, 'img_pool')"></div>
                    </div>
                </div>
            </div>
            
            <button onclick="applyAllSettings()" class="w-full mt-10 bg-green-600 py-6 rounded-3xl font-black text-2xl">Ø­ÙØ¸ ÙˆØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ âœ…</button>
        </div>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ù…Ø·ÙˆØ±
        function securityLock() {
            const name = document.getElementById('custName');
            const f1 = document.getElementById('fId').files.length;
            const f2 = document.getElementById('fRes').files.length;
            const btn = document.getElementById('mainBtn');

            if (name.value.split(' ').length < 4) {
                alert("âŒ ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø£ÙˆÙ„Ø§Ù‹!");
                document.getElementById('fId').value = "";
                return;
            }

            name.readOnly = true;
            name.classList.add('locked-field');

            if (f1 > 0 && f2 > 0) {
                btn.disabled = false;
                btn.className = "w-full mt-8 bg-gold text-black font-black py-6 rounded-3xl text-2xl shadow-2xl hover:scale-105 transition-all";
                btn.innerText = "ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙˆØµÙ„ ğŸ§¾";
            }
        }

        // Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ÙˆØµÙ„
        function issueInvoice() {
            const name = document.getElementById('custName').value;
            const date = document.getElementById('bookDate').value;
            const total = document.getElementById('finalPrice').innerText;
            const wa = localStorage.getItem('wa') || "9647700000000";

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø­Ø¬Ø² Ù„Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ
            let logs = JSON.parse(localStorage.getItem('logs') || "[]");
            logs.push({ name, date, total, timestamp: new Date().getTime() });
            localStorage.setItem('logs', JSON.stringify(logs));

            const msg = `ğŸ§¾ *ÙˆØµÙ„ Ø­Ø¬Ø² Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ*%0AğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}%0AğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}%0AğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${total} Ø¯.Ø¹%0Aâš ï¸ ØªØ°ÙƒÙŠØ±: Ø³ÙŠØµÙ„Ùƒ Ø¥Ø´Ø¹Ø§Ø± Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø©.`;
            window.location.href = `https://wa.me/${wa}?text=${msg}`;
        }

        function genReport(type) {
            let logs = JSON.parse(localStorage.getItem('logs') || "[]");
            let sum = logs.reduce((acc, log) => acc + parseInt(log.total.replace(/,/g, '')), 0);
            alert(`ğŸ“Š ØªÙ‚Ø±ÙŠØ± ${type}:\nØ¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª: ${logs.length}\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„: ${sum.toLocaleString()} Ø¯.Ø¹`);
        }

        function applyAllSettings() {
            localStorage.setItem('wa', document.getElementById('admWA').value);
            localStorage.setItem('p24', document.getElementById('admP24').value);
            localStorage.setItem('p12', document.getElementById('admP12').value);
            localStorage.setItem('pass', document.getElementById('admPass').value || "1234");
            localStorage.setItem('farmT', document.getElementById('admTitle').value);
            localStorage.setItem('bookT', document.getElementById('admBookTitle').value);
            localStorage.setItem('secH', document.getElementById('admSecHint').value);
            location.reload();
        }

        window.onload = function() {
            // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ÙƒØ§ÙØ© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª
            document.getElementById('farmTitle').innerText = localStorage.getItem('farmT') || "Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±";
            document.getElementById('txt_bookingTitle').innerText = localStorage.getItem('bookT') || "ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ù„ÙƒÙŠ";
            document.getElementById('txt_securityHint').innerText = localStorage.getItem('secH') || "Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø£Ù…Ù†ÙŠ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±";
            
            calcTotal();
            ['heroBg', 'img_pool'].forEach(id => {
                const s = localStorage.getItem(id);
                if(s) document.getElementById(id).style.backgroundImage = `url('${s}')`;
            });
        };

        function calcTotal() {
            const type = document.getElementById('bookType').value;
            const p24 = localStorage.getItem('p24') || 600000;
            const p12 = localStorage.getItem('p12') || 350000;
            document.getElementById('finalPrice').innerText = (type === '24' ? p24 : p12).toLocaleString();
        }

        function sync(input, id) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById(id).style.backgroundImage = `url('${e.target.result}')`;
                    localStorage.setItem(id, e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        function openAdmin() { 
            const pass = prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
            if(pass === (localStorage.getItem('pass') || "1234")) {
                document.getElementById('adminOS').style.display='block';
            } else if(pass === "staff") {
                document.getElementById('adminOS').style.display='block';
                document.getElementById('fullAdminTools').style.display = 'none'; // Ø¥Ø®ÙØ§Ø¡ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ù„Ù…ÙˆØ¸Ù
            }
        }
        
        function closeAdmin() { document.getElementById('adminOS').style.display='none'; }
        flatpickr("#bookDate", { minDate: "today", locale: "ar" });
    </script>
</body>
</html>
