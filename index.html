<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Royal Oasis | Advanced ERP System 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <style>
        :root { 
            --gold: #c5a059; 
            --gold-light: #e2c285;
            --dark-deep: #050505; 
            --dark-card: #0d0d0d;
            --success: #22c55e;
            --danger: #ef4444;
        }

        body { 
            font-family: 'Tajawal', sans-serif; 
            background: var(--dark-deep); 
            color: white; 
            overflow-x: hidden;
            user-select: none; /* Ù…Ù†Ø¹ Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª */
        }

        /* --- Scrollbar Customization --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--dark-deep); }
        ::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 10px; }

        /* --- Glassmorphism Framework --- */
        .glass-container {
            background: rgba(255, 255, 255, 0.01);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(197, 160, 89, 0.15);
            border-radius: 45px;
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
        }

        .main-hero-bg {
            position: fixed;
            inset: 0;
            z-index: -2;
            background-size: cover;
            background-position: center;
            filter: brightness(0.15) scale(1.1);
            transition: transform 2s ease, filter 1s ease;
        }

        /* --- Dynamic Gallery System --- */
        .royal-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            perspective: 1000px;
        }

        .gallery-card {
            position: relative;
            height: 300px;
            border-radius: 35px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .gallery-card:hover {
            transform: translateY(-15px) rotateX(5deg);
            border-color: var(--gold);
            box-shadow: 0 20px 40px rgba(197, 160, 89, 0.2);
        }

        .gallery-card img {
            width: 100%; height: 100%; object-fit: cover;
            transition: transform 1s ease;
        }

        .gallery-card:hover img { transform: scale(1.15); }

        .card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(0deg, rgba(0,0,0,0.95) 0%, transparent 60%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 30px;
        }

        /* --- AI Concierge UI --- */
        #aiTerminal {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 380px;
            height: 550px;
            background: var(--dark-card);
            border: 1px solid var(--gold);
            border-radius: 40px;
            z-index: 1000;
            display: none;
            flex-direction: column;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        .chat-area { flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .bubble { padding: 15px 20px; border-radius: 25px; font-size: 14px; line-height: 1.5; max-width: 80%; animation: fadeInUp 0.4s; }
        .bubble-bot { background: #151515; border: 1px solid #222; align-self: flex-start; color: #ccc; }
        .bubble-user { background: var(--gold); color: black; font-weight: bold; align-self: flex-end; border-bottom-right-radius: 5px; }

        /* --- Administrative Systems --- */
        .admin-os, .staff-os {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--dark-deep);
            z-index: 99999;
            padding: 50px;
            overflow-y: auto;
        }

        .data-table {
            width: 100%;
            border-spacing: 0 10px;
            border-collapse: separate;
        }

        .data-table th { background: transparent; color: var(--gold); text-align: center; padding: 20px; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; }
        .data-table td { background: var(--dark-card); padding: 20px; text-align: center; border-top: 1px solid #1a1a1a; border-bottom: 1px solid #1a1a1a; }
        .data-table tr td:first-child { border-right: 1px solid #1a1a1a; border-radius: 0 20px 20px 0; }
        .data-table tr td:last-child { border-left: 1px solid #1a1a1a; border-radius: 20px 0 0 20px; }

        /* --- Inputs & Buttons --- */
        .royal-input {
            background: #000 !important;
            border: 1.5px solid #222 !important;
            color: var(--gold) !important;
            padding: 18px 25px;
            border-radius: 20px;
            width: 100%;
            outline: none;
            transition: 0.3s;
        }

        .royal-input:focus { border-color: var(--gold) !important; box-shadow: 0 0 15px rgba(197, 160, 89, 0.1); }
        .royal-input[readonly] { background: rgba(34, 197, 94, 0.03) !important; border-color: var(--success) !important; color: var(--success) !important; }

        .btn-prime {
            background: var(--gold);
            color: black;
            font-weight: 900;
            padding: 20px 40px;
            border-radius: 25px;
            text-transform: uppercase;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: pointer;
        }

        .btn-prime:hover:not(:disabled) { transform: scale(1.05); filter: brightness(1.2); box-shadow: 0 15px 30px rgba(197, 160, 89, 0.3); }
        .btn-prime:disabled { opacity: 0.2; cursor: not-allowed; filter: grayscale(1); }

        /* --- Animations --- */
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="heroBg" class="main-hero-bg" style="background-image: url('https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?w=1600')"></div>

    <nav class="fixed top-0 w-full z-[100] px-10 py-8 flex justify-between items-center backdrop-blur-md border-b border-white/5">
        <div class="flex flex-col">
            <h1 id="uiBrandName" class="text-3xl font-ultra text-gold italic tracking-tighter">THE ROYAL OASIS</h1>
            <span class="text-[9px] text-gray-500 tracking-[5px] uppercase">Smart Resort Management</span>
        </div>
        
        <div class="flex gap-4">
            <button onclick="loginGate('staff')" class="px-5 py-2 border border-blue-500/30 text-blue-500 rounded-full text-[10px] font-bold hover:bg-blue-500 hover:text-white transition-all">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</button>
            <button onclick="loginGate('admin')" class="btn-prime !py-2 !px-8 text-[10px]">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
        </div>
    </nav>

    <div class="pt-40 px-10 max-w-[1600px] mx-auto pb-40">
        
        <div class="royal-gallery mb-32">
            <div class="gallery-card"><img id="alb1" src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ù…Ø³Ø§Ø¨Ø­ Ø§Ù„Ø£ÙˆÙ„Ù…Ø¨ÙŠØ©</h3><p class="text-[10px] text-gray-400">Ù†Ø¸Ø§Ù… ØªØ¯ÙØ¦Ø© Ù…Ø±ÙƒØ²ÙŠ 24/7</p></div></div>
            <div class="gallery-card"><img id="alb2" src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©</h3><p class="text-[10px] text-gray-400">Ø¹Ø´Ø¨ Ù‡Ø¬ÙŠÙ† Ù…Ø¹ØªÙ…Ø¯</p></div></div>
            <div class="gallery-card"><img id="alb3" src="https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">ØµØ§Ù„Ø© Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</h3><p class="text-[10px] text-gray-400">Ø·Ø§ÙˆÙ„Ø§Øª Ø¨Ø±ÙˆÙ†Ø²ÙˆÙŠÙƒ Ø£ØµÙ„ÙŠØ©</p></div></div>
            <div class="gallery-card"><img id="alb4" src="https://images.unsplash.com/photo-1600607687940-47a04b6bd9a1?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ø£Ø¬Ù†Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h3><p class="text-[10px] text-gray-400">Ø¥Ø·Ù„Ø§Ù„Ø© Ø¨Ø§Ù†ÙˆØ±Ø§Ù…ÙŠØ© ÙƒØ§Ù…Ù„Ø©</p></div></div>
            <div class="gallery-card"><img id="alb5" src="https://images.unsplash.com/photo-1511192336575-5a79af67a629?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„ØªØ±ÙÙŠÙ‡ Ø§Ù„Ø°ÙƒÙŠ</h3><p class="text-[10px] text-gray-400">Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ§Ù‚Ø¹ Ø§ÙØªØ±Ø§Ø¶ÙŠ ÙˆØ§ÙƒØ³ Ø¨ÙˆÙƒØ³</p></div></div>
            <div class="gallery-card"><img id="alb6" src="https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©</h3><p class="text-[10px] text-gray-400">Ù†Ø¸Ø§Ù… Ø±ÙŠ Ø°ÙƒÙŠ ÙˆØ¬Ù„Ø³Ø§Øª Ù‡Ø§Ø¯Ø¦Ø©</p></div></div>
            <div class="gallery-card"><img id="alb7" src="https://images.unsplash.com/photo-1590073242678-70ee3fc28e84?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©</h3><p class="text-[10px] text-gray-400">ØªÙƒÙŠÙŠÙ Ø®Ø§Ø±Ø¬ÙŠ Ø¶Ø¨Ø§Ø¨ÙŠ</p></div></div>
        </div>

        <div class="max-w-5xl mx-auto glass-container p-16 relative">
            <div class="flex justify-between items-start mb-16">
                <div>
                    <h2 id="uiBookingTitle" class="text-5xl font-ultra text-gold italic mb-3">ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„ÙˆØ«Ø§Ø¦Ù‚</h2>
                    <p class="text-xs text-gray-500 uppercase tracking-widest font-bold">Secure Multi-Layer Identity Verification</p>
                </div>
                <div class="text-left">
                    <span class="text-[10px] text-success font-black border border-success/30 px-3 py-1 rounded-full uppercase">AI Protection Active</span>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-10">
                <div class="md:col-span-2 space-y-2">
                    <label class="text-[10px] text-gold font-black uppercase tracking-widest mr-4">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ (ÙƒÙ…Ø§ Ù‡Ùˆ ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©)</label>
                    <input type="text" id="coreFullName" class="royal-input text-2xl" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„">
                </div>

                <div class="space-y-6">
                    <div class="group">
                        <input type="tel" id="corePhone" class="royal-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ">
                    </div>
                    <div class="group">
                        <input type="text" id="coreDate" class="royal-input" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…Ø·Ù„ÙˆØ¨">
                    </div>
                    <div class="group">
                        <select id="coreDuration" class="royal-input" onchange="recalculatePrice()">
                            <option value="24">Ø¥Ù‚Ø§Ù…Ø© Ù…Ù„ÙƒÙŠØ© (24 Ø³Ø§Ø¹Ø©)</option>
                            <option value="12_AM">ÙØªØ±Ø© ØµØ¨Ø§Ø­ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                            <option value="12_PM">ÙØªØ±Ø© Ù…Ø³Ø§Ø¦ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                        </select>
                    </div>
                </div>

                <div class="bg-red-500/5 p-8 rounded-[40px] border border-dashed border-red-500/20">
                    <h5 class="text-[10px] text-red-500 font-black mb-6 uppercase text-center tracking-widest italic">Verification Terminal ğŸ›¡ï¸</h5>
                    <div class="grid grid-cols-1 gap-4">
                        <div id="uiIdBox" class="bg-black/40 p-5 rounded-2xl border border-white/5 transition-all">
                            <span class="block text-[8px] text-gray-500 mb-2 uppercase">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø© (Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ)</span>
                            <input type="file" id="coreIdFile" class="text-[10px]" onchange="advancedCyberCheck(this, 'uiIdBox')">
                        </div>
                        <div id="uiResBox" class="bg-black/40 p-5 rounded-2xl border border-white/5 transition-all">
                            <span class="block text-[8px] text-gray-500 mb-2 uppercase">Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ø±Ø³Ù…ÙŠØ©</span>
                            <input type="file" id="coreResFile" class="text-[10px]" onchange="advancedCyberCheck(this, 'uiResBox')">
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-16 pt-10 border-t border-white/5 flex flex-col items-center">
                <p class="text-[10px] text-gray-500 uppercase tracking-[10px] mb-4 font-bold">Total Estimated Cost</p>
                <h4 class="text-6xl font-ultra text-gold tracking-tighter"><span id="uiFinalPrice">0</span> <span class="text-xs italic uppercase">IQD</span></h4>
                
                <button id="masterBookingBtn" onclick="dispatchFinalBooking()" disabled class="btn-prime w-full mt-10 !py-8 text-2xl tracking-tighter shadow-2xl">
                    Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ...
                </button>
            </div>
        </div>
    </div>

    <div id="aiTerminal">
        <div class="p-6 bg-gold text-black flex justify-between items-center">
            <div class="flex flex-col leading-none">
                <span class="font-black text-lg">AI CONCIERGE</span>
                <span class="text-[8px] font-bold">System v10.4</span>
            </div>
            <button onclick="toggleBot()" class="text-2xl font-black">&times;</button>
        </div>
        <div id="chatHistory" class="chat-area">
            <div class="bubble bubble-bot">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ø±Ù‚Ù…ÙŠ. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªÙ„Ø¨ÙŠØ© Ø§Ø­ØªÙŠØ§Ø¬Ø§ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
        </div>
        <div class="p-5 bg-white/5 flex gap-2 border-t border-white/5">
            <input type="text" id="aiQuery" class="!p-3 text-xs !rounded-xl" placeholder="Ø§Ø³Ø£Ù„ Ø¹Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø±ØŒ Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ†...">
            <button onclick="handleAIRequest()" class="bg-gold text-black px-4 rounded-xl font-bold">Ø§Ø±Ø³Ù„</button>
        </div>
    </div>
    <button onclick="toggleBot()" class="fixed bottom-10 right-10 bg-gold text-black w-20 h-20 rounded-full shadow-[0_0_50px_rgba(197,160,89,0.4)] flex items-center justify-center text-3xl z-[1001] animate-pulse">ğŸ¤–</button>

    <div id="staffPortal" class="staff-os">
        <div class="max-w-[1400px] mx-auto">
            <div class="flex justify-between items-center mb-16 border-b border-blue-500/30 pb-8">
                <h2 class="text-4xl font-ultra text-blue-500 tracking-tighter italic">STAFF OPERATIONAL TERMINAL</h2>
                <button onclick="exitSystems()" class="bg-red-600/10 text-red-600 border border-red-600/20 px-10 py-3 rounded-full font-black uppercase text-xs">Terminte Session</button>
            </div>
            <div class="grid gap-10">
                <div class="glass-container p-10 border-blue-500/20">
                    <h3 class="text-xl font-black mb-8 border-r-4 border-blue-500 pr-4">Daily Reservation Manifest</h3>
                    <div class="overflow-x-auto">
                        <table class="data-table">
                            <thead>
                                <tr><th>Guest Name</th><th>Date</th><th>Phone</th><th>Status</th><th>Validation</th></tr>
                            </thead>
                            <tbody id="staffLogBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="adminPortal" class="admin-os">
        <div class="max-w-[1400px] mx-auto">
            <div class="flex justify-between items-center mb-16 border-b border-gold/30 pb-8">
                <h2 class="text-4xl font-ultra text-gold tracking-tighter italic">EXECUTIVE COMMAND CENTER</h2>
                <div class="flex gap-4">
                    <button onclick="exportFinancials()" class="bg-gray-800 px-6 py-3 rounded-full text-[10px] font-bold">ØªØµØ¯ÙŠØ± ÙƒØ´Ù Ø­Ø³Ø§Ø¨</button>
                    <button onclick="exitSystems()" class="bg-red-600 px-10 py-3 rounded-full font-black uppercase text-xs shadow-lg shadow-red-600/20">Ø®Ø±ÙˆØ¬ Ø¢Ù…Ù†</button>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-10">
                <div class="lg:col-span-1 space-y-10">
                    <div class="glass-container p-8">
                        <h4 class="text-gold font-black mb-6 underline text-xs tracking-widest">Interface Settings</h4>
                        <div class="space-y-4">
                            <input type="text" id="setBrand" class="royal-input text-xs" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„ØªØ¬Ø§Ø±ÙŠ">
                            <input type="text" id="setHeroTitle" class="royal-input text-xs" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø­Ø¬Ø²">
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" id="setP24" class="royal-input text-xs" placeholder="Ø³Ø¹Ø± 24Ø³">
                                <input type="number" id="setP12" class="royal-input text-xs" placeholder="Ø³Ø¹Ø± 12Ø³">
                            </div>
                            <input type="text" id="setWA" class="royal-input text-xs" placeholder="Ø±Ù‚Ù… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨Ø§Øª">
                        </div>
                    </div>

                    <div class="glass-container p-8">
                        <h4 class="text-gold font-black mb-6 underline text-xs tracking-widest">AI Brain Training</h4>
                        <textarea id="setAI" rows="6" class="royal-input text-[11px] leading-relaxed" placeholder="Ø£Ø¯Ø®Ù„ Ù‡Ù†Ø§ ÙƒØ§ÙØ© Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† ÙˆØ§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù„ÙŠØ­ÙØ¸Ù‡Ø§ Ø§Ù„Ø¨ÙˆØª..."></textarea>
                        <p class="text-[9px] text-gray-500 mt-4 italic">Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø¨ÙˆØª ÙŠÙ‚ÙˆÙ… Ø¨ØªØ­Ù„ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù†ØµÙˆØµ Ù„Ù„Ø¥Ø¬Ø§Ø¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</p>
                    </div>
                </div>

                <div class="lg:col-span-2 space-y-10">
                    <div class="grid grid-cols-3 gap-6">
                        <div class="glass-container p-8 border-success/20 text-center">
                            <span class="text-[9px] text-gray-500 uppercase font-black">Gross Revenue</span>
                            <h3 id="uiTotalRevenue" class="text-3xl font-ultra text-success mt-2">0</h3>
                        </div>
                        <div class="glass-container p-8 border-blue-500/20 text-center">
                            <span class="text-[9px] text-gray-500 uppercase font-black">Total Bookings</span>
                            <h3 id="uiTotalCount" class="text-3xl font-ultra text-blue-500 mt-2">0</h3>
                        </div>
                        <div class="glass-container p-8 border-danger/20 text-center cursor-pointer" onclick="resetFinance()">
                            <span class="text-[9px] text-danger uppercase font-black">System Purge</span>
                            <h3 class="text-lg font-ultra text-white mt-2 italic">RESET</h3>
                        </div>
                    </div>

                    <div class="glass-container p-10 overflow-hidden">
                        <h4 class="text-gold font-black mb-8 underline text-xs tracking-widest uppercase">Master Audit Trail (Ledger)</h4>
                        <div class="overflow-x-auto max-h-[500px]">
                            <table class="data-table">
                                <thead>
                                    <tr><th>Client ID</th><th>Amount</th><th>Date</th><th>Recorded At</th></tr>
                                </thead>
                                <tbody id="adminMasterBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="commitMasterChanges()" class="w-full mt-20 btn-prime !py-10 text-3xl tracking-widest shadow-2xl">
                COMMIT ALL SYSTEM CHANGES âš™ï¸
            </button>
        </div>
    </div>

    <script>
        /* * --- CORE ENGINE V10.4 ---
         * Developed for "The Royal Oasis" Management System.
         * Total Scripts & Logic Lines exceed 600+.
         */

        // --- 1. Security & Image Verification Logic ---
        function advancedCyberCheck(input, boxId) {
            const fullName = document.getElementById('coreFullName').value.trim();
            const box = document.getElementById(boxId);
            
            if (fullName.split(' ').length < 4) {
                alert("ğŸ›‘ Ø®Ø·Ø£ Ø£Ù…Ù†ÙŠ: ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚.");
                input.value = ""; return;
            }

            const file = input.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ÙØ­Øµ Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØ±Ø© (Ù…Ø³ØªÙ…Ø³Ùƒ vs Ø·Ø¨ÙŠØ¹Ø©)
                    // Ø§Ù„ØµÙˆØ± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© Ø¹Ø§Ø¯Ø© Ù…Ø§ ØªÙƒÙˆÙ† Ø¯Ù‚ØªÙ‡Ø§ Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹ ÙˆØ£Ø¨Ø¹Ø§Ø¯Ù‡Ø§ ÙˆØ§Ø³Ø¹Ø© (Landscape)
                    const ratio = this.width / this.height;
                    const isNature = (this.width > 3500 && ratio > 1.2); 

                    if (isNature) {
                        alert("âŒ ØªØ­Ø°ÙŠØ±: Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠÙƒØªØ´Ù Ø£Ù† Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© " + (ratio > 1 ? "Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ" : "ØµÙˆØ±Ø© ÙÙ†ÙŠØ©") + ". ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªÙ…Ø³Ùƒ Ø§Ù„Ø±Ø³Ù…ÙŠ.");
                        input.value = "";
                        box.style.borderColor = "var(--danger)";
                        return;
                    }

                    // Ù‚ÙÙ„ Ø§Ù„Ø§Ø³Ù… ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚
                    document.getElementById('coreFullName').readOnly = true;
                    box.style.borderColor = "var(--success)";
                    box.style.background = "rgba(34, 197, 94, 0.08)";
                    evaluateMasterButton();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function evaluateMasterButton() {
            const f1 = document.getElementById('coreIdFile').files.length;
            const f2 = document.getElementById('coreResFile').files.length;
            const btn = document.getElementById('masterBookingBtn');

            if (f1 > 0 && f2 > 0) {
                btn.disabled = false;
                btn.innerText = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙˆØ¥ØµØ¯Ø§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ğŸ§¾";
                btn.className = "btn-prime w-full mt-10 !py-8 text-2xl tracking-tighter shadow-2xl animate__animated animate__pulse animate__infinite";
            }
        }

        // --- 2. AI Brain & Concierge Logic ---
        function toggleBot() {
            const terminal = document.getElementById('aiTerminal');
            terminal.style.display = (terminal.style.display === 'flex' ? 'none' : 'flex');
        }

        function handleAIRequest() {
            const query = document.getElementById('aiQuery').value;
            const chat = document.getElementById('chatHistory');
            const brain = localStorage.getItem('ai_brain_data') || "Ù†Ø­Ù† Ù…Ù†ØªØ¬Ø¹ Ø³ÙŠØ§Ø­ÙŠ ÙØ§Ø®Ø± ÙŠÙ‚Ø¯Ù… Ø®Ø¯Ù…Ø§Øª Ù…Ù„ÙƒÙŠØ©.";

            if (!query) return;

            chat.innerHTML += `<div class="bubble bubble-user">${query}</div>`;
            document.getElementById('aiQuery').value = "";

            setTimeout(() => {
                let response = "Ø£Ø¹ØªØ°Ø±ØŒ Ù„Ù… Ø£Ø¬Ø¯ Ø¥Ø¬Ø§Ø¨Ø© Ø¯Ù‚ÙŠÙ‚Ø© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©.";
                
                const q = query.toLowerCase();
                if (q.includes("Ø³Ø¹Ø±") || q.includes("ØªÙƒÙ„ÙØ©")) {
                    response = "Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…: Ø³Ø¹Ø± Ø§Ù„Ù€ 24 Ø³Ø§Ø¹Ø© Ù‡Ùˆ " + (localStorage.getItem('sys_p24') || "600,000") + " Ø¯.Ø¹.";
                } else if (q.includes("Ù…ÙˆØ¹Ø¯") || q.includes("ÙˆÙ‚Øª") || q.includes("Ù…ØªÙ‰")) {
                    response = "Ø­Ø³Ø¨ Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©: " + brain.substring(0, 150) + "...";
                }

                chat.innerHTML += `<div class="bubble bubble-bot">${response}</div>`;
                chat.scrollTop = chat.scrollHeight;
            }, 800);
        }

        // --- 3. Financial & Ledger System ---
        function dispatchFinalBooking() {
            const name = document.getElementById('coreFullName').value;
            const date = document.getElementById('coreDate').value;
            const price = document.getElementById('uiFinalPrice').innerText;
            const phone = document.getElementById('corePhone').value;
            const wa = localStorage.getItem('sys_wa') || "9647700000000";

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³Ø¬Ù„ Ù„Ø¯ÙØªØ± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ²ÙŠ
            let ledger = JSON.parse(localStorage.getItem('master_ledger') || "[]");
            const entry = {
                id: "TXN-" + Math.floor(Math.random()*99999),
                guest: name,
                date: date,
                amount: price,
                phone: phone,
                recorded: new Date().toLocaleString('ar-IQ')
            };
            ledger.push(entry);
            localStorage.setItem('master_ledger', JSON.stringify(ledger));

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙˆØµÙ„ ÙˆØ±Ø³Ø§Ù„Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
            const msg = `ğŸ§¾ *ÙØ§ØªÙˆØ±Ø© Ø­Ø¬Ø² Ø±Ù‚Ù…ÙŠØ© - Ø§Ù„Ù…Ù„ÙƒÙŠ*%0A--------------------------%0AğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${name}%0AğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}%0AğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${price} IQD%0AğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone}%0AğŸ›¡ï¸ *Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù…Ø§Ù†:* ØªÙ…Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø¨Ù†Ø¬Ø§Ø­.%0A%0Aâš ï¸ *ØªÙ†Ø¨ÙŠÙ‡ Ù„Ù„Ù†Ø¸Ø§Ù…:* ÙŠØ±Ø¬Ù‰ ØªØ°ÙƒÙŠØ± Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø©.`;
            
            alert("âœ… ØªÙ… Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø­Ø¬Ø² Ù…Ø§Ù„ÙŠØ§Ù‹ ÙˆØ£Ù…Ù†ÙŠØ§Ù‹. Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„ÙˆØµÙ„.");
            window.location.href = `https://wa.me/${wa}?text=${msg}`;
        }

        function recalculatePrice() {
            const type = document.getElementById('coreDuration').value;
            const p24 = localStorage.getItem('sys_p24') || "600,000";
            const p12 = localStorage.getItem('sys_p12') || "350,000";
            document.getElementById('uiFinalPrice').innerText = (type === '24' ? p24 : p12).toLocaleString();
        }

        // --- 4. Admin & Security Gates ---
        function loginGate(target) {
            const pwd = prompt("System Access Key Required:");
            const adminPass = localStorage.getItem('sys_admin_pass') || "1234";

            if (target === 'admin' && pwd === adminPass) {
                document.getElementById('adminPortal').style.display = 'block';
                syncAdminDashboard();
            } else if (target === 'staff' && pwd === 'staff') {
                document.getElementById('staffPortal').style.display = 'block';
                syncStaffDashboard();
            } else {
                alert("âŒ ACCESS DENIED: Invalid Security Key.");
            }
        }

        function commitMasterChanges() {
            localStorage.setItem('sys_brand', document.getElementById('setBrand').value);
            localStorage.setItem('sys_hero_title', document.getElementById('setHeroTitle').value);
            localStorage.setItem('sys_p24', document.getElementById('setP24').value);
            localStorage.setItem('sys_p12', document.getElementById('setP12').value);
            localStorage.setItem('ai_brain_data', document.getElementById('setAI').value);
            localStorage.setItem('sys_wa', document.getElementById('setWA').value);
            localStorage.setItem('sys_admin_pass', document.getElementById('setNewPass').value || "1234");
            
            alert("ğŸ› ï¸ ØªÙ… ØªØ­Ø¯ÙŠØ« " + document.getElementById('setBrand').value + " Ø¨Ù†Ø¬Ø§Ø­.");
            location.reload();
        }

        function syncAdminDashboard() {
            const ledger = JSON.parse(localStorage.getItem('master_ledger') || "[]");
            const list = document.getElementById('adminMasterBody');
            let total = 0;

            list.innerHTML = ledger.map(item => {
                total += parseInt(item.amount.replace(/,/g, ''));
                return `<tr><td>${item.guest}</td><td>${item.amount}</td><td>${item.date}</td><td>${item.recorded}</td></tr>`;
            }).reverse().join('');

            document.getElementById('uiTotalRevenue').innerText = total.toLocaleString() + " Ø¯.Ø¹";
            document.getElementById('uiTotalCount').innerText = ledger.length;
        }

        function syncStaffDashboard() {
            const ledger = JSON.parse(localStorage.getItem('master_ledger') || "[]");
            const list = document.getElementById('staffLogBody');
            list.innerHTML = ledger.map(item => `
                <tr>
                    <td>${item.guest}</td>
                    <td>${item.date}</td>
                    <td>${item.phone}</td>
                    <td><span class="text-success font-black text-[10px]">RESERVED</span></td>
                    <td><span class="text-blue-500 text-[10px]">VERIFIED ğŸ›¡ï¸</span></td>
                </tr>
            `).reverse().join('');
        }

        function exitSystems() { location.reload(); }
        function resetFinance() { if(confirm("âš ï¸ ØªØµÙÙŠØ± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹!")) { localStorage.setItem('master_ledger', "[]"); syncAdminDashboard(); } }

        window.onload = function() {
            // Load Content
            document.getElementById('uiBrandName').innerText = localStorage.getItem('sys_brand') || "THE ROYAL OASIS";
            document.getElementById('uiBookingTitle').innerText = localStorage.getItem('sys_hero_title') || "ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„ÙˆØ«Ø§Ø¦Ù‚";
            
            // Sync Admin Inputs
            document.getElementById('setBrand').value = localStorage.getItem('sys_brand') || "";
            document.getElementById('setHeroTitle').value = localStorage.getItem('sys_hero_title') || "";
            document.getElementById('setP24').value = localStorage.getItem('sys_p24') || "";
            document.getElementById('setP12').value = localStorage.getItem('sys_p12') || "";
            document.getElementById('setAI').value = localStorage.getItem('ai_brain_data') || "";
            document.getElementById('setWA').value = localStorage.getItem('sys_wa') || "";

            recalculatePrice();
            flatpickr("#coreDate", { minDate: "today", locale: "ar", dateFormat: "Y-m-d" });
        };
    </script>
</body>
</html>
