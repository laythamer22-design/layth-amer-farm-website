<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø± | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --royal-blue: #0a192f; --gold: #d4af37; --accent: #112240; }
        body { font-family: 'Tajawal', sans-serif; background: var(--royal-blue); color: white; scroll-behavior: smooth; }
        
        .gold-gradient { background: linear-gradient(135deg, #d4af37 0%, #fceabb 50%, #d4af37 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .glass-card { background: rgba(17, 34, 64, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(212, 175, 55, 0.2); border-radius: 2rem; }
        
        /* Auto-Slider Animation */
        .slider-img { transition: opacity 1s ease-in-out; position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0; }
        .slider-img.active { opacity: 1; }
        
        .admin-panel { display: none; position: fixed; inset: 0; z-index: 9999; background: #020c1b; overflow-y: auto; padding: 2rem; }
        #receiptPrint { background: white; color: black; padding: 2rem; width: 380px; border: 8px double var(--gold); margin: 0 auto; position: relative; }
        
        .map-btn { background: linear-gradient(45deg, #05d5ff, #0055ff); border: none; transition: 0.3s; }
        .map-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(0, 85, 255, 0.4); }
    </style>
</head>
<body>

    <nav class="fixed top-0 w-full z-50 glass-card !rounded-none border-b border-gold/20 px-8 py-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <h1 id="brandName" class="text-2xl font-black gold-gradient">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h1>
        </div>
        <button onclick="openAdmin()" class="bg-gold/10 text-gold border border-gold/50 px-6 py-2 rounded-full text-xs font-bold hover:bg-gold hover:text-black transition">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
    </nav>

    <section class="relative h-screen w-full overflow-hidden">
        <div id="heroSlider">
            <img src="https://i.ibb.co/v4S6Y6Q/photo-4.jpg" class="slider-img active">
            <img src="https://i.ibb.co/C0mXm6H/photo-6.jpg" class="slider-img">
            <img src="https://i.ibb.co/mFm7X8J/photo-10.jpg" class="slider-img">
        </div>
        <div class="absolute inset-0 bg-black/40 flex flex-col items-center justify-center text-center p-4">
            <h2 class="text-5xl md:text-8xl font-black mb-4 gold-gradient">ÙØ®Ø§Ù…Ø© Ø¨Ù„Ø§ Ø­Ø¯ÙˆØ¯</h2>
            <p id="locationText" class="text-xl md:text-2xl tracking-[5px] font-light">Ø£Ø·Ø±Ø§Ù Ø§Ù„ÙÙ„ÙˆØ¬Ø© Ø§Ù„Ø³ÙƒÙ†ÙŠØ©</p>
            
            <div class="mt-8 flex gap-4">
                <a href="https://www.google.com/maps?q=33.3500,43.7833" target="_blank" class="map-btn flex items-center gap-2 px-6 py-3 rounded-xl font-bold text-sm">
                    <i data-lucide="map-pin"></i> Google Maps
                </a>
                <a href="https://waze.com/ul?ll=33.3500,43.7833&navigate=yes" target="_blank" class="bg-[#33ccff] flex items-center gap-2 px-6 py-3 rounded-xl font-bold text-sm">
                    <i data-lucide="navigation"></i> Waze
                </a>
            </div>
        </div>
    </section>

    <section id="booking" class="py-20 px-6 max-w-6xl mx-auto">
        <div class="glass-card p-8 md:p-16 space-y-12">
            <div class="text-center space-y-4">
                <h3 class="text-4xl font-black">Ø­Ø¬Ø² Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ù…Ù„ÙƒÙŠ</h3>
                <div class="h-1 w-24 bg-gold mx-auto rounded-full"></div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <input type="text" id="custName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 outline-none focus:border-gold">
                    
                    <div class="grid grid-cols-2 gap-4">
                        <select id="custType" class="bg-accent p-4 rounded-xl border border-white/10">
                            <option>Ø¹Ø§Ø¦Ù„Ø© ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</option>
                            <option>Ø´Ø¨Ø§Ø¨ ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦</option>
                        </select>
                        <select id="custDuration" class="bg-accent p-4 rounded-xl border border-white/10" onchange="toggleTimeSlots()">
                            <option value="24">ÙŠÙˆÙ… ÙƒØ§Ù…Ù„</option>
                            <option value="12">Ù†ØµÙ ÙŠÙˆÙ… (12 Ø³Ø§Ø¹Ø©)</option>
                        </select>
                    </div>

                    <div id="timeSlotContainer" class="hidden animate-fade-in">
                        <p class="text-xs text-gold mb-2">Ø§Ø®ØªØ± Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©:</p>
                        <div class="grid grid-cols-2 gap-4">
                            <button onclick="selectSlot('morning')" id="slotM" class="p-3 border border-white/20 rounded-xl text-xs hover:bg-gold/20">ØµØ¨Ø§Ø­ÙŠ (Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… 8Øµ)</button>
                            <button onclick="selectSlot('evening')" id="slotE" class="p-3 border border-white/20 rounded-xl text-xs hover:bg-gold/20">Ù…Ø³Ø§Ø¦ÙŠ (Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… 8Ù…)</button>
                        </div>
                    </div>

                    <input type="date" id="bookDate" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 outline-none">
                </div>

                <div class="grid grid-cols-1 gap-4">
                    <div onclick="document.getElementById('f1').click()" class="border-2 border-dashed border-gold/30 p-8 rounded-3xl text-center cursor-pointer hover:bg-gold/5 transition">
                        <i data-lucide="upload-cloud" class="mx-auto text-gold mb-2"></i>
                        <span class="text-xs block">Ø±ÙØ¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©</span>
                        <input type="file" id="f1" class="hidden">
                    </div>
                    <div onclick="document.getElementById('f2').click()" class="border-2 border-dashed border-gold/30 p-8 rounded-3xl text-center cursor-pointer hover:bg-gold/5 transition">
                        <i data-lucide="shield-check" class="mx-auto text-gold mb-2"></i>
                        <span class="text-xs block">Ø±ÙØ¹ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ†</span>
                        <input type="file" id="f2" class="hidden">
                    </div>
                </div>
            </div>

            <div class="pt-10 border-t border-white/10 flex flex-col md:flex-row justify-between items-center gap-6">
                <div class="text-center md:text-right">
                    <p class="text-xs text-gray-400">Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹: 50% Ù…Ù‚Ø¯Ù… Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø¬Ø²</p>
                    <h4 class="text-3xl font-black text-gold">Ø§Ù„Ù…Ø¨Ù„Øº: <span id="priceLabel">150,000</span> Ø¯.Ø¹</h4>
                </div>
                <button onclick="processBooking()" class="w-full md:w-auto bg-gold text-black px-12 py-5 rounded-2xl font-black text-xl shadow-2xl hover:scale-105 transition">ØªØ£ÙƒÙŠØ¯ ÙˆØªØ­ÙˆÙŠÙ„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨ ğŸ“±</button>
            </div>
        </div>
    </section>

    <div id="adminView" class="admin-panel text-white">
        <div class="max-w-6xl mx-auto space-y-10">
            <div class="flex justify-between items-center border-b border-white/10 pb-6">
                <h2 class="text-3xl font-black gold-gradient italic">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ©</h2>
                <button onclick="document.getElementById('adminView').style.display='none'" class="bg-red-600 px-6 py-2 rounded-xl font-bold">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="glass-card p-6 space-y-4">
                    <h3 class="font-bold border-b border-gold/20 pb-2">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                    <input type="text" id="setLoc" placeholder="ØªØºÙŠÙŠØ± Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹" class="w-full bg-black/40 p-3 rounded-lg text-xs">
                    <input type="text" id="setMaps" placeholder="Ø±Ø§Ø¨Ø· Ø¬ÙˆØ¬Ù„ Ù…Ø§Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯" class="w-full bg-black/40 p-3 rounded-lg text-xs">
                    <input type="text" id="setWA" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø¯ÙŠØ±" class="w-full bg-black/40 p-3 rounded-lg text-xs">
                    <button onclick="saveAdminSettings()" class="w-full bg-gold text-black py-2 rounded-lg font-bold text-xs">Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª</button>
                </div>

                <div class="glass-card p-6 space-y-4">
                    <h3 class="font-bold border-b border-gold/20 pb-2">Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</h3>
                    <div class="flex gap-2">
                        <input type="text" id="timeM" placeholder="Ø§Ù„ØµØ¨Ø§Ø­ÙŠ (Ù…Ø«Ù„Ø§Ù‹ 8Øµ)" class="w-1/2 bg-black/40 p-3 rounded-lg text-xs">
                        <input type="text" id="timeE" placeholder="Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠ (Ù…Ø«Ù„Ø§Ù‹ 8Ù…)" class="w-1/2 bg-black/40 p-3 rounded-lg text-xs">
                    </div>
                    <h3 class="font-bold border-b border-gold/20 pb-2">Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ ÙˆØ§Ù„Ø®ØªÙ…</h3>
                    <input type="file" onchange="loadSignature(this)" class="text-[10px]">
                </div>

                <div class="glass-card p-6 flex flex-col justify-center items-center text-center">
                    <p class="text-xs text-gray-400">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</p>
                    <h4 id="totalRevenue" class="text-4xl font-black text-green-500">0 Ø¯.Ø¹</h4>
                </div>
            </div>

            <div class="glass-card overflow-hidden">
                <table class="w-full text-right text-xs">
                    <thead class="bg-gold text-black">
                        <tr><th class="p-4">Øª</th><th class="p-4">Ø§Ù„Ø²Ø¨ÙˆÙ†</th><th class="p-4">Ø§Ù„ØªØ§Ø±ÙŠØ®</th><th class="p-4">Ø§Ù„Ø­Ø§Ù„Ø©</th><th class="p-4">Ø¥Ø¬Ø±Ø§Ø¡</th></tr>
                    </thead>
                    <tbody id="adminTable"></tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="receiptModal" class="fixed inset-0 bg-black/95 z-[10000] hidden flex flex-col items-center justify-center p-4">
        <div id="receiptPrint">
            <div class="text-center mb-6">
                <h1 class="text-xl font-black">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h1>
                <p class="text-[9px] border-b border-black pb-1 uppercase tracking-widest">ÙˆØµÙ„ ØªØ£ÙƒÙŠØ¯ Ø­Ø¬Ø² - OFFICIAL RECEIPT</p>
            </div>
            <div class="space-y-3 text-[11px] font-mono">
                <div class="flex justify-between"><span>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ³Ù„Ø³Ù„ÙŠ:</span> <span id="rSeq">#0001</span></div>
                <div class="flex justify-between"><span>Ø§Ù„Ø§Ø³Ù…:</span> <span id="rCust">-</span></div>
                <div class="flex justify-between"><span>Ø§Ù„ØªØ§Ø±ÙŠØ®:</span> <span id="rDate">-</span></div>
                <div class="flex justify-between font-bold border-t border-black pt-2"><span>Ø§Ù„Ù…Ù‚Ø¯Ù… (50%):</span> <span id="rPaid">-</span></div>
                <div class="flex justify-between text-gray-500"><span>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ:</span> <span id="rRem">-</span></div>
            </div>
            <div id="qrcode" class="flex justify-center my-6"></div>
            <img id="adminSig" src="" class="absolute bottom-10 left-10 w-24 opacity-80">
            <div class="text-[8px] text-center mt-6 text-gray-400">ØªÙ†Ø¨ÙŠÙ‡: Ø³ÙŠØµÙ„Ùƒ Ø¥Ø´Ø¹Ø§Ø± ØªØ°ÙƒÙŠØ± Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø© Ù…Ù† Ø§Ù„Ù…ÙˆØ¹Ø¯ âœ…</div>
            <button onclick="window.print()" class="w-full mt-6 bg-black text-white py-2 text-xs no-print">ØªØ­Ù…ÙŠÙ„ PDF</button>
        </div>
        <button onclick="location.reload()" class="mt-6 text-white/30 text-xs no-print">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <script>
        lucide.createIcons();
        
        let db = JSON.parse(localStorage.getItem('farm_db_pro')) || [];
        let config = JSON.parse(localStorage.getItem('farm_config_pro')) || {
            loc: "Ø£Ø·Ø±Ø§Ù Ø§Ù„ÙÙ„ÙˆØ¬Ø© Ø§Ù„Ø³ÙƒÙ†ÙŠØ©",
            wa: "9647700000000",
            price: 150000,
            maps: "https://www.google.com/maps?q=33.3500,43.7833",
            timeM: "8 ØµØ¨Ø§Ø­Ø§Ù‹",
            timeE: "8 Ù…Ø³Ø§Ø¡Ù‹",
            sig: ""
        };

        let selectedSlot = "";

        // Auto Slider Logic
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slider-img');
        setInterval(() => {
            slides[currentSlide].classList.remove('active');
            currentSlide = (currentSlide + 1) % slides.length;
            slides[currentSlide].classList.add('active');
        }, 5000);

        function toggleTimeSlots() {
            const dur = document.getElementById('custDuration').value;
            const container = document.getElementById('timeSlotContainer');
            container.style.display = (dur == "12") ? "block" : "none";
            document.getElementById('priceLabel').innerText = (dur == "24" ? 150000 : 80000).toLocaleString();
        }

        function selectSlot(type) {
            selectedSlot = type;
            document.getElementById('slotM').classList.remove('bg-gold', 'text-black');
            document.getElementById('slotE').classList.remove('bg-gold', 'text-black');
            document.getElementById(type === 'morning' ? 'slotM' : 'slotE').classList.add('bg-gold', 'text-black');
        }

        function processBooking() {
            const name = document.getElementById('custName').value;
            const date = document.getElementById('bookDate').value;
            if(!name || !date) return alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©!");

            const newBooking = {
                id: db.length + 1,
                name: name,
                date: date,
                slot: selectedSlot || "ÙŠÙˆÙ… ÙƒØ§Ù…Ù„",
                paid: false,
                total: document.getElementById('custDuration').value == "24" ? 150000 : 80000
            };
            db.push(newBooking);
            localStorage.setItem('farm_db_pro', JSON.stringify(db));

            // Reminder Simulation (Browser Notification)
            if (Notification.permission === "granted") {
                setTimeout(() => {
                    new Notification("ØªØ°ÙƒÙŠØ± Ø­Ø¬Ø²", { body: `Ø¹Ø²ÙŠØ²ÙŠ ${name}ØŒ Ù†Ø°ÙƒØ±Ùƒ Ø¨Ù…ÙˆØ¹Ø¯ Ø­Ø¬Ø²Ùƒ ÙÙŠ Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ØºØ¯Ø§Ù‹.` });
                }, 2000); 
            }

            const msg = `Ø·Ù„Ø¨ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ø³Ù…: ${name}\nØ§Ù„ØªØ§Ø±ÙŠØ®: ${date}\nØ§Ù„ÙØªØ±Ø©: ${newBooking.slot}\nÙŠØ±Ø¬Ù‰ ØªØ£ÙƒÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù…Ù‚Ø¯Ù… 50%`;
            window.open(`https://wa.me/${config.wa}?text=${encodeURIComponent(msg)}`);
        }

        function openAdmin() {
            if(prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:") === "1234") {
                renderAdmin();
                document.getElementById('adminView').style.display = 'block';
            }
        }

        function loadSignature(input) {
            const reader = new FileReader();
            reader.onload = (e) => config.sig = e.target.result;
            reader.readAsDataURL(input.files[0]);
        }

        function saveAdminSettings() {
            config.loc = document.getElementById('setLoc').value || config.loc;
            config.wa = document.getElementById('setWA').value || config.wa;
            config.timeM = document.getElementById('timeM').value || config.timeM;
            config.timeE = document.getElementById('timeE').value || config.timeE;
            localStorage.setItem('farm_config_pro', JSON.stringify(config));
            alert("ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«!"); location.reload();
        }

        function renderAdmin() {
            const table = document.getElementById('adminTable');
            table.innerHTML = "";
            let revenue = 0;
            db.forEach((b, i) => {
                if(b.paid) revenue += (b.total * 0.5);
                table.innerHTML += `<tr class="border-b border-white/5">
                    <td class="p-4">#${b.id}</td>
                    <td class="p-4">${b.name}</td>
                    <td class="p-4">${b.date}</td>
                    <td class="p-4 ${b.paid ? 'text-green-500' : 'text-amber-500'} font-bold">${b.paid ? 'Ù…Ø¤ÙƒØ¯' : 'Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±'}</td>
                    <td class="p-4">
                        ${!b.paid ? `<button onclick="confirmPay(${i})" class="bg-green-600 px-3 py-1 rounded">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹</button>` : `<button onclick="showReceipt(${i})" class="text-blue-400">ÙØªØ­ Ø§Ù„ÙˆØµÙ„</button>`}
                    </td>
                </tr>`;
            });
            document.getElementById('totalRevenue').innerText = revenue.toLocaleString() + " Ø¯.Ø¹";
        }

        function confirmPay(i) {
            db[i].paid = true;
            localStorage.setItem('farm_db_pro', JSON.stringify(db));
            renderAdmin();
        }

        function showReceipt(i) {
            const b = db[i];
            document.getElementById('rSeq').innerText = "#" + b.id.toString().padStart(4, '0');
            document.getElementById('rCust').innerText = b.name;
            document.getElementById('rDate').innerText = b.date;
            document.getElementById('rPaid').innerText = (b.total * 0.5).toLocaleString() + " Ø¯.Ø¹";
            document.getElementById('rRem').innerText = (b.total * 0.5).toLocaleString() + " Ø¯.Ø¹";
            document.getElementById('adminSig').src = config.sig;
            
            document.getElementById('qrcode').innerHTML = "";
            new QRCode(document.getElementById("qrcode"), { text: config.maps, width: 80, height: 80 });
            
            document.getElementById('receiptModal').style.display = 'flex';
        }

        // Request notification permission
        if (Notification.permission !== "denied") Notification.requestPermission();
    </script>
</body>
</html>
