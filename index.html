<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Royal Oasis | Management System 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <style>
        :root { --gold: #c5a059; --dark: #050505; --glass: rgba(255, 255, 255, 0.03); }
        body { font-family: 'Tajawal', sans-serif; background: var(--dark); color: white; overflow-x: hidden; }
        .font-ultra { font-weight: 900; text-shadow: 2px 2px 10px #000; }
        
        /* ØªØµÙ…ÙŠÙ… Glassmorphism 2026 */
        .glass { background: var(--glass); backdrop-filter: blur(20px); border: 1px solid rgba(197, 160, 89, 0.2); border-radius: 40px; }
        .main-bg { position: fixed; inset: 0; z-index: -2; background-size: cover; background-position: center; filter: brightness(0.3); transition: 1s ease-in-out; }
        
        /* Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…Ø§Øª Ø§Ù„Ø³Ø¨Ø¹Ø© */
        .album-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .album-card { position: relative; height: 250px; border-radius: 25px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); transition: 0.4s; cursor: pointer; }
        .album-card:hover { transform: translateY(-10px); border-color: var(--gold); }
        .album-card img { width: 100%; height: 100%; object-fit: cover; }
        .album-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); display: flex; align-items: flex-end; padding: 20px; }

        /* Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¬ÙŠØ¨ Ø§Ù„Ø¢Ù„ÙŠ AI */
        #aiBox { position: fixed; bottom: 20px; left: 20px; width: 320px; height: 450px; background: #0a0a0a; border: 1px solid var(--gold); border-radius: 25px; z-index: 1000; display: none; flex-direction: column; box-shadow: 0 10px 40px rgba(0,0,0,0.8); }
        .ai-msg { padding: 10px 15px; border-radius: 15px; margin: 5px; font-size: 13px; max-width: 85%; }
        .ai-bot { background: #1a1a1a; border-right: 3px solid var(--gold); align-self: flex-start; }
        .ai-user { background: var(--gold); color: #000; align-self: flex-end; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ù…Ø¯ÙŠØ± */
        #adminOS { display: none; position: fixed; inset: 0; z-index: 9999; background: #050505; padding: 40px; overflow-y: auto; border: 4px solid var(--gold); }
        input, select, textarea { background: #000 !important; border: 1px solid #333 !important; color: var(--gold) !important; padding: 12px; border-radius: 12px; width: 100%; outline: none; }
        input[readonly] { background: rgba(34, 197, 94, 0.1) !important; border-color: #22c55e !important; cursor: not-allowed; }
    </style>
</head>
<body>

    <div id="mainBg" class="main-bg" style="background-image: url('https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?w=1600')"></div>

    <nav class="fixed top-0 w-full z-50 p-6 flex justify-between items-center backdrop-blur-md">
        <h1 id="farmTitle" class="text-3xl font-ultra text-gold italic">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h1>
        <button onclick="authAdmin()" class="bg-gold text-black px-6 py-2 rounded-full font-black text-xs">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
    </nav>

    <div class="pt-32 px-6 max-w-7xl mx-auto pb-20">
        
        <div class="album-grid mb-20">
            <div class="album-card" onclick="alert('Ø§Ù„Ø¨ÙˆÙ… Ø§Ù„Ù…Ø³Ø¨Ø­')"><img id="img1" src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=600"><div class="album-overlay"><h4 id="t1">Ø§Ù„Ù…Ø³Ø¨Ø­ Ø§Ù„Ø£ÙˆÙ„Ù…Ø¨ÙŠ</h4></div></div>
            <div class="album-card" onclick="alert('Ø§Ù„Ø¨ÙˆÙ… Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨')"><img id="img2" src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600"><div class="album-overlay"><h4 id="t2">Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ©</h4></div></div>
            <div class="album-card" onclick="alert('Ø§Ù„Ø¨ÙˆÙ… Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ')"><img id="img3" src="https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=600"><div class="album-overlay"><h4 id="t3">ØµØ§Ù„Ø© Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</h4></div></div>
            <div class="album-card" onclick="alert('Ø§Ù„Ø¨ÙˆÙ… Ø§Ù„ØªØµÙ…ÙŠÙ…')"><img id="img4" src="https://images.unsplash.com/photo-1600607687940-47a04b6bd9a1?w=600"><div class="album-overlay"><h4 id="t4">Ø§Ù„Ø£Ø¬Ù†Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h4></div></div>
            <div class="album-card" onclick="alert('Ø§Ù„Ø¨ÙˆÙ… Ø§Ù„ØªØ±ÙÙŠÙ‡')"><img id="img5" src="https://images.unsplash.com/photo-1511192336575-5a79af67a629?w=600"><div class="album-overlay"><h4 id="t5">Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠØ©</h4></div></div>
            <div class="album-card" onclick="alert('Ø§Ù„Ø¨ÙˆÙ… Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚')"><img id="img6" src="https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=600"><div class="album-overlay"><h4 id="t6">Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©</h4></div></div>
            <div class="album-card" onclick="alert('Ø§Ù„Ø¨ÙˆÙ… Ø§Ù„Ø¬Ù„Ø³Ø§Øª')"><img id="img7" src="https://images.unsplash.com/photo-1590073242678-70ee3fc28e84?w=600"><div class="album-overlay"><h4 id="t7">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©</h4></div></div>
        </div>

        <div class="max-w-4xl mx-auto glass p-10 relative overflow-hidden">
            <h2 id="admTitleBooking" class="text-4xl font-ultra text-gold text-center mb-10 italic">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù…ÙˆØ«Ù‚</h2>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div class="md:col-span-2">
                    <label class="text-xs text-gold opacity-50 mb-2 block">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ (ÙŠØ·Ø§Ø¨Ù‚ Ø§Ù„Ù‡ÙˆÙŠØ© Ø­ØµØ±Ø§Ù‹):</label>
                    <input type="text" id="custName" class="text-xl py-4" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„">
                </div>

                <input type="tel" id="custPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                <input type="text" id="bookDate" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²">

                <div class="md:col-span-2 bg-red-500/5 p-6 rounded-3xl border border-dashed border-red-500/20 text-center">
                    <p class="text-[11px] text-red-500 font-bold mb-4">âš ï¸ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¨ØµØ±ÙŠ: ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ† (ØµÙˆØ± Ù‚Ø±ÙŠØ¨Ø©)</p>
                    <div class="grid grid-cols-2 gap-4">
                        <div id="boxId" class="p-4 bg-black/40 rounded-2xl border border-gray-800">
                            <input type="file" id="fId" class="text-[10px]" onchange="smartVerify(this, 'boxId')">
                        </div>
                        <div id="boxRes" class="p-4 bg-black/40 rounded-2xl border border-gray-800">
                            <input type="file" id="fRes" class="text-[10px]" onchange="smartVerify(this, 'boxRes')">
                        </div>
                    </div>
                </div>
            </div>

            <div id="priceBox" class="mt-8 p-6 bg-gold/10 rounded-2xl text-center border border-gold/20">
                <span class="text-sm opacity-60">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº:</span>
                <h4 class="text-3xl font-black text-gold"><span id="displayPrice">0</span> Ø¯.Ø¹</h4>
            </div>

            <button id="finalBtn" onclick="processPayment()" disabled class="w-full mt-8 bg-gray-800 text-white py-6 rounded-3xl text-2xl font-black opacity-20 cursor-not-allowed transition-all">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©...</button>
        </div>
    </div>

    <div id="aiBox">
        <div class="p-4 bg-gold text-black font-black flex justify-between items-center rounded-t-2xl">
            <span>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ ğŸ¤–</span>
            <button onclick="toggleBot()">Ã—</button>
        </div>
        <div id="aiChat" class="flex-1 overflow-y-auto p-4 flex flex-col">
            <div class="ai-msg ai-bot">Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ Ù„Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±. ÙƒÙŠÙ Ø£Ø®Ø¯Ù…ÙƒØŸ</div>
        </div>
        <div class="p-3 bg-white/5 flex gap-2">
            <input type="text" id="aiInput" class="!p-2 text-xs" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ØŒ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±...">
            <button onclick="askAI()" class="bg-gold text-black px-4 rounded-xl font-bold text-xs">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>
    <button onclick="toggleBot()" class="fixed bottom-6 right-6 bg-gold text-black w-14 h-14 rounded-full shadow-2xl font-black text-2xl z-[1001]">ØŸ</button>

    <div id="adminOS">
        <div class="max-w-6xl mx-auto">
            <div class="flex justify-between items-center border-b-2 border-gold pb-6 mb-8">
                <h2 class="text-4xl font-ultra text-gold italic">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¹Ù„ÙŠØ§</h2>
                <div class="flex gap-4">
                    <button id="staffBtn" onclick="setRole('staff')" class="bg-blue-600 px-4 py-2 rounded-xl text-xs font-bold">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</button>
                    <button onclick="closeAdmin()" class="bg-red-600 px-8 py-2 rounded-full font-bold">Ø®Ø±ÙˆØ¬</button>
                </div>
            </div>

            <div id="managerTools" class="grid lg:grid-cols-2 gap-8">
                <div class="admin-card bg-white/5 p-6 rounded-3xl border border-white/10">
                    <h4 class="text-gold font-bold mb-4 underline">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰</h4>
                    <div class="space-y-3">
                        <input type="text" id="admTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ">
                        <input type="text" id="admBTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø¬Ø²">
                        <div class="grid grid-cols-2 gap-2 text-[10px]">
                            <div>Ø§Ù„Ø®Ù„ÙÙŠØ©: <input type="file" onchange="sync(this, 'mainBg')"></div>
                            <div>Ø§Ù„Ù…Ø³Ø¨Ø­: <input type="file" onchange="sync(this, 'img1')"></div>
                        </div>
                    </div>
                </div>

                <div class="admin-card bg-white/5 p-6 rounded-3xl border border-white/10">
                    <h4 class="text-gold font-bold mb-4 underline">ØªØºØ°ÙŠØ© Ø§Ù„Ø°ÙƒØ§Ø¡ ÙˆØ§Ù„Ù…Ø§Ù„ÙŠØ©</h4>
                    <textarea id="admAIData" rows="3" class="text-xs mb-3" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ù„ÙŠØ¬ÙŠØ¨ Ø¨Ù‡Ø§ Ø§Ù„Ø¨ÙˆØª..."></textarea>
                    <div class="grid grid-cols-2 gap-2">
                        <input type="number" id="admP24" placeholder="Ø³Ø¹Ø± 24 Ø³Ø§Ø¹Ø©">
                        <input type="text" id="admWA" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">
                    </div>
                </div>

                <div class="admin-card bg-white/5 p-6 rounded-3xl border border-white/10 lg:col-span-2">
                    <h4 class="text-gold font-bold mb-4 underline">Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h4>
                    <div class="flex gap-4 mb-4">
                        <button onclick="getReport('ÙŠÙˆÙ…ÙŠ')" class="bg-gray-800 flex-1 py-3 rounded-xl text-xs">ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ</button>
                        <button onclick="getReport('Ø´Ù‡Ø±ÙŠ')" class="bg-gray-800 flex-1 py-3 rounded-xl text-xs">ØªÙ‚Ø±ÙŠØ± Ø´Ù‡Ø±ÙŠ</button>
                    </div>
                    <div id="logTable" class="text-[10px] h-32 overflow-y-auto bg-black p-4 rounded-xl border border-white/5">
                        </div>
                </div>

                <div class="admin-card bg-white/5 p-6 rounded-3xl border border-white/10 lg:col-span-2">
                    <input type="password" id="admNewPass" placeholder="ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ù…Ø¯ÙŠØ±">
                </div>
            </div>
            
            <button onclick="saveAllSettings()" class="w-full mt-10 bg-green-600 py-6 rounded-3xl font-black text-2xl">Ø­ÙØ¸ ÙƒØ§ÙØ© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ© âœ…</button>
        </div>
    </div>

    <script>
        // --- 1. Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù…Ù† ÙˆØ§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¨ØµØ±ÙŠ ---
        function smartVerify(input, boxId) {
            const name = document.getElementById('custName').value.trim();
            const box = document.getElementById(boxId);
            
            if(name.split(' ').length < 4) {
                alert("âŒ ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø±ÙØ¹ Ø§Ù„Ù…Ø³ØªÙ…Ø³ÙƒØ§Øª!");
                input.value = ""; return;
            }

            const img = new Image();
            img.src = URL.createObjectURL(input.files[0]);
            img.onload = function() {
                // ÙÙ„ØªØ±Ø© Ø§Ù„ØµÙˆØ± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© (Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚): ØµÙˆØ± Ø§Ù„Ù‡ÙˆÙŠØ© Ù„Ø§ ØªÙƒÙˆÙ† Ø¯Ù‚ØªÙ‡Ø§ ÙˆØ£Ø¨Ø¹Ø§Ø¯Ù‡Ø§ Ø¶Ø®Ù…Ø© Ø¬Ø¯Ø§Ù‹ ÙƒØ§Ù„ØµÙˆØ± Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©
                if(this.width > 3800 || this.height > 3800) {
                    alert("âŒ ØªÙ… Ø§Ù„Ø±ÙØ¶: Ø§Ù„ØµÙˆØ±Ø© Ù„Ø§ ØªØ¨Ø¯Ùˆ Ù…Ø³ØªÙ…Ø³ÙƒØ§Ù‹ Ø±Ø³Ù…ÙŠØ§Ù‹ (Ø±Ø¨Ù…Ø§ ØµÙˆØ±Ø© Ø·Ø¨ÙŠØ¹ÙŠØ© Ø£Ùˆ Ø­Ø¯ÙŠÙ‚Ø©).");
                    input.value = ""; return;
                }
                
                document.getElementById('custName').readOnly = true;
                box.style.borderColor = "#22c55e";
                checkFinalStatus();
            };
        }

        function checkFinalStatus() {
            const f1 = document.getElementById('fId').files.length;
            const f2 = document.getElementById('fRes').files.length;
            if(f1 > 0 && f2 > 0) {
                const btn = document.getElementById('finalBtn');
                btn.disabled = false;
                btn.className = "w-full mt-8 bg-gold text-black py-6 rounded-3xl text-2xl font-black shadow-2xl animate-bounce";
                btn.innerText = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² ÙˆØ¥ØµØ¯Ø§Ø± Ø§Ù„ÙˆØµÙ„ ğŸ§¾";
            }
        }

        // --- 2. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø¬ÙŠØ¨ Ø§Ù„Ø¢Ù„ÙŠ AI ---
        function toggleBot() { 
            const b = document.getElementById('aiBox');
            b.style.display = b.style.display === 'flex' ? 'none' : 'flex';
        }

        function askAI() {
            const input = document.getElementById('aiInput');
            const chat = document.getElementById('aiChat');
            const knowledge = localStorage.getItem('aiData') || "Ù†Ø­Ù† Ù…Ø²Ø±Ø¹Ø© ÙØ®Ù…Ø©.";

            if(!input.value) return;
            chat.innerHTML += `<div class="ai-msg ai-user">${input.value}</div>`;
            
            setTimeout(() => {
                let reply = "Ù„Ù… Ø£ÙÙ‡Ù…ÙƒØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©.";
                const v = input.value;
                if(v.includes("Ø³Ø¹Ø±") || v.includes("ÙƒÙ…")) reply = "Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªØ¨Ø¯Ø£ Ù…Ù† " + (localStorage.getItem('p24') || "600,000") + " Ø¯.Ø¹.";
                else if(v.includes("ÙˆÙ‚Øª") || v.includes("Ù…ØªÙ‰")) reply = knowledge.substring(0, 150);
                
                chat.innerHTML += `<div class="ai-msg ai-bot">${reply}</div>`;
                chat.scrollTop = chat.scrollHeight;
            }, 600);
            input.value = "";
        }

        // --- 3. Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ÙˆØ§Ù„ÙˆØµÙ„ ---
        function processPayment() {
            const name = document.getElementById('custName').value;
            const date = document.getElementById('bookDate').value;
            const price = document.getElementById('displayPrice').innerText;
            const wa = localStorage.getItem('wa') || "9647700000000";

            // Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø§Ù„ÙŠ
            let logs = JSON.parse(localStorage.getItem('logs') || "[]");
            logs.push({ name, date, price, timestamp: new Date().toLocaleDateString() });
            localStorage.setItem('logs', JSON.stringify(logs));

            const msg = `ğŸ§¾ *ÙˆØµÙ„ Ø­Ø¬Ø² Ù…ÙˆØ«Ù‚*%0AğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}%0AğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}%0AğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${price} Ø¯.Ø¹%0AğŸ›¡ï¸ Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚: Ù…Ø·Ø§Ø¨Ù‚Ø© Ø¨ØµØ±ÙŠØ© Ù†Ø§Ø¬Ø­Ø© âœ…`;
            window.location.href = `https://wa.me/${wa}?text=${msg}`;
        }

        function getReport(type) {
            const logs = JSON.parse(localStorage.getItem('logs') || "[]");
            let total = logs.reduce((acc, curr) => acc + parseInt(curr.price.replace(/,/g, '')), 0);
            alert(`ğŸ“Š ØªÙ‚Ø±ÙŠØ± ${type}:\nØ¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª: ${logs.length}\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„: ${total.toLocaleString()} Ø¯.Ø¹`);
        }

        // --- 4. Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª ---
        function authAdmin() {
            const p = prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
            const master = localStorage.getItem('pass') || "1234";
            if(p === master) {
                document.getElementById('adminOS').style.display='block';
                document.getElementById('managerTools').style.display='grid';
            } else if(p === "staff") {
                document.getElementById('adminOS').style.display='block';
                document.getElementById('managerTools').style.display='none'; // Ø¥Ø®ÙØ§Ø¡ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø¯ÙŠØ±
                alert("Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸Ù: Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¬Ù„Ø§Øª ÙÙ‚Ø·.");
            }
        }

        function saveAllSettings() {
            localStorage.setItem('wa', document.getElementById('admWA').value);
            localStorage.setItem('p24', document.getElementById('admP24').value);
            localStorage.setItem('aiData', document.getElementById('admAIData').value);
            localStorage.setItem('farmTitle', document.getElementById('admTitle').value);
            localStorage.setItem('pass', document.getElementById('admNewPass').value || "1234");
            location.reload();
        }

        function sync(input, id) {
            if (input.files && input.files[0]) {
                const r = new FileReader();
                r.onload = (e) => {
                    const el = document.getElementById(id);
                    if(el.tagName === 'IMG') el.src = e.target.result;
                    else el.style.backgroundImage = `url('${e.target.result}')`;
                    localStorage.setItem(id, e.target.result);
                };
                r.readAsDataURL(input.files[0]);
            }
        }

        window.onload = function() {
            document.getElementById('displayPrice').innerText = (localStorage.getItem('p24') || "600,000");
            document.getElementById('farmTitle').innerText = localStorage.getItem('farmTitle') || "Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±";
            const bg = localStorage.getItem('mainBg');
            if(bg) document.getElementById('mainBg').style.backgroundImage = `url('${bg}')`;
            
            // ØªØ­Ù…ÙŠÙ„ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ±
            const logs = JSON.parse(localStorage.getItem('logs') || "[]");
            document.getElementById('logTable').innerHTML = logs.map(l => `<div>â€¢ ${l.name} - ${l.date} - ${l.price} Ø¯.Ø¹</div>`).join('');
            
            flatpickr("#bookDate", { minDate: "today", locale: "ar" });
        };

        function closeAdmin() { document.getElementById('adminOS').style.display='none'; }
    </script>
</body>
</html>
