<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Royal Oasis | Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <style>
        :root { --gold: #c5a059; --dark: #050505; }
        body { font-family: 'Tajawal', sans-serif; background-color: var(--dark); color: white; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gold-text { background: linear-gradient(135deg, #fceabb, #f8b500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .admin-modal { display: none; position: fixed; inset: 0; z-index: 9999; background: #050505; overflow-y: auto; padding: 1.5rem; }
        .swiper { width: 100%; height: 450px; border-radius: 2rem; }
        .swiper-slide img { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body onload="initApp()">

    <div id="dynamicBg" class="fixed inset-0 z-[-1] bg-cover bg-center transition-all duration-1000" style="background-image: url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?q=80&w=2000');"></div>
    <div class="fixed inset-0 z-[-1] bg-black/60"></div>

    <nav class="fixed top-0 w-full z-[100] glass border-b border-white/10 px-8 py-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-amber-500 rounded-xl flex items-center justify-center font-black text-black">RO</div>
            <h1 id="farmTitle" class="text-xl font-black gold-text italic">Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h1>
        </div>
        <button onclick="openAdmin()" class="text-[10px] border border-amber-500/50 text-amber-500 px-4 py-1 rounded-full uppercase tracking-widest">Admin</button>
    </nav>

    <section id="booking" class="pt-32 pb-20 px-6 max-w-4xl mx-auto">
        <div class="text-center mb-10">
            <h2 class="text-4xl font-black gold-text mb-2">Ø§Ø­Ø¬Ø² Ø¹Ø·Ù„ØªÙƒ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h2>
            <p class="text-gray-400 text-sm">Ø£Ø¯Ø®Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</p>
        </div>

        <div class="glass p-8 rounded-[2.5rem] space-y-5 border-t-4 border-amber-600">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                    <label class="text-xs text-amber-500 mr-2">Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†</label>
                    <input type="text" id="guestName" class="w-full bg-black/40 p-4 rounded-2xl border border-white/10 focus:border-amber-500 outline-none" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ">
                </div>
                <div class="space-y-2">
                    <label class="text-xs text-amber-500 mr-2">Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</label>
                    <input type="tel" id="guestPhone" class="w-full bg-black/40 p-4 rounded-2xl border border-white/10 focus:border-amber-500 outline-none" placeholder="07XXXXXXXX">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-2">
                    <label class="text-xs text-amber-500 mr-2">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</label>
                    <input type="date" id="bookDate" class="w-full bg-black/40 p-4 rounded-2xl border border-white/10 outline-none text-white">
                </div>
                <div class="space-y-2">
                    <label class="text-xs text-amber-500 mr-2">ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªÙ…Ø³ÙƒØ§Øª (Ù‡ÙˆÙŠØ©/Ø¬ÙˆØ§Ø²)</label>
                    <div onclick="document.getElementById('idCard').click()" class="w-full bg-amber-500/10 p-4 rounded-2xl border-2 border-dashed border-amber-500/30 text-center cursor-pointer hover:bg-amber-500/20">
                        <span id="uploadLabel" class="text-xs opacity-60">Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©</span>
                        <input type="file" id="idCard" class="hidden" accept="image/*" onchange="handleFileUpload(this)">
                    </div>
                </div>
            </div>

            <button onclick="submitRoyalBooking()" class="w-full bg-amber-500 hover:bg-amber-600 text-black font-black py-5 rounded-2xl text-lg shadow-2xl transition-all flex items-center justify-center gap-3">
                <i data-lucide="send"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø¬Ø² ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙØ§ØµÙŠÙ„
            </button>
        </div>
    </section>

    <section id="gallery" class="py-20 px-6 max-w-6xl mx-auto">
        <h3 class="text-center text-3xl font-black gold-text mb-10 italic">Ø§Ù„ÙƒØªØ§Ù„ÙˆØ¬ Ø§Ù„Ù…Ù„ÙƒÙŠ</h3>
        <div class="swiper mySwiper">
            <div class="swiper-wrapper" id="swiperWrapper"></div>
            <div class="swiper-pagination"></div>
        </div>
    </section>

    <div id="adminPanel" class="admin-modal">
        <div class="max-w-6xl mx-auto">
            <div class="flex justify-between items-center mb-8 border-b border-white/10 pb-4">
                <h2 class="text-2xl font-black gold-text italic">SUPER ADMIN PORTAL</h2>
                <button onclick="closeAdmin()" class="bg-red-600/20 text-red-500 px-6 py-2 rounded-xl border border-red-500/50">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-10">
                <div class="glass p-6 rounded-3xl border-r-4 border-green-500">
                    <p class="text-[10px] text-gray-500 uppercase">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‚Ø¨ÙˆØ¶Ø§Øª (Ø§Ù„Ø¹Ø±Ø¨ÙˆÙ†)</p>
                    <h4 id="finIncome" class="text-2xl font-black text-green-500">0 Ø¯.Ø¹</h4>
                </div>
                <div class="glass p-6 rounded-3xl border-r-4 border-blue-500">
                    <p class="text-[10px] text-gray-500 uppercase">Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</p>
                    <h4 id="resCount" class="text-2xl font-black text-blue-500">0 Ø­Ø¬Ø²</h4>
                </div>
            </div>

            <div class="glass rounded-3xl overflow-hidden">
                <table class="w-full text-right">
                    <thead class="bg-white/5 text-amber-500 text-xs">
                        <tr>
                            <th class="p-4">Ø§Ù„Ø²Ø¨ÙˆÙ†</th>
                            <th class="p-4">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                            <th class="p-4">Ø§Ù„Ù‡ÙˆÙŠØ©</th>
                            <th class="p-4">Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡</th>
                        </tr>
                    </thead>
                    <tbody id="adminTable" class="text-sm"></tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        let config = JSON.parse(localStorage.getItem('royal_config')) || {
            name: "Ø§Ù„Ù…Ø²Ø±Ø¹Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©",
            wa: "9647700000000", // Ø¶Ø¹ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù‡Ù†Ø§
            price: 150000,
            pass: "1122",
            catalog: [
                {url: "https://i.ibb.co/v4S6Y6Q/photo-4.jpg", cat: "pool"},
                {url: "https://i.ibb.co/C0mXm6H/photo-6.jpg", cat: "rooms"}
            ]
        };

        let db = JSON.parse(localStorage.getItem('royal_db')) || [];
        let currentIDBase64 = "";

        function initApp() {
            lucide.createIcons();
            document.getElementById('farmTitle').innerText = config.name;
            renderGallery();
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
        function handleFileUpload(input) {
            const file = input.files[0];
            const reader = new FileReader();
            reader.onloadend = function() {
                currentIDBase64 = reader.result;
                document.getElementById('uploadLabel').innerText = "âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‡ÙˆÙŠØ©";
                document.getElementById('uploadLabel').classList.add('text-green-500');
            }
            if(file) reader.readAsDataURL(file);
        }

        function submitRoyalBooking() {
            const name = document.getElementById('guestName').value;
            const phone = document.getElementById('guestPhone').value;
            const date = document.getElementById('bookDate').value;

            if(!name || !phone || !date || !currentIDBase64) {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ù‡ÙˆÙŠØ©");
                return;
            }

            const newBooking = {
                id: Date.now(),
                name, phone, date,
                idImage: currentIDBase64,
                total: config.price
            };

            db.push(newBooking);
            localStorage.setItem('royal_db', JSON.stringify(db));

            // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø³Ø§Ù„Ø© ÙˆØ§ØªØ³Ø§Ø¨
            const msg = `ğŸ‘‘ Ø­Ø¬Ø² Ù…Ù„ÙƒÙŠ Ø¬Ø¯ÙŠØ¯:\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}\nğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}\nğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${phone}\nğŸ’° Ø§Ù„Ø³Ø¹Ø±: ${config.price} Ø¯.Ø¹\n--- ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ø±Ø¤ÙŠØ© Ø§Ù„Ù‡ÙˆÙŠØ© ---`;
            window.open(`https://wa.me/${config.wa}?text=${encodeURIComponent(msg)}`);
            
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­!");
            location.reload();
        }

        function renderGallery() {
            const wrapper = document.getElementById('swiperWrapper');
            wrapper.innerHTML = config.catalog.map(img => `
                <div class="swiper-slide"><img src="${img.url}" class="rounded-[2rem]"></div>
            `).join('');
            
            new Swiper(".mySwiper", {
                effect: "cards",
                grabCursor: true,
                pagination: { el: ".swiper-pagination" },
            });
        }

        function openAdmin() {
            if(prompt("Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„:") === config.pass) {
                document.getElementById('adminPanel').style.display = 'block';
                renderAdminData();
            }
        }

        function renderAdminData() {
            const table = document.getElementById('adminTable');
            table.innerHTML = db.map(b => `
                <tr class="border-b border-white/5">
                    <td class="p-4 font-bold">${b.name}</td>
                    <td class="p-4 opacity-70">${b.date}</td>
                    <td class="p-4">
                        <button onclick="viewID('${b.idImage}')" class="text-amber-500 underline text-xs">Ø¹Ø±Ø¶ Ø§Ù„Ù‡ÙˆÙŠØ©</button>
                    </td>
                    <td class="p-4">
                        <button onclick="deleteBooking(${b.id})" class="text-red-500 italic">Ø­Ø°Ù</button>
                    </td>
                </tr>
            `).join('');
            
            document.getElementById('finIncome').innerText = (db.length * config.price * 0.5).toLocaleString() + " Ø¯.Ø¹";
            document.getElementById('resCount').innerText = db.length + " Ø­Ø¬Ø²";
        }

        function viewID(base64) {
            const win = window.open();
            win.document.write(`<img src="${base64}" style="max-width:100%">`);
        }

        function deleteBooking(id) {
            if(confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø³Ø¬Ù„ØŸ')) {
                db = db.filter(b => b.id !== id);
                localStorage.setItem('royal_db', JSON.stringify(db));
                renderAdminData();
            }
        }

        function closeAdmin() { document.getElementById('adminPanel').style.display = 'none'; }
    </script>
</body>
</html>
