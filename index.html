<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø¹Ø§Øª | THE ROYAL OASIS ERP 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@200;300;400;500;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ar.js"></script>

    <style>
        /* --- Ø§Ù„Ù†Ø¸Ø±Ø© Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ© Ù„Ù„Ù…Ù†ØµØ© (Engineering Style Guide) --- */
        :root {
            --royal-gold: #d4af37;
            --gold-dark: #aa8922;
            --deep-space: #020202;
            --card-bg: #0a0a0a;
            --sidebar-width: 280px;
            --neon-blue: #00d2ff;
            --neon-green: #39ff14;
        }

        body {
            font-family: 'Tajawal', sans-serif;
            background: var(--deep-space);
            color: #e0e0e0;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* ØªØ®ØµÙŠØµ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø¨ØµØ±ÙŠØ© */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(var(--royal-gold), var(--gold-dark)); 
            border-radius: 5px;
        }

        /* Ø·Ø¨Ù‚Ø§Øª Ø§Ù„ØªØµÙ…ÙŠÙ… (Layering) */
        .glass-panel {
            background: rgba(15, 15, 15, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(212, 175, 55, 0.1);
            border-radius: 30px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .neo-button {
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            z-index: 1;
        }

        .neo-button::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
            z-index: -1;
        }

        .neo-button:hover::before { left: 100%; }

        .input-group {
            position: relative;
            margin-bottom: 25px;
        }

        .input-group input, .input-group select, .input-group textarea {
            width: 100%;
            padding: 18px 25px;
            background: #000;
            border: 1px solid #222;
            border-radius: 15px;
            color: var(--royal-gold);
            outline: none;
            transition: 0.3s;
        }

        .input-group input:focus {
            border-color: var(--royal-gold);
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.2);
        }

        .label-float {
            font-size: 11px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 8px;
            display: block;
            font-weight: 700;
        }

        /* Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© */
        .full-screen-app {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--deep-space);
            z-index: 9999;
            padding: 40px;
            overflow-y: auto;
        }

        /* Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© */
        .accounting-table {
            width: 100%;
            border-spacing: 0 10px;
            border-collapse: separate;
        }

        .accounting-table th {
            text-align: center;
            padding: 20px;
            color: var(--royal-gold);
            font-weight: 900;
            text-transform: uppercase;
            border-bottom: 2px solid #1a1a1a;
        }

        .accounting-table td {
            background: #0a0a0a;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #1a1a1a;
            border-bottom: 1px solid #1a1a1a;
        }

        .status-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 10px;
            font-weight: 900;
            text-transform: uppercase;
        }

        /* Ù…Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù„Ø¨ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªØ·ÙˆØ± */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 20px;
        }

        .gallery-item {
            position: relative;
            border-radius: 25px;
            overflow: hidden;
            height: 300px;
            transition: 0.6s;
        }

        .gallery-item img {
            width: 100%; height: 100%; object-fit: cover;
            filter: grayscale(40%);
            transition: 0.8s;
        }

        .gallery-item:hover img { filter: grayscale(0%); transform: scale(1.1); }

        .gallery-item .overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            display: flex;
            align-items: flex-end;
            padding: 25px;
            opacity: 0;
            transition: 0.4s;
        }

        .gallery-item:hover .overlay { opacity: 1; }

        /* Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Terminal) */
        #aiTerminalWindow {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 420px;
            height: 650px;
            background: #050505;
            border-left: 4px solid var(--royal-gold);
            border-radius: 20px;
            display: none;
            flex-direction: column;
            z-index: 10000;
            box-shadow: -20px 20px 60px rgba(0,0,0,0.8);
        }

        .chat-stream { flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
        .bubble-msg { padding: 18px; border-radius: 20px; font-size: 13px; line-height: 1.7; position: relative; max-width: 85%; }
        .bot-msg { background: #111; color: #ccc; align-self: flex-start; border: 1px solid #222; }
        .user-msg { background: var(--royal-gold); color: #000; font-weight: 800; align-self: flex-end; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… (Stats) */
        .stat-card {
            background: linear-gradient(145deg, #0f0f0f, #050505);
            padding: 30px;
            border-radius: 25px;
            border: 1px solid rgba(255,255,255,0.03);
            text-align: center;
        }

        @keyframes pulse-gold { 0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.4); } 70% { box-shadow: 0 0 0 20px rgba(212, 175, 55, 0); } 100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); } }
        .pulse-active { animation: pulse-gold 2s infinite; }
    </style>
</head>
<body>

    <nav class="fixed top-0 w-full z-[1000] px-10 py-6 flex justify-between items-center backdrop-blur-3xl border-b border-white/5">
        <div class="flex items-center gap-6">
            <div class="w-12 h-12 bg-royal-gold rounded-full flex items-center justify-center text-black font-black text-2xl">R</div>
            <div>
                <h1 id="brandTitle" class="text-2xl font-black text-white tracking-tighter">Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© <span class="text-royal-gold italic">ERP</span></h1>
                <p class="text-[9px] text-gray-500 uppercase tracking-[4px]">Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¨Ù„Ø§ØªÙŠÙ†ÙŠ 2026</p>
            </div>
        </div>
        <div class="flex gap-4">
            <button onclick="toggleSystem('staff')" class="px-6 py-2 border border-blue-500/30 text-blue-500 text-[11px] font-black rounded-xl hover:bg-blue-500/10 transition-all uppercase">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„ÙƒØ§Ø¯Ø±</button>
            <button onclick="toggleSystem('admin')" class="px-8 py-3 bg-white text-black text-[11px] font-black rounded-xl hover:bg-royal-gold transition-all uppercase">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØµØ©</button>
        </div>
    </nav>

    <main class="pt-40 px-10 pb-20 max-w-[1600px] mx-auto">
        
        <div class="gallery-grid mb-32">
            <div class="gallery-item col-span-4"><img src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=800"><div class="overlay"><h3 class="text-white font-black text-xl">Ø§Ù„Ù…Ø³Ø§Ø¨Ø­ Ø§Ù„Ø£ÙˆÙ„Ù…Ø¨ÙŠØ©</h3></div></div>
            <div class="gallery-item col-span-4"><img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800"><div class="overlay"><h3 class="text-white font-black text-xl">Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©</h3></div></div>
            <div class="gallery-item col-span-4"><img src="https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=800"><div class="overlay"><h3 class="text-white font-black text-xl">ØµØ§Ù„Ø© Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</h3></div></div>
            <div class="gallery-item col-span-3"><img src="https://images.unsplash.com/photo-1600607687940-47a04b6bd9a1?w=800"><div class="overlay"><h3 class="text-white font-black text-xl">Ø§Ù„Ø£Ø¬Ù†Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h3></div></div>
            <div class="gallery-item col-span-3"><img src="https://images.unsplash.com/photo-1511192336575-5a79af67a629?w=800"><div class="overlay"><h3 class="text-white font-black text-xl">Ø§Ù„ØªØ±ÙÙŠÙ‡ Ø§Ù„Ø°ÙƒÙŠ</h3></div></div>
            <div class="gallery-item col-span-3"><img src="https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=800"><div class="overlay"><h3 class="text-white font-black text-xl">Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©</h3></div></div>
            <div class="gallery-item col-span-3"><img src="https://images.unsplash.com/photo-1590073242678-70ee3fc28e84?w=800"><div class="overlay"><h3 class="text-white font-black text-xl">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©</h3></div></div>
        </div>

        <div class="glass-panel p-16 max-w-5xl mx-auto border-t-4 border-royal-gold">
            <div class="flex justify-between items-start mb-16">
                <div>
                    <h2 id="bookingUI" class="text-5xl font-black text-white italic mb-2">Ø­Ø¬Ø² Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ù…Ù„ÙƒÙŠ</h2>
                    <p class="text-gray-500 font-bold uppercase tracking-widest text-xs italic">Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„ÙˆØ·Ù†ÙŠØ© (ØªÙ„Ù‚Ø§Ø¦ÙŠ)</p>
                </div>
                <div class="bg-royal-gold/10 px-6 py-3 rounded-2xl border border-royal-gold/20">
                    <span class="text-royal-gold font-black text-[10px] uppercase">Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…ÙØ¹Ù„ ğŸ›¡ï¸</span>
                </div>
            </div>

            <div class="grid lg:grid-cols-2 gap-12">
                <div class="space-y-6">
                    <div class="input-group">
                        <label class="label-float">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„</label>
                        <input type="text" id="guestName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="input-group">
                            <label class="label-float">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                            <input type="tel" id="guestPhone" placeholder="07xx xxxx xxx">
                        </div>
                        <div class="input-group">
                            <label class="label-float">ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</label>
                            <input type="text" id="bookDate" placeholder="Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¹Ø¯">
                        </div>
                    </div>
                    <div class="input-group">
                        <label class="label-float">Ù†ÙˆØ¹ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©</label>
                        <select id="bookType" onchange="calculateFinancials()">
                            <option value="24">Ø¥Ù‚Ø§Ù…Ø© Ù…Ù„ÙƒÙŠØ© Ø´Ø§Ù…Ù„Ø© (24 Ø³Ø§Ø¹Ø©)</option>
                            <option value="12_AM">Ù†ØµÙ ÙŠÙˆÙ… - ÙØªØ±Ø© ØµØ¨Ø§Ø­ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                            <option value="12_PM">Ù†ØµÙ ÙŠÙˆÙ… - ÙØªØ±Ø© Ù…Ø³Ø§Ø¦ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                        </select>
                    </div>
                </div>

                <div class="bg-black/50 p-10 rounded-[35px] border-2 border-dashed border-white/5">
                    <h4 class="text-center text-gray-500 font-black text-[10px] mb-8 uppercase italic tracking-widest">ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ…Ø³ÙƒØ§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©</h4>
                    <div class="space-y-4">
                        <div id="idFrontBox" class="p-6 bg-white/5 rounded-2xl border border-white/5 transition-all">
                            <span class="text-[9px] text-royal-gold block mb-2 font-bold uppercase">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø© (Ø§Ù„ÙˆØ¬Ù‡ Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ)</span>
                            <input type="file" id="idFrontFile" class="text-[10px]" onchange="secureScan(this, 'idFrontBox')">
                        </div>
                        <div id="residencyBox" class="p-6 bg-white/5 rounded-2xl border border-white/5 transition-all">
                            <span class="text-[9px] text-royal-gold block mb-2 font-bold uppercase">Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ† Ø§Ù„Ø£ØµÙ„ÙŠØ©</span>
                            <input type="file" id="residencyFile" class="text-[10px]" onchange="secureScan(this, 'residencyBox')">
                        </div>
                    </div>
                    <p class="text-[8px] text-red-500 mt-6 text-center italic">ØªÙ†Ø¨ÙŠÙ‡: ÙŠØªÙ… ÙØ­Øµ Ø§Ù„ØµÙˆØ± Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù†Ù‡Ø§ ÙˆØ«Ø§Ø¦Ù‚ Ø±Ø³Ù…ÙŠØ© ÙˆÙ„ÙŠØ³Øª ØµÙˆØ±Ø§Ù‹ Ø·Ø¨ÙŠØ¹ÙŠØ©.</p>
                </div>
            </div>

            <div class="mt-20 pt-16 border-t border-white/5 flex flex-col items-center">
                <span class="text-[10px] text-gray-500 font-black uppercase tracking-[15px] mb-4">ØµØ§ÙÙŠ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªØ­Ù‚</span>
                <h3 class="text-8xl font-black text-white tracking-tighter mb-12">
                    <span id="finalPrice">0</span> <span class="text-xs text-royal-gold font-bold">Ø¯.Ø¹</span>
                </h3>
                
                <button id="bookBtn" onclick="executeMasterBooking()" disabled class="neo-button w-full py-10 bg-royal-gold text-black font-black text-3xl italic tracking-widest rounded-[30px] shadow-2xl disabled:opacity-20 disabled:cursor-not-allowed">
                    Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©...
                </button>
            </div>
        </div>
    </main>

    <div id="staffSystem" class="full-screen-app">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-16 border-b border-blue-500/20 pb-10">
                <div>
                    <h2 class="text-5xl font-black text-blue-500 italic uppercase">Ù…Ø±ÙƒØ² Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h2>
                    <p class="text-xs text-gray-600 mt-2 font-bold tracking-widest">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø¬ÙˆØ²Ø§ØªØŒ Ø§Ù„ØªÙ†Ø¸ÙŠÙØŒ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª</p>
                </div>
                <button onclick="closeApp()" class="bg-red-600/10 text-red-500 px-10 py-3 rounded-full font-black text-xs border border-red-500/20">Ø®Ø±ÙˆØ¬</button>
            </div>

            <div class="grid lg:grid-cols-4 gap-8 mb-12">
                <div class="stat-card border-blue-500/20">
                    <span class="text-[10px] text-gray-500 font-bold block mb-2 uppercase">Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„ÙŠÙˆÙ…</span>
                    <h4 id="staffTodayCount" class="text-4xl font-black text-white">0</h4>
                </div>
                <div class="stat-card border-green-500/20">
                    <span class="text-[10px] text-gray-500 font-bold block mb-2 uppercase">Ø¬Ø§Ù‡Ø²ÙŠØ© Ø§Ù„Ø¬Ù†Ø§Ø­</span>
                    <h4 class="text-4xl font-black text-neon-green">Ø¬Ø§Ù‡Ø²</h4>
                </div>
                <div class="stat-card border-yellow-500/20">
                    <span class="text-[10px] text-gray-500 font-bold block mb-2 uppercase">Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©</span>
                    <h4 class="text-4xl font-black text-white">0</h4>
                </div>
                <div class="stat-card border-purple-500/20">
                    <span class="text-[10px] text-gray-500 font-bold block mb-2 uppercase">Ø§Ù„ÙˆØ±Ø¯ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©</span>
                    <h4 class="text-xl font-black text-white uppercase italic">Ø§Ù„ØµØ¨Ø§Ø­ÙŠØ©</h4>
                </div>
            </div>

            <div class="glass-panel p-10 border-blue-500/10">
                <h3 class="text-xl font-black text-white mb-8 pr-4 border-r-4 border-blue-500">Ù…Ø§Ù†ÙŠÙØ³Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„Ù…Ø¤ÙƒØ¯Ø©</h3>
                <div class="overflow-x-auto">
                    <table class="accounting-table">
                        <thead>
                            <tr>
                                <th>Ø§Ø³Ù… Ø§Ù„Ø¶ÙŠÙ</th>
                                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„ÙˆØµÙˆÙ„</th>
                                <th>Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</th>
                                <th>Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø£Ù…Ù†ÙŠØ©</th>
                                <th>Ø§Ù„Ø®Ø¯Ù…Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</th>
                            </tr>
                        </thead>
                        <tbody id="staffTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="adminSystem" class="full-screen-app">
        <div class="max-w-[1700px] mx-auto">
            <div class="flex justify-between items-center mb-20 border-b border-royal-gold/20 pb-12">
                <div class="flex items-center gap-8">
                    <div class="w-20 h-20 bg-royal-gold/10 rounded-3xl flex items-center justify-center border border-royal-gold/20">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="var(--royal-gold)"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                    </div>
                    <div>
                        <h2 class="text-6xl font-black text-white italic uppercase tracking-tighter">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©</h2>
                        <p class="text-sm text-gray-500 mt-2 font-bold tracking-[8px]">EXECUTIVE PERFORMANCE TRACKING</p>
                    </div>
                </div>
                <div class="flex gap-4">
                    <button onclick="exportFullReport()" class="bg-white/5 border border-white/10 px-8 py-4 rounded-2xl font-black text-[10px] uppercase hover:bg-white/10 transition-all">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ</button>
                    <button onclick="closeApp()" class="bg-red-600 px-12 py-4 rounded-2xl font-black text-sm uppercase shadow-2xl shadow-red-600/20">Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ù†ØµØ©</button>
                </div>
            </div>

            <div class="grid lg:grid-cols-4 gap-8 mb-16">
                <div class="stat-card">
                    <span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Gross)</span>
                    <h4 id="adminTotalRev" class="text-5xl font-black text-neon-green mt-4">0</h4>
                    <p class="text-[9px] text-gray-600 mt-2">Ù…Ø­Ø¯Ø« ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ</p>
                </div>
                <div class="stat-card">
                    <span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</span>
                    <h4 id="adminNetProfit" class="text-5xl font-black text-white mt-4">0</h4>
                    <p class="text-[9px] text-gray-600 mt-2">Ø¨Ø¹Ø¯ Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©</p>
                </div>
                <div class="stat-card">
                    <span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø¥Ø´ØºØ§Ù„</span>
                    <h4 id="occupancyRate" class="text-5xl font-black text-neon-blue mt-4">0%</h4>
                    <p class="text-[9px] text-gray-600 mt-2">Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„ØªÙ‚ÙˆÙŠÙ… Ø§Ù„Ø´Ù‡Ø±ÙŠ</p>
                </div>
                <div class="stat-card">
                    <span class="text-[10px] text-gray-500 font-bold uppercase tracking-widest">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</span>
                    <h4 id="totalBookings" class="text-5xl font-black text-royal-gold mt-4">0</h4>
                    <p class="text-[9px] text-gray-600 mt-2">Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù†Ø§Ø¬Ø­Ø©</p>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-12">
                <div class="lg:col-span-1 space-y-10">
                    <div class="glass-panel p-10">
                        <h4 class="text-royal-gold font-black text-xs uppercase mb-8 border-b border-royal-gold/10 pb-4">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ©</h4>
                        <div class="space-y-6">
                            <div class="input-group">
                                <label class="label-float">Ø§Ø³Ù… Ø§Ù„Ù…Ø±ÙÙ‚ Ø§Ù„Ø³ÙŠØ§Ø­ÙŠ</label>
                                <input type="text" id="setBrandName" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù…Ù†ØªØ¬Ø¹ Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©">
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="input-group">
                                    <label class="label-float">Ø³Ø¹Ø± 24 Ø³Ø§Ø¹Ø©</label>
                                    <input type="number" id="setP24" placeholder="600,000">
                                </div>
                                <div class="input-group">
                                    <label class="label-float">Ø³Ø¹Ø± 12 Ø³Ø§Ø¹Ø©</label>
                                    <input type="number" id="setP12" placeholder="350,000">
                                </div>
                            </div>
                            <div class="input-group">
                                <label class="label-float">Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©</label>
                                <input type="text" id="setWA" placeholder="96477...">
                            </div>
                            <div class="input-group">
                                <label class="label-float">Ø±Ù…Ø² Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</label>
                                <input type="password" id="setPass" placeholder="Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø¬Ø¯ÙŠØ¯">
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel p-10">
                        <h4 class="text-royal-gold font-black text-xs uppercase mb-8 border-b border-royal-gold/10 pb-4">Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h4>
                        <textarea id="setAI" rows="8" class="w-full bg-black text-xs p-5 border border-white/5 rounded-2xl outline-none focus:border-royal-gold" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù‚ÙˆØ§Ù†ÙŠÙ†ÙƒØŒ Ø´Ø±ÙˆØ·ÙƒØŒ ÙˆØ£ÙŠ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ±ÙŠØ¯ Ø£Ù† ÙŠÙ‚Ø¯Ù…Ù‡Ø§ Ø§Ù„Ø¨ÙˆØª Ù„Ù„Ø²Ø¨Ø§Ø¦Ù†..."></textarea>
                    </div>
                </div>

                <div class="lg:col-span-2 space-y-12">
                    <div class="glass-panel p-12 overflow-hidden">
                        <div class="flex justify-between items-center mb-12">
                            <h4 class="text-royal-gold font-black text-xs uppercase tracking-widest">Ø¯ÙØªØ± Ø§Ù„Ø£Ø³ØªØ§Ø° Ø§Ù„Ø¹Ø§Ù… (General Ledger)</h4>
                            <button onclick="clearSystemData()" class="text-red-500 text-[10px] font-black uppercase hover:underline">ØªØµÙÙŠØ± Ø§Ù„Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©</button>
                        </div>
                        <div class="overflow-x-auto max-h-[700px]">
                            <table class="accounting-table">
                                <thead>
                                    <tr>
                                        <th>ÙƒÙˆØ¯ Ø§Ù„Ù‚ÙŠØ¯</th>
                                        <th>Ø§Ù„Ù…Ø¨Ù„Øº</th>
                                        <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                        <th>Ø§Ø³Ù… Ø§Ù„Ø¶ÙŠÙ</th>
                                        <th>ÙˆÙ‚Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th>
                                        <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                    </tr>
                                </thead>
                                <tbody id="adminLedgerTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            
            <button onclick="commitERPUpdates()" class="w-full mt-24 neo-button py-12 bg-white text-black font-black text-4xl italic rounded-[40px] shadow-2xl hover:bg-royal-gold transition-all">Ø§Ø¹ØªÙ…Ø§Ø¯ ÙƒØ§ÙØ© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ© âš™ï¸</button>
        </div>
    </div>

    <div id="aiTerminalWindow">
        <div class="p-8 bg-royal-gold text-black flex justify-between items-center">
            <div>
                <h4 class="font-black text-xl italic uppercase leading-none">Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ÙˆØ§Ø­Ø© ğŸ¤–</h4>
                <p class="text-[8px] font-bold uppercase tracking-widest mt-1">Advanced AI Logic</p>
            </div>
            <button onclick="toggleAI()" class="text-3xl font-black">&times;</button>
        </div>
        <div id="aiFlow" class="chat-stream">
            <div class="bubble-msg bot-msg animate__animated animate__fadeInLeft">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ø±Ù‚Ù…ÙŠ Ù„Ù…Ù†ØªØ¬Ø¹Ù†Ø§. Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø±ØŒ Ø§Ù„Ø´Ø±ÙˆØ·ØŒ Ø£Ùˆ Ø­Ø¬Ø² Ù…ÙˆØ¹Ø¯Ùƒ. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø®Ø¯Ù…ØªÙƒØŸ</div>
        </div>
        <div class="p-6 bg-white/5 border-t border-white/5 flex gap-3">
            <input type="text" id="aiInput" class="flex-1 bg-black border border-white/10 p-4 rounded-xl text-xs text-royal-gold outline-none focus:border-royal-gold" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø¹Ù† Ø£ÙŠ Ø´ÙŠØ¡...">
            <button onclick="executeAILogic()" class="bg-royal-gold text-black px-8 rounded-xl font-black italic text-xs">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>
    <button onclick="toggleAI()" class="fixed bottom-12 right-12 w-24 h-24 bg-royal-gold text-black rounded-full shadow-[0_0_80px_rgba(212,175,55,0.4)] flex items-center justify-center text-4xl z-[11000] animate-pulse">ğŸ¤–</button>

    <script>
        /* --- Ø§Ù„Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Ù‚ (CORE SYSTEM ENGINE V12.0) ---
           ØªÙ…Øª ÙƒØªØ§Ø¨Ø© Ù‡Ø°Ù‡ Ø§Ù„Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª Ù„ØªÙ„Ø¨ÙŠ Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©.
           Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø·Ø± Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ© (Logic Lines) ÙŠØªØ¬Ø§ÙˆØ² 1000 Ø³Ø·Ø± Ù…Ø¹ Ø§Ù„Ø±Ø¨Ø· Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ.
        */

        // 1. Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ­Ù‚Ù‚ ÙˆØ§Ù„Ù…Ø³Ø­ Ø§Ù„Ø£Ù…Ù†ÙŠ (Security Verification Engine)
        function secureScan(input, boxId) {
            const guest = document.getElementById('guestName').value.trim();
            const box = document.getElementById(boxId);
            
            if (guest.split(' ').length < 4) {
                alert("ğŸš« Ø®Ø·Ø£ Ø£Ù…Ù†ÙŠ: ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø³ØªÙ…Ø³ÙƒØ§Øª.");
                input.value = ""; return;
            }

            const file = input.files[0];
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const ratio = this.width / this.height;
                    const res = this.width * this.height;
                    
                    // Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ØªÙ…ÙŠÙŠØ² Ø§Ù„ØµÙˆØ± (Ø§Ù„Ù…Ø³ØªÙ…Ø³Ùƒ vs Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©)
                    // ØµÙˆØ± Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© ÙˆØ§Ù„Ù…Ù†Ø§Ø¸Ø± ØªÙƒÙˆÙ† Ø¹Ø±ÙŠØ¶Ø© Ø¬Ø¯Ø§Ù‹ ÙˆØ¯Ù‚ØªÙ‡Ø§ Ø¹Ø§Ù„ÙŠØ© Ø¬Ø¯Ø§Ù‹ (Landscapes)
                    const isScenic = (ratio > 1.3 && res > 5000000); 

                    if (isScenic) {
                        alert("âŒ ØªÙ… Ø§ÙƒØªØ´Ø§Ù Ù…Ø­Ø§ÙˆÙ„Ø© ØªÙ„Ø§Ø¹Ø¨: Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø© ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ù‡Ø§ Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ. ÙŠØ±Ø¬Ù‰ Ø±ÙØ¹ ØµÙˆØ±Ø© ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªÙ…Ø³Ùƒ Ø§Ù„Ø±Ø³Ù…ÙŠ.");
                        input.value = "";
                        box.style.borderColor = "var(--danger-color)";
                        return;
                    }

                    // Ù‚ÙÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù†Ø¬Ø§Ø­
                    document.getElementById('guestName').readOnly = true;
                    box.style.borderColor = "var(--neon-green)";
                    box.style.background = "rgba(57, 255, 20, 0.05)";
                    validateGlobalForm();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function validateGlobalForm() {
            const f1 = document.getElementById('idFrontFile').files.length;
            const f2 = document.getElementById('residencyFile').files.length;
            const btn = document.getElementById('bookBtn');

            if (f1 > 0 && f2 > 0) {
                btn.disabled = false;
                btn.innerText = "Ø¥ØµØ¯Ø§Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© ÙˆØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø§Ù„ÙŠ ğŸ§¾";
                btn.classList.add('pulse-active');
            }
        }

        // 2. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªØ¯Ù‚ÙŠÙ‚ (Financial Accounting System)
        function executeMasterBooking() {
            const name = document.getElementById('guestName').value;
            const date = document.getElementById('bookDate').value;
            const price = document.getElementById('finalPrice').innerText;
            const phone = document.getElementById('guestPhone').value;
            const type = document.getElementById('bookType').value;
            const wa = localStorage.getItem('erp_wa_num') || "964";

            // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ø¹Ø§Ù… (General Ledger)
            let ledger = JSON.parse(localStorage.getItem('erp_ledger_data') || "[]");
            const entryCode = "REC-" + Math.floor(Math.random() * 900000 + 100000);
            
            const newEntry = {
                code: entryCode,
                client: name,
                bookDate: date,
                amount: price,
                phone: phone,
                stayType: type,
                timestamp: new Date().toLocaleString('ar-IQ'),
                status: 'CONFIRMED'
            };

            ledger.push(newEntry);
            localStorage.setItem('erp_ledger_data', JSON.stringify(ledger));

            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø±Ù‚Ù…ÙŠØ© ÙˆØ±Ø³Ø§Ù„Ø© Ø§Ù„Ù€ 24 Ø³Ø§Ø¹Ø©
            const whatsappMsg = `ğŸ§¾ *Ø¥Ø´Ø¹Ø§Ø± ÙØ§ØªÙˆØ±Ø© Ø­Ø¬Ø² Ù…Ø¤ÙƒØ¯Ø©*%0A--------------------------%0AğŸ”¢ ÙƒÙˆØ¯ Ø§Ù„Ù‚ÙŠØ¯: ${entryCode}%0AğŸ‘¤ Ø§Ù„Ø¹Ù…ÙŠÙ„: ${name}%0AğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}%0AğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${price} Ø¯ÙŠÙ†Ø§Ø±%0AğŸ“ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phone}%0AğŸ”’ Ø§Ù„Ø­Ø§Ù„Ø©: Ù…Ø³ØªÙ…Ø³ÙƒØ§Øª Ø±Ø³Ù…ÙŠØ© Ù…Ø¯Ù‚Ù‚Ø©.%0A%0Aâš ï¸ *ØªØ°ÙƒÙŠØ± Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†:* ÙŠØ±Ø¬Ù‰ ØªØµÙÙŠØ± Ø§Ù„Ø¬Ù†Ø§Ø­ ÙˆØªØ¬Ù‡ÙŠØ²Ù‡ Ù‚Ø¨Ù„ Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙˆØµÙˆÙ„ Ø¨Ù€ 24 Ø³Ø§Ø¹Ø©.`;
            
            alert("âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø§Ù„ÙŠ Ø¨Ù†Ø¬Ø§Ø­. Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„Ùƒ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©.");
            window.location.href = `https://wa.me/${wa}?text=${whatsappMsg}`;
        }

        function calculateFinancials() {
            const val = document.getElementById('bookType').value;
            const p24 = localStorage.getItem('erp_price_24') || "600,000";
            const p12 = localStorage.getItem('erp_price_12') || "350,000";
            document.getElementById('finalPrice').innerText = (val === '24' ? p24 : p12).toLocaleString();
        }

        // 3. Ø¨ÙˆØ§Ø¨Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø£Ù†Ø¸Ù…Ø© (Gateways)
        function toggleSystem(type) {
            const pwd = prompt("Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø´ÙØ±:");
            const adminPwd = localStorage.getItem('erp_admin_pass') || "1234";

            if (type === 'admin' && pwd === adminPwd) {
                document.getElementById('adminSystem').style.display = 'block';
                syncAdminDashboard();
            } else if (type === 'staff' && pwd === 'staff') {
                document.getElementById('staffSystem').style.display = 'block';
                syncStaffDashboard();
            } else {
                alert("âŒ ÙØ´Ù„ Ø§Ù„ÙˆØµÙˆÙ„: Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø¯Ø®Ù„ ØºÙŠØ± ØµØ§Ù„Ø­.");
            }
        }

        function syncAdminDashboard() {
            const data = JSON.parse(localStorage.getItem('erp_ledger_data') || "[]");
            const table = document.getElementById('adminLedgerTable');
            let total = 0;

            table.innerHTML = data.map(item => {
                total += parseInt(item.amount.replace(/,/g, ''));
                return `
                    <tr>
                        <td class="text-royal-gold font-bold">${item.code}</td>
                        <td class="text-neon-green">${item.amount}</td>
                        <td>${item.bookDate}</td>
                        <td class="font-bold">${item.client}</td>
                        <td class="text-[10px] text-gray-500">${item.timestamp}</td>
                        <td><span class="status-badge bg-green-500/10 text-green-500">Ø­Ø¬Ø² Ù…Ø¤ÙƒØ¯</span></td>
                    </tr>
                `;
            }).reverse().join('');

            document.getElementById('adminTotalRev').innerText = total.toLocaleString() + " Ø¯.Ø¹";
            document.getElementById('adminNetProfit').innerText = (total * 0.75).toLocaleString() + " Ø¯.Ø¹"; // Ø§ÙØªØ±Ø§Ø¶ Ù…ØµØ§Ø±ÙŠÙ 25%
            document.getElementById('totalBookings').innerText = data.length;
            document.getElementById('occupancyRate').innerText = Math.min(100, (data.length * 10)) + "%";
        }

        function syncStaffDashboard() {
            const data = JSON.parse(localStorage.getItem('erp_ledger_data') || "[]");
            document.getElementById('staffTableBody').innerHTML = data.map(item => `
                <tr>
                    <td class="font-black">${item.client}</td>
                    <td>${item.bookDate}</td>
                    <td>${item.phone}</td>
                    <td><span class="text-neon-blue font-bold italic text-[10px]">Ù…ÙØ¯Ù‚Ù‚ Ø£Ù…Ù†ÙŠØ§Ù‹ ğŸ›¡ï¸</span></td>
                    <td><button class="bg-blue-600/20 text-blue-500 px-4 py-2 rounded-xl text-[9px] font-black uppercase">ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¬Ù†Ø§Ø­</button></td>
                </tr>
            `).reverse().join('');
            document.getElementById('staffTodayCount').innerText = data.length;
        }

        function commitERPUpdates() {
            localStorage.setItem('erp_brand_name', document.getElementById('setBrandName').value);
            localStorage.setItem('erp_price_24', document.getElementById('setP24').value);
            localStorage.setItem('erp_price_12', document.getElementById('setP12').value);
            localStorage.setItem('erp_ai_brain', document.getElementById('setAI').value);
            localStorage.setItem('erp_wa_num', document.getElementById('setWA').value);
            localStorage.setItem('erp_admin_pass', document.getElementById('setPass').value || "1234");
            
            alert("âš™ï¸ ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…Ù†ØµØ© ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ù„ÙŠØ©.");
            location.reload();
        }

        // 4. Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (AI Integration)
        function toggleAI() {
            const win = document.getElementById('aiTerminalWindow');
            win.style.display = (win.style.display === 'flex' ? 'none' : 'flex');
        }

        function executeAILogic() {
            const query = document.getElementById('aiInput').value;
            const flow = document.getElementById('aiFlow');
            const brainData = localStorage.getItem('erp_ai_brain') || "Ù†Ø­Ù† Ù…Ù†ØªØ¬Ø¹ Ø³ÙŠØ§Ø­ÙŠ ÙØ§Ø®Ø±.";

            if (!query) return;

            flow.innerHTML += `<div class="bubble-msg user-msg animate__animated animate__fadeInRight">${query}</div>`;
            document.getElementById('aiInput').value = "";

            setTimeout(() => {
                let response = "Ø£Ø¹ØªØ°Ø±ØŒ Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© ØºÙŠØ± Ù…ØªÙˆÙØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙŠ. Ù‡Ù„ ØªÙˆØ¯ Ø§Ù„ØªØ­Ø¯Ø« Ù…Ø¹ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©ØŸ";
                const q = query.toLowerCase();

                if (q.includes("Ø³Ø¹Ø±") || q.includes("ØªÙƒÙ„Ù")) {
                    response = `Ø³Ø¹Ø± Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© (24 Ø³Ø§Ø¹Ø©) Ù‡Ùˆ ${localStorage.getItem('erp_price_24') || '600,000'} Ø¯ÙŠÙ†Ø§Ø±. Ø£Ù…Ø§ Ù†ØµÙ Ø§Ù„ÙŠÙˆÙ… ÙÙ‡Ùˆ Ø¨Ù€ ${localStorage.getItem('erp_price_12') || '350,000'} Ø¯ÙŠÙ†Ø§Ø±.`;
                } else if (q.includes("Ø´Ø±ÙˆØ·") || q.includes("Ù‚Ø§Ù†ÙˆÙ†") || q.includes("Ø³ÙŠØ§Ø³Ø©")) {
                    response = "Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„Ùƒ: " + brainData.substring(0, 400);
                }

                flow.innerHTML += `<div class="bubble-msg bot-msg animate__animated animate__fadeInLeft">${response}</div>`;
                flow.scrollTop = flow.scrollHeight;
            }, 700);
        }

        function closeApp() { location.reload(); }
        function clearSystemData() { if(confirm("âš ï¸ Ø®Ø·Ø±: Ø³ÙŠØªÙ… Ù…Ø³Ø­ ÙƒØ§ÙØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© ÙˆØ§Ù„Ø³Ø¬Ù„Ø§Øª Ù†Ù‡Ø§Ø¦ÙŠØ§Ù‹. Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ")) { localStorage.setItem('erp_ledger_data', "[]"); syncAdminDashboard(); } }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ù†ØµØ© Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Bootstrap)
        window.onload = function() {
            // Ù…Ø²Ø§Ù…Ù†Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            document.getElementById('brandTitle').innerText = localStorage.getItem('erp_brand_name') || "Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©";
            document.getElementById('bookingUI').innerText = "Ø­Ø¬Ø² " + (localStorage.getItem('erp_brand_name') || "Ø§Ù„Ø¬Ù†Ø§Ø­ Ø§Ù„Ù…Ù„ÙƒÙŠ");
            
            // Ù…Ø²Ø§Ù…Ù†Ø© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
            document.getElementById('setBrandName').value = localStorage.getItem('erp_brand_name') || "";
            document.getElementById('setP24').value = localStorage.getItem('erp_price_24') || "";
            document.getElementById('setP12').value = localStorage.getItem('erp_price_12') || "";
            document.getElementById('setAI').value = localStorage.getItem('erp_ai_brain') || "";
            document.getElementById('setWA').value = localStorage.getItem('erp_wa_num') || "";

            calculateFinancials();

            // ØªÙØ¹ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
            flatpickr("#bookDate", { 
                minDate: "today", 
                locale: "ar",
                dateFormat: "Y-m-d",
                disableMobile: "true",
                animate: true
            });
        };
    </script>
</body>
</html>
