<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØªØ¬Ø¹ Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ© | Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù… 2026</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <style>
        :root { 
            --gold: #c5a059; 
            --gold-light: #e2c285;
            --dark-deep: #050505; 
            --dark-card: #0d0d0d;
            --success: #22c55e;
            --danger: #ef4444;
        }

        body { 
            font-family: 'Tajawal', sans-serif; 
            background: var(--dark-deep); 
            color: white; 
            overflow-x: hidden;
            user-select: none;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--dark-deep); }
        ::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 10px; }

        .glass-container {
            background: rgba(255, 255, 255, 0.01);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(197, 160, 89, 0.15);
            border-radius: 45px;
            box-shadow: 0 40px 100px rgba(0,0,0,0.8);
        }

        .main-hero-bg {
            position: fixed;
            inset: 0;
            z-index: -2;
            background-size: cover;
            background-position: center;
            filter: brightness(0.15) scale(1.1);
            transition: transform 2s ease, filter 1s ease;
        }

        .royal-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .gallery-card {
            position: relative;
            height: 300px;
            border-radius: 35px;
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .gallery-card:hover {
            transform: translateY(-15px);
            border-color: var(--gold);
        }

        .gallery-card img { width: 100%; height: 100%; object-fit: cover; transition: 1s; }
        .gallery-card:hover img { transform: scale(1.1); }

        .card-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(0deg, rgba(0,0,0,0.95) 0%, transparent 60%);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 30px;
        }

        #aiTerminal {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 380px;
            height: 550px;
            background: var(--dark-card);
            border: 1px solid var(--gold);
            border-radius: 40px;
            z-index: 1000;
            display: none;
            flex-direction: column;
        }

        .chat-area { flex: 1; padding: 25px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .bubble { padding: 15px 20px; border-radius: 25px; font-size: 14px; animation: fadeInUp 0.4s; }
        .bubble-bot { background: #151515; border: 1px solid #222; align-self: flex-start; }
        .bubble-user { background: var(--gold); color: black; font-weight: bold; align-self: flex-end; }

        .admin-os, .staff-os {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--dark-deep);
            z-index: 99999;
            padding: 50px;
            overflow-y: auto;
        }

        .data-table { width: 100%; border-spacing: 0 10px; border-collapse: separate; }
        .data-table th { color: var(--gold); padding: 20px; font-weight: 900; }
        .data-table td { background: var(--dark-card); padding: 20px; text-align: center; border-top: 1px solid #1a1a1a; }

        .royal-input {
            background: #000 !important;
            border: 1.5px solid #222 !important;
            color: var(--gold) !important;
            padding: 18px 25px;
            border-radius: 20px;
            width: 100%;
            outline: none;
        }

        .btn-prime {
            background: var(--gold);
            color: black;
            font-weight: 900;
            padding: 20px 40px;
            border-radius: 25px;
            cursor: pointer;
            transition: 0.3s;
        }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="heroBg" class="main-hero-bg" style="background-image: url('https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?w=1600')"></div>

    <nav class="fixed top-0 w-full z-[100] px-10 py-8 flex justify-between items-center backdrop-blur-md border-b border-white/5">
        <div class="flex flex-col">
            <h1 id="uiBrandName" class="text-3xl font-ultra text-gold italic tracking-tighter">Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h1>
            <span class="text-[9px] text-gray-500 tracking-[5px] uppercase">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø¹ Ø§Ù„Ø°ÙƒÙŠØ©</span>
        </div>
        
        <div class="flex gap-4">
            <button onclick="loginGate('staff')" class="px-5 py-2 border border-blue-500/30 text-blue-500 rounded-full text-[12px] font-bold hover:bg-blue-500 hover:text-white transition-all">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</button>
            <button onclick="loginGate('admin')" class="btn-prime !py-2 !px-8 text-[12px]">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</button>
        </div>
    </nav>

    <div class="pt-40 px-10 max-w-[1600px] mx-auto pb-40">
        
        <div class="royal-gallery mb-32">
            <div class="gallery-card"><img src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ù…Ø³Ø§Ø¨Ø­ Ø§Ù„Ø£ÙˆÙ„Ù…Ø¨ÙŠØ©</h3></div></div>
            <div class="gallery-card"><img src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©</h3></div></div>
            <div class="gallery-card"><img src="https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">ØµØ§Ù„Ø© Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</h3></div></div>
            <div class="gallery-card"><img src="https://images.unsplash.com/photo-1600607687940-47a04b6bd9a1?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ø£Ø¬Ù†Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h3></div></div>
            <div class="gallery-card"><img src="https://images.unsplash.com/photo-1511192336575-5a79af67a629?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„ØªØ±ÙÙŠÙ‡ Ø§Ù„Ø°ÙƒÙŠ</h3></div></div>
            <div class="gallery-card"><img src="https://images.unsplash.com/photo-1585320806297-9794b3e4eeae?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©</h3></div></div>
            <div class="gallery-card"><img src="https://images.unsplash.com/photo-1590073242678-70ee3fc28e84?w=800"><div class="card-overlay"><h3 class="text-xl font-black text-gold">Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©</h3></div></div>
        </div>

        <div class="max-w-5xl mx-auto glass-container p-16 relative">
            <h2 id="uiBookingTitle" class="text-5xl font-ultra text-gold italic mb-3">ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„ÙˆØ«Ø§Ø¦Ù‚</h2>
            <p class="text-xs text-gray-500 uppercase tracking-widest font-bold mb-12 italic">Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ Ø§Ù„Ø°ÙƒÙŠ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©</p>

            <div class="grid md:grid-cols-2 gap-10">
                <div class="md:col-span-2 space-y-2">
                    <label class="text-[10px] text-gold font-black uppercase tracking-widest mr-4">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ (Ù…Ø·Ø§Ø¨Ù‚ Ù„Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©)</label>
                    <input type="text" id="coreFullName" class="royal-input text-2xl" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„">
                </div>

                <div class="space-y-6">
                    <input type="tel" id="corePhone" class="royal-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                    <input type="text" id="coreDate" class="royal-input" placeholder="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²">
                    <select id="coreDuration" class="royal-input" onchange="recalculatePrice()">
                        <option value="24">Ø¥Ù‚Ø§Ù…Ø© ÙƒØ§Ù…Ù„Ø© (24 Ø³Ø§Ø¹Ø©)</option>
                        <option value="12_AM">ÙØªØ±Ø© ØµØ¨Ø§Ø­ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                        <option value="12_PM">ÙØªØ±Ø© Ù…Ø³Ø§Ø¦ÙŠØ© (12 Ø³Ø§Ø¹Ø©)</option>
                    </select>
                </div>

                <div class="bg-red-500/5 p-8 rounded-[40px] border border-dashed border-red-500/20">
                    <h5 class="text-[10px] text-red-500 font-black mb-6 uppercase text-center tracking-widest italic">Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ ğŸ›¡ï¸</h5>
                    <div id="uiIdBox" class="bg-black/40 p-5 rounded-2xl border border-white/5 mb-4 transition-all">
                        <span class="block text-[8px] text-gray-500 mb-2 uppercase">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©</span>
                        <input type="file" id="coreIdFile" onchange="advancedCyberCheck(this, 'uiIdBox')">
                    </div>
                    <div id="uiResBox" class="bg-black/40 p-5 rounded-2xl border border-white/5 transition-all">
                        <span class="block text-[8px] text-gray-500 mb-2 uppercase">Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ†</span>
                        <input type="file" id="coreResFile" onchange="advancedCyberCheck(this, 'uiResBox')">
                    </div>
                </div>
            </div>

            <div class="mt-16 pt-10 border-t border-white/5 flex flex-col items-center">
                <p class="text-[10px] text-gray-500 uppercase tracking-[10px] mb-4">Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø©</p>
                <h4 class="text-6xl font-ultra text-gold tracking-tighter"><span id="uiFinalPrice">0</span> <span class="text-xs">Ø¯.Ø¹</span></h4>
                <button id="masterBookingBtn" onclick="dispatchFinalBooking()" disabled class="btn-prime w-full mt-10 !py-8 text-2xl">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø£Ù…Ù†ÙŠ...</button>
            </div>
        </div>
    </div>

    <div id="aiTerminal">
        <div class="p-6 bg-gold text-black flex justify-between items-center">
            <span class="font-black text-lg italic">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ ğŸ¤–</span>
            <button onclick="toggleBot()" class="text-2xl font-black">&times;</button>
        </div>
        <div id="chatHistory" class="chat-area"></div>
        <div class="p-5 bg-white/5 flex gap-2 border-t border-white/5">
            <input type="text" id="aiQuery" class="!p-3 text-xs !rounded-xl" placeholder="Ø§Ø³Ø£Ù„ Ø¹Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø£Ùˆ Ø§Ù„Ø®Ø¯Ù…Ø§Øª...">
            <button onclick="handleAIRequest()" class="bg-gold text-black px-4 rounded-xl font-bold italic">Ø¥Ø±Ø³Ø§Ù„</button>
        </div>
    </div>

    <div id="staffPortal" class="staff-os">
        <div class="max-w-[1400px] mx-auto">
            <div class="flex justify-between items-center mb-16 border-b border-blue-500/30 pb-8">
                <h2 class="text-4xl font-ultra text-blue-500 italic">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h2>
                <button onclick="exitSystems()" class="bg-red-600/20 text-red-500 border border-red-500/20 px-10 py-3 rounded-full font-black text-xs">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©</button>
            </div>
            <div class="glass-container p-10 border-blue-500/20">
                <h3 class="text-xl font-black mb-8 border-r-4 border-blue-500 pr-4 italic">Ø³Ø¬Ù„ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠ</h3>
                <div class="overflow-x-auto">
                    <table class="data-table">
                        <thead>
                            <tr><th>Ø§Ø³Ù… Ø§Ù„Ø¶ÙŠÙ</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</th><th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th><th>Ø§Ù„ØªØ­Ù‚Ù‚</th></tr>
                        </thead>
                        <tbody id="staffLogBody"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="adminPortal" class="admin-os">
        <div class="max-w-[1400px] mx-auto">
            <div class="flex justify-between items-center mb-16 border-b border-gold/30 pb-8">
                <h2 class="text-4xl font-ultra text-gold italic">Ù…Ø±ÙƒØ² Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© ÙˆØ§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</h2>
                <div class="flex gap-4">
                    <button onclick="exportFinancials()" class="bg-gray-800 px-6 py-3 rounded-full text-[10px] font-bold italic">ØªØµØ¯ÙŠØ± Ø§Ù„ÙƒØ´Ù Ø§Ù„Ù…Ø§Ù„ÙŠ</button>
                    <button onclick="exitSystems()" class="bg-red-600 px-10 py-3 rounded-full font-black text-xs shadow-lg shadow-red-600/20">Ø®Ø±ÙˆØ¬ Ø¢Ù…Ù†</button>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-10">
                <div class="lg:col-span-1 space-y-10">
                    <div class="glass-container p-8">
                        <h4 class="text-gold font-black mb-6 underline text-[10px] tracking-widest uppercase">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
                        <div class="space-y-4">
                            <input type="text" id="setBrand" class="royal-input text-xs" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø©">
                            <input type="text" id="setHeroTitle" class="royal-input text-xs" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ">
                            <div class="grid grid-cols-2 gap-2">
                                <input type="number" id="setP24" class="royal-input text-xs" placeholder="Ø³Ø¹Ø± 24 Ø³Ø§Ø¹Ø©">
                                <input type="number" id="setP12" class="royal-input text-xs" placeholder="Ø³Ø¹Ø± 12 Ø³Ø§Ø¹Ø©">
                            </div>
                            <input type="text" id="setWA" class="royal-input text-xs" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">
                            <input type="password" id="setNewPass" class="royal-input text-xs" placeholder="ØªØºÙŠÙŠØ± Ø±Ù…Ø² Ø§Ù„Ù…Ø¯ÙŠØ±">
                        </div>
                    </div>
                    <div class="glass-container p-8">
                        <h4 class="text-gold font-black mb-6 underline text-[10px] uppercase italic">ØªØºØ°ÙŠØ© Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¢Ù„ÙŠ</h4>
                        <textarea id="setAI" rows="6" class="royal-input text-[11px] leading-relaxed" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ù‚ÙˆØ§Ù†ÙŠÙ†Ùƒ Ù„ÙŠØ­ÙØ¸Ù‡Ø§ Ø§Ù„Ø¨ÙˆØª ÙˆÙŠØ¬ÙŠØ¨ Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†..."></textarea>
                    </div>
                </div>

                <div class="lg:col-span-2 space-y-10">
                    <div class="grid grid-cols-3 gap-6">
                        <div class="glass-container p-8 border-success/20 text-center">
                            <span class="text-[9px] text-gray-500 uppercase font-black tracking-widest">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</span>
                            <h3 id="uiTotalRevenue" class="text-3xl font-ultra text-success mt-2">0</h3>
                        </div>
                        <div class="glass-container p-8 border-blue-500/20 text-center">
                            <span class="text-[9px] text-gray-500 uppercase font-black tracking-widest">Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</span>
                            <h3 id="uiTotalCount" class="text-3xl font-ultra text-blue-500 mt-2">0</h3>
                        </div>
                        <div class="glass-container p-8 border-danger/20 text-center cursor-pointer" onclick="resetFinance()">
                            <span class="text-[9px] text-danger uppercase font-black tracking-widest">ØªØµÙÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…</span>
                            <h3 class="text-lg font-ultra text-white mt-2 italic">Ù…Ø³Ø­ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                        </div>
                    </div>

                    <div class="glass-container p-10 overflow-hidden">
                        <h4 class="text-gold font-black mb-8 underline text-[10px] uppercase">Ø³Ø¬Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„</h4>
                        <div class="overflow-x-auto max-h-[500px]">
                            <table class="data-table">
                                <thead>
                                    <tr><th>Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</th><th>Ø§Ù„Ù…Ø¨Ù„Øº</th><th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²</th><th>ÙˆÙ‚Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„</th></tr>
                                </thead>
                                <tbody id="adminMasterBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <button onclick="commitMasterChanges()" class="w-full mt-20 btn-prime !py-10 text-3xl italic tracking-widest">Ø§Ø¹ØªÙ…Ø§Ø¯ ÙƒØ§ÙØ© Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø£Ù…Ù†ÙŠØ© ÙˆØ§Ù„Ù…Ø§Ù„ÙŠØ© âš™ï¸</button>
        </div>
    </div>

    <script>
        function advancedCyberCheck(input, boxId) {
            const fullName = document.getElementById('coreFullName').value.trim();
            if (fullName.split(' ').length < 4) {
                alert("ğŸ›‘ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ Ø£ÙˆÙ„Ø§Ù‹.");
                input.value = ""; return;
            }
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const ratio = this.width / this.height;
                    if (this.width > 3500 && ratio > 1.2) {
                        alert("âŒ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙÙˆØ¹Ø© Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙ„ÙŠØ³Øª Ù…Ø³ØªÙ…Ø³ÙƒØ§Ù‹!");
                        input.value = ""; return;
                    }
                    document.getElementById('coreFullName').readOnly = true;
                    document.getElementById(boxId).style.borderColor = "var(--success)";
                    evaluateMasterButton();
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        }

        function evaluateMasterButton() {
            const f1 = document.getElementById('coreIdFile').files.length;
            const f2 = document.getElementById('coreResFile').files.length;
            const btn = document.getElementById('masterBookingBtn');
            if (f1 > 0 && f2 > 0) {
                btn.disabled = false;
                btn.innerText = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ğŸ§¾";
                btn.className = "btn-prime w-full mt-10 !py-8 text-2xl animate__animated animate__pulse animate__infinite";
            }
        }

        function dispatchFinalBooking() {
            const name = document.getElementById('coreFullName').value;
            const date = document.getElementById('coreDate').value;
            const price = document.getElementById('uiFinalPrice').innerText;
            const phone = document.getElementById('corePhone').value;
            let ledger = JSON.parse(localStorage.getItem('master_ledger') || "[]");
            ledger.push({ id: "TXN-"+Math.floor(Math.random()*999), guest: name, date, amount: price, phone, recorded: new Date().toLocaleString('ar-IQ') });
            localStorage.setItem('master_ledger', JSON.stringify(ledger));
            const msg = `ğŸ§¾ *ÙØ§ØªÙˆØ±Ø© Ø­Ø¬Ø² Ø±Ù‚Ù…ÙŠØ©*%0AğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}%0AğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}%0AğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${price} Ø¯.Ø¹%0Aâš ï¸ ØªØ°ÙƒÙŠØ± Ø§Ù„Ù†Ø¸Ø§Ù…: Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø©.`;
            window.location.href = `https://wa.me/${localStorage.getItem('sys_wa') || '964'}?text=${msg}`;
        }

        function loginGate(target) {
            const pwd = prompt("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ù„Ù„Ø¯Ø®ÙˆÙ„:");
            if (target === 'admin' && pwd === (localStorage.getItem('sys_admin_pass') || "1234")) {
                document.getElementById('adminPortal').style.display = 'block';
                syncAdminDashboard();
            } else if (target === 'staff' && pwd === 'staff') {
                document.getElementById('staffPortal').style.display = 'block';
                syncStaffDashboard();
            } else { alert("âŒ Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­!"); }
        }

        function syncAdminDashboard() {
            const ledger = JSON.parse(localStorage.getItem('master_ledger') || "[]");
            let total = 0;
            document.getElementById('adminMasterBody').innerHTML = ledger.map(i => {
                total += parseInt(i.amount.replace(/,/g, ''));
                return `<tr><td>${i.id}</td><td>${i.amount}</td><td>${i.date}</td><td>${i.recorded}</td></tr>`;
            }).reverse().join('');
            document.getElementById('uiTotalRevenue').innerText = total.toLocaleString() + " Ø¯.Ø¹";
            document.getElementById('uiTotalCount').innerText = ledger.length;
        }

        function syncStaffDashboard() {
            const ledger = JSON.parse(localStorage.getItem('master_ledger') || "[]");
            document.getElementById('staffLogBody').innerHTML = ledger.map(i => `<tr><td>${i.guest}</td><td>${i.date}</td><td>${i.phone}</td><td class="text-success">Ù…Ø¤ÙƒØ¯ âœ…</td><td class="text-blue-500 italic">ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ ğŸ›¡ï¸</td></tr>`).reverse().join('');
        }

        function commitMasterChanges() {
            localStorage.setItem('sys_brand', document.getElementById('setBrand').value);
            localStorage.setItem('sys_hero_title', document.getElementById('setHeroTitle').value);
            localStorage.setItem('sys_p24', document.getElementById('setP24').value);
            localStorage.setItem('sys_p12', document.getElementById('setP12').value);
            localStorage.setItem('ai_brain_data', document.getElementById('setAI').value);
            localStorage.setItem('sys_wa', document.getElementById('setWA').value);
            localStorage.setItem('sys_admin_pass', document.getElementById('setNewPass').value || "1234");
            location.reload();
        }

        function toggleBot() { 
            const t = document.getElementById('aiTerminal');
            t.style.display = t.style.display === 'flex' ? 'none' : 'flex';
        }

        function handleAIRequest() {
            const q = document.getElementById('aiQuery').value;
            if(!q) return;
            const chat = document.getElementById('chatHistory');
            chat.innerHTML += `<div class="bubble bubble-user">${q}</div>`;
            setTimeout(() => {
                let res = "Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø£Ùˆ Ø§Ù„Ø®Ø¯Ù…Ø§Øª.";
                if(q.includes("Ø³Ø¹Ø±")) res = "Ø³Ø¹Ø± Ø§Ù„Ù€ 24 Ø³Ø§Ø¹Ø© Ù‡Ùˆ " + (localStorage.getItem('sys_p24') || "600,000") + " Ø¯ÙŠÙ†Ø§Ø±.";
                chat.innerHTML += `<div class="bubble bubble-bot">${res}</div>`;
                chat.scrollTop = chat.scrollHeight;
            }, 600);
            document.getElementById('aiQuery').value = "";
        }

        function recalculatePrice() {
            const d = document.getElementById('coreDuration').value;
            document.getElementById('uiFinalPrice').innerText = (d === '24' ? (localStorage.getItem('sys_p24') || "600,000") : (localStorage.getItem('sys_p12') || "350,000"));
        }

        function exitSystems() { location.reload(); }
        window.onload = function() {
            document.getElementById('uiBrandName').innerText = localStorage.getItem('sys_brand') || "Ø§Ù„ÙˆØ§Ø­Ø© Ø§Ù„Ù…Ù„ÙƒÙŠØ©";
            document.getElementById('uiBookingTitle').innerText = localStorage.getItem('sys_hero_title') || "ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„ÙˆØ«Ø§Ø¦Ù‚";
            document.getElementById('setBrand').value = localStorage.getItem('sys_brand') || "";
            document.getElementById('setHeroTitle').value = localStorage.getItem('sys_hero_title') || "";
            document.getElementById('setP24').value = localStorage.getItem('sys_p24') || "";
            document.getElementById('setP12').value = localStorage.getItem('sys_p12') || "";
            document.getElementById('setAI').value = localStorage.getItem('ai_brain_data') || "";
            document.getElementById('setWA').value = localStorage.getItem('sys_wa') || "";
            recalculatePrice();
            flatpickr("#coreDate", { minDate: "today", locale: "ar" });
        };
    </script>
</body>
</html>
