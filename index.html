<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Royal Oasis | AI Integrated System</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <style>
        :root { --gold: #c5a059; --dark: #050505; }
        body { font-family: 'Tajawal', sans-serif; background: var(--dark); color: white; overflow-x: hidden; }
        .font-ultra { font-weight: 900 !important; text-shadow: 3px 3px 15px #000; }
        
        /* ØªØµÙ…ÙŠÙ… Ù„ÙˆØ­Ø© Ø§Ù„Ø­Ø¬Ø² Ø§Ù„Ø²Ø¬Ø§Ø¬ÙŠ */
        .booking-glass {
            background: rgba(255, 255, 255, 0.02); backdrop-filter: blur(25px);
            border: 2px solid rgba(197, 160, 89, 0.3); border-radius: 50px; padding: 40px;
        }

        /* Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ (AI Bot UI) */
        #aiBot {
            position: fixed; bottom: 20px; left: 20px; width: 300px; height: 400px;
            background: #111; border: 2px solid var(--gold); border-radius: 20px;
            display: none; flex-direction: column; z-index: 1000; overflow: hidden;
            box-shadow: 0 0 30px rgba(197, 160, 89, 0.2);
        }
        .ai-header { background: var(--gold); color: black; padding: 10px; font-weight: bold; display: flex; justify-content: space-between; }
        #aiMessages { flex: 1; padding: 10px; overflow-y: auto; font-size: 12px; display: flex; flex-direction: column; gap: 8px; }
        .msg-ai { background: #222; padding: 8px; border-radius: 10px; border-right: 3px solid var(--gold); align-self: flex-start; }
        .msg-user { background: var(--gold); color: black; padding: 8px; border-radius: 10px; align-self: flex-end; }

        .main-bg { position: fixed; inset: 0; z-index: -2; background-size: cover; background-position: center; filter: brightness(0.3); }
        input, select, textarea { background: #000 !important; border: 1px solid #333 !important; color: var(--gold) !important; padding: 12px; border-radius: 12px; width: 100%; outline: none; }
        #adminOS { display: none; position: fixed; inset: 0; z-index: 9999; background: #080808; padding: 30px; border: 4px solid var(--gold); overflow-y: auto; }
    </style>
</head>
<body>

    <div id="heroBg" class="main-bg" style="background-image: url('https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?w=1600')"></div>

    <nav class="fixed top-0 w-full z-50 p-6 flex justify-between items-center backdrop-blur-md border-b border-white/5">
        <h1 id="farmTitle" class="text-2xl font-ultra text-gold italic">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h1>
        <button onclick="openAdmin()" class="bg-gold text-black px-6 py-2 rounded-full font-black text-xs uppercase">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</button>
    </nav>

    <div class="pt-32 px-6 max-w-7xl mx-auto">
        <div class="grid md:grid-cols-3 gap-8 mb-12">
            <div class="booking-glass text-center cursor-pointer" onclick="alert('Ø£Ù„Ø¨ÙˆÙ… Ø§Ù„Ù…Ø³Ø¨Ø­')">ğŸŠâ€â™‚ï¸ Ø§Ù„Ù…Ø³Ø¨Ø­</div>
            <div class="booking-glass text-center cursor-pointer" onclick="alert('Ø£Ù„Ø¨ÙˆÙ… Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨')">âš½ Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨</div>
            <div class="booking-glass text-center cursor-pointer" onclick="alert('Ø£Ù„Ø¨ÙˆÙ… Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ')">ğŸ± Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</div>
        </div>

        <div class="max-w-4xl mx-auto booking-glass mb-20">
            <h3 id="txt_bookingTitle" class="text-3xl font-ultra text-gold text-center mb-8 italic">ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„ØªØ¯Ù‚ÙŠÙ‚</h3>
            <div class="space-y-4">
                <input type="text" id="custName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„">
                <div class="grid grid-cols-2 gap-4">
                    <input type="tel" id="custPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                    <input type="text" id="bookDate" placeholder="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="p-4 border border-dashed border-gray-600 rounded-2xl text-center">
                        <span class="text-[9px]">Ø§Ù„Ù‡ÙˆÙŠØ©</span><input type="file" id="fId" onchange="smartValidate(this, 'fId')">
                    </div>
                    <div class="p-4 border border-dashed border-gray-600 rounded-2xl text-center">
                        <span class="text-[9px]">Ø§Ù„Ø³ÙƒÙ†</span><input type="file" id="fRes" onchange="smartValidate(this, 'fRes')">
                    </div>
                </div>
                <button id="mainBtn" onclick="issueInvoice()" disabled class="w-full py-4 bg-gray-800 rounded-2xl font-bold opacity-30">Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚...</button>
            </div>
        </div>
    </div>

    <div id="aiBot">
        <div class="ai-header">
            <span>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ ğŸ¤–</span>
            <button onclick="toggleBot()">Ã—</button>
        </div>
        <div id="aiMessages">
            <div class="msg-ai">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±. ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ØŸ</div>
        </div>
        <div class="p-2 border-t border-gray-800 flex gap-1">
            <input type="text" id="botInput" class="!p-2 text-xs" placeholder="Ø§Ø³Ø£Ù„Ù†ÙŠ Ø£ÙŠ Ø´ÙŠØ¡...">
            <button onclick="askBot()" class="bg-gold text-black px-3 rounded-xl font-bold">Ø§Ø±Ø³Ù„</button>
        </div>
    </div>
    <button onclick="toggleBot()" class="fixed bottom-5 left-5 bg-gold text-black w-14 h-14 rounded-full shadow-2xl font-black text-2xl z-50">ØŸ</button>

    <div id="adminOS">
        <div class="max-w-6xl mx-auto pb-20">
            <div class="flex justify-between items-center border-b-2 border-gold pb-6 mb-10">
                <h2 class="text-3xl font-ultra text-gold">Ù…Ø±ÙƒØ² Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø£Ø¹Ù„Ù‰</h2>
                <button onclick="closeAdmin()" class="bg-red-600 px-8 py-2 rounded-full">Ø®Ø±ÙˆØ¬</button>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4">ğŸ§  ØªØºØ°ÙŠØ© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ</h4>
                    <p class="text-[10px] text-gray-400 mb-2">Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªÙŠ Ø³ÙŠØ³ØªØ®Ø¯Ù…Ù‡Ø§ Ø§Ù„Ø¨ÙˆØª Ù„Ù„Ø±Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø¨Ø§Ø¦Ù†:</p>
                    <textarea id="admBotData" rows="5" placeholder="Ù…Ø«Ø§Ù„: ÙˆÙ‚Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø³Ø§Ø¹Ø© 2 Ø¸Ù‡Ø±Ø§Ù‹ØŒ Ù…Ø³Ø¨Ø­Ù†Ø§ Ù…Ø¯ÙØ£ØŒ ÙŠÙˆØ¬Ø¯ Ø­Ø§Ø±Ø³ Ø£Ù…Ù†..."></textarea>
                </div>

                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4">ğŸ’° Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙˆØ§Ù„ÙˆØ§ØªØ³Ø§Ø¨</h4>
                    <input type="number" id="admP24" placeholder="Ø³Ø¹Ø± 24 Ø³Ø§Ø¹Ø©" class="mb-2">
                    <input type="text" id="admWA" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨">
                </div>

                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4">ğŸ”’ Ø§Ù„Ø£Ù…Ø§Ù†</h4>
                    <input type="password" id="admPass" placeholder="ØªØºÙŠÙŠØ± Ø¨Ø§Ø³ÙˆØ±Ø¯ Ø§Ù„Ù…Ø¯ÙŠØ±">
                </div>
                
                <div class="admin-card">
                    <h4 class="text-gold font-bold mb-4">ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h4>
                    <button onclick="genReport()" class="w-full bg-blue-600 py-3 rounded-xl font-bold">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ</button>
                </div>
            </div>
            <button onclick="saveAll()" class="w-full mt-10 bg-green-600 py-5 rounded-3xl font-black text-xl">Ø­ÙØ¸ ÙƒØ§ÙØ© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ© âœ…</button>
        </div>
    </div>

    <script>
        // --- Ù…Ø­Ø±Ùƒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ø§Ù„Ù…Ø¬ÙŠØ¨ Ø§Ù„Ø¢Ù„ÙŠ) ---
        function toggleBot() { 
            const bot = document.getElementById('aiBot');
            bot.style.display = bot.style.display === 'flex' ? 'none' : 'flex';
        }

        function askBot() {
            const input = document.getElementById('botInput');
            const msgs = document.getElementById('aiMessages');
            const knowledge = localStorage.getItem('botData') || "Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø²Ø±Ø¹ØªÙ†Ø§ Ø§Ù„ÙØ§Ø®Ø±Ø©.";

            if(!input.value) return;

            // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            msgs.innerHTML += `<div class="msg-user">${input.value}</div>`;
            
            // Ø±Ø¯ Ø§Ù„Ø¨ÙˆØª (Ù…Ø­Ø§ÙƒØ§Ø© ØªÙÙƒÙŠØ± Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø¯ÙŠØ±)
            setTimeout(() => {
                let response = "Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ù… Ø£ÙÙ‡Ù… Ø³Ø¤Ø§Ù„Ùƒ. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©.";
                if(input.value.includes("ÙˆÙ‚Øª") || input.value.includes("Ø³Ø§Ø¹Ø©")) response = "Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©: " + knowledge.substring(0, 100);
                if(input.value.includes("Ø³Ø¹Ø±") || input.value.includes("ÙƒÙ…")) response = "Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ØªØ¨Ø¯Ø£ Ù…Ù† " + (localStorage.getItem('p24') || "600,000") + " Ø¯.Ø¹. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø­Ø¬Ø² Ù…Ù† Ø§Ù„Ù„ÙˆØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.";
                
                msgs.innerHTML += `<div class="msg-ai">${response}</div>`;
                msgs.scrollTop = msgs.scrollHeight;
            }, 600);
            
            input.value = "";
        }

        // --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„Ø¨ØµØ±ÙŠ ÙˆØ§Ù„Ø£Ù…Ø§Ù† ---
        function smartValidate(input, id) {
            const name = document.getElementById('custName').value;
            if(name.split(' ').length < 4) {
                alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø£ÙˆÙ„Ø§Ù‹!");
                input.value = ""; return;
            }
            
            // ÙØ­Øµ Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù…Ù†Ø¹ ØµÙˆØ± Ø§Ù„Ù…Ù†Ø§Ø¸Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ© (Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚)
            const img = new Image();
            img.src = URL.createObjectURL(input.files[0]);
            img.onload = function() {
                if(this.width > 3500) {
                    alert("âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„ØµÙˆØ±Ø©: ÙŠØ¨Ø¯Ùˆ Ø£Ù†Ù‡Ø§ Ù…Ù†Ø¸Ø± Ø·Ø¨ÙŠØ¹ÙŠ. ÙŠØ±Ø¬Ù‰ ØªØµÙˆÙŠØ± Ø§Ù„Ù‡ÙˆÙŠØ© Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø±.");
                    input.value = ""; return;
                }
                document.getElementById('custName').readOnly = true;
                checkReady();
            };
        }

        function checkReady() {
            if(document.getElementById('fId').files.length > 0 && document.getElementById('fRes').files.length > 0) {
                const btn = document.getElementById('mainBtn');
                btn.disabled = false;
                btn.className = "w-full py-4 bg-gold text-black rounded-2xl font-bold opacity-100 shadow-xl";
                btn.innerText = "ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² ÙˆØ¥ØµØ¯Ø§Ø± Ø§Ù„ÙˆØµÙ„ ğŸ§¾";
            }
        }

        // --- ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ---
        function saveAll() {
            localStorage.setItem('botData', document.getElementById('admBotData').value);
            localStorage.setItem('wa', document.getElementById('admWA').value);
            localStorage.setItem('p24', document.getElementById('admP24').value);
            localStorage.setItem('pass', document.getElementById('admPass').value || "1234");
            alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ­Ø¯ÙŠØ« Ø°ÙƒØ§Ø¡ Ø§Ù„Ù…Ø¬ÙŠØ¨ Ø§Ù„Ø¢Ù„ÙŠ!");
            location.reload();
        }

        function openAdmin() { 
            if(prompt("Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯:") === (localStorage.getItem('pass') || "1234")) 
                document.getElementById('adminOS').style.display='block'; 
        }
        function closeAdmin() { document.getElementById('adminOS').style.display='none'; }
        
        function issueInvoice() {
            const wa = localStorage.getItem('wa') || "9647700000000";
            const msg = `ğŸ§¾ ÙˆØµÙ„ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø²Ø¨ÙˆÙ†: ${document.getElementById('custName').value}%0AØªØ§Ø±ÙŠØ®: ${document.getElementById('bookDate').value}`;
            window.location.href = `https://wa.me/${wa}?text=${msg}`;
        }

        function genReport() {
            alert("ğŸ“Š Ø¬Ø§Ø±ÙŠ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠ ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ù…Ø¯ÙŠØ±...");
        }

        window.onload = function() {
            document.getElementById('admBotData').value = localStorage.getItem('botData') || "";
            document.getElementById('admWA').value = localStorage.getItem('wa') || "";
            flatpickr("#bookDate", { minDate: "today", locale: "ar" });
        };
    </script>
</body>
</html>
