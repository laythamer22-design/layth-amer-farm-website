<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù„ÙƒÙŠ | Royal Oasis System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <style>
        :root { --gold: #c5a059; --dark: #050505; }
        body { font-family: 'Tajawal', sans-serif; background: var(--dark); color: white; overflow-x: hidden; }
        .font-ultra { font-weight: 900 !important; text-shadow: 2px 2px 20px #000; }
        
        /* Ù…Ø­Ø±Ùƒ Ø§Ù„ØµÙˆØ± */
        .main-bg { position: fixed; inset: 0; z-index: -2; background-size: cover; background-position: center; filter: brightness(0.4); }
        .album-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
        .section-box { position: relative; height: 250px; border-radius: 20px; overflow: hidden; cursor: pointer; border: 1px solid rgba(197,160,89,0.3); transition: 0.4s; }
        .section-box:hover { transform: translateY(-10px); border-color: var(--gold); }
        .section-box img { width: 100%; height: 100%; object-fit: cover; }
        .section-overlay { position: absolute; inset: 0; background: linear-gradient(to top, rgba(0,0,0,0.9), transparent); display: flex; align-items: flex-end; padding: 20px; }

        /* Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¯ÙŠØ± */
        #adminOS { display: none; position: fixed; inset: 0; z-index: 9999; background: #080808; padding: 30px; overflow-y: auto; border: 4px solid var(--gold); }
        .admin-card { background: #111; padding: 20px; border-radius: 15px; border: 1px solid #222; margin-bottom: 20px; }

        /* Ø§Ù„ÙˆØµÙ„ Ø§Ù„Ù…Ø§Ù„ÙŠ */
        #invoice-template { display: none; background: white; color: black; padding: 40px; width: 500px; border: 10px solid var(--gold); }
        input, select { background: #000 !important; border: 1px solid #333 !important; color: var(--gold) !important; padding: 12px; border-radius: 10px; width: 100%; }
        .locked { background: #1a1a1a !important; color: #22c55e !important; border-color: #22c55e !important; }
    </style>
</head>
<body>

    <div id="heroBg" class="main-bg" style="background-image: url('https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?w=1600')"></div>

    <nav class="fixed top-0 w-full z-50 p-6 flex justify-between items-center bg-black/30 backdrop-blur-md">
        <h1 id="farmName" class="text-2xl font-ultra text-gold italic">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h1>
        <button onclick="openAdmin()" class="bg-gold text-black px-6 py-2 rounded-full font-black text-sm">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</button>
    </nav>

    <div class="pt-32 px-6 max-w-7xl mx-auto">
        <h2 class="text-4xl font-ultra text-gold mb-10 text-center italic underline">Ø§Ø³ØªØ¹Ø±Ø§Ø¶ Ù…Ø±Ø§ÙÙ‚ Ø§Ù„Ù…Ù†ØªØ¬Ø¹</h2>
        <div class="album-grid mb-20">
            <div class="section-box" onclick="showAlbum('pool')">
                <img id="img_pool" src="https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=600">
                <div class="section-overlay"><div><h4 class="font-bold">Ø§Ù„Ù…Ø³Ø§Ø¨Ø­ Ø§Ù„Ù…Ù„ÙƒÙŠØ©</h4><p class="text-[10px]">Ø§Ø¶ØºØ· Ù„Ø±Ø¤ÙŠØ© ÙƒØ§ÙØ© Ø§Ù„ØµÙˆØ±</p></div></div>
            </div>
            <div class="section-box" onclick="showAlbum('sports')">
                <img id="img_sports" src="https://images.unsplash.com/photo-1574629810360-7efbbe195018?w=600">
                <div class="section-overlay"><div><h4 class="font-bold">Ù‚Ø³Ù… Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨</h4><p class="text-[10px]">ÙƒØ±Ø© Ù‚Ø¯Ù… ÙˆØ³Ù„Ø©</p></div></div>
            </div>
            <div class="section-box" onclick="showAlbum('billiard')">
                <img id="img_billiard" src="https://images.unsplash.com/photo-1544198365-f5d60b6d8190?w=600">
                <div class="section-overlay"><div><h4 class="font-bold">ØµØ§Ù„Ø© Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ</h4><p class="text-[10px]">Ù‚Ø³Ù… Ø§Ù„ØªØ±ÙÙŠÙ‡ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</p></div></div>
            </div>
            <div class="section-box" onclick="showAlbum('interior')">
                <img id="img_interior" src="https://images.unsplash.com/photo-1600607687940-47a04b6bd9a1?w=600">
                <div class="section-overlay"><div><h4 class="font-bold">Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ</h4><p class="text-[10px]">Ø§Ù„Ø£Ø¬Ù†Ø­Ø© ÙˆØ§Ù„ØºØ±Ù</p></div></div>
            </div>
            <div class="section-box" onclick="showAlbum('fun')">
                <img id="img_fun" src="https://images.unsplash.com/photo-1511192336575-5a79af67a629?w=600">
                <div class="section-overlay"><div><h4 class="font-bold">Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠ</h4><p class="text-[10px]">Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ¬Ù„Ø³Ø§Øª</p></div></div>
            </div>
        </div>

        <div class="max-w-3xl mx-auto bg-black/60 p-8 rounded-[40px] border border-gold/30 backdrop-blur-xl shadow-2xl">
            <h3 class="text-3xl font-ultra text-gold text-center mb-8 italic">Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ø­Ø¬Ø² ÙˆØ¥ØµØ¯Ø§Ø± Ø§Ù„ÙˆØµÙ„</h3>
            <div class="grid md:grid-cols-2 gap-4">
                <input type="text" id="custName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ">
                <input type="tel" id="custPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                <input type="text" id="bookingDate" placeholder="Ø§Ø®ØªØ± Ø§Ù„ØªØ§Ø±ÙŠØ®">
                <select id="bookingType" onchange="updateCalc()">
                    <option value="24">Ø¥Ù‚Ø§Ù…Ø© 24 Ø³Ø§Ø¹Ø©</option>
                    <option value="12_AM">ØµØ¨Ø§Ø­ÙŠ (12 Ø³Ø§Ø¹Ø©)</option>
                    <option value="12_PM">Ù…Ø³Ø§Ø¦ÙŠ (12 Ø³Ø§Ø¹Ø©)</option>
                </select>
                <div class="md:col-span-2 grid grid-cols-2 gap-2">
                    <div class="bg-white/5 p-4 rounded-xl border border-dashed border-gold/20 text-center">
                        <span class="text-[10px]">Ø±ÙØ¹ Ø§Ù„Ù‡ÙˆÙŠØ©</span><input type="file" id="fId" onchange="lockProcess()">
                    </div>
                    <div class="bg-white/5 p-4 rounded-xl border border-dashed border-gold/20 text-center">
                        <span class="text-[10px]">Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ†</span><input type="file" id="fRes" onchange="lockProcess()">
                    </div>
                </div>
            </div>
            
            <div class="mt-6 bg-gold/10 p-4 rounded-xl text-center border border-gold/20">
                <p class="font-bold">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨Ù„Øº: <span id="finalPrice" class="text-2xl text-gold">0</span> Ø¯.Ø¹</p>
            </div>

            <button onclick="generateInvoice()" id="btnAction" class="w-full mt-6 bg-gold text-black font-black py-5 rounded-2xl text-xl hover:scale-[1.02] transition shadow-lg opacity-40 cursor-not-allowed" disabled>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬Ø² ÙˆØ¥ØµØ¯Ø§Ø± Ø§Ù„ÙˆØµÙ„ ğŸ§¾</button>
        </div>
    </div>

    <div id="adminOS">
        <div class="flex justify-between items-center border-b border-gold pb-4 mb-8">
            <h2 class="text-3xl font-ultra text-gold italic">CONTROL CENTER - CORE</h2>
            <button onclick="closeAdmin()" class="bg-red-600 px-6 py-2 rounded-full font-bold">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>

        <div class="grid lg:grid-cols-2 gap-6">
            <div class="admin-card">
                <h4 class="text-gold font-bold mb-4 underline">1. Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙˆØ± (Ø±ÙØ¹ / Ø­Ø°Ù)</h4>
                <div class="grid grid-cols-2 gap-4 text-[10px]">
                    <div>Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©: <input type="file" onchange="sync(this, 'heroBg')"></div>
                    <div>Ø§Ù„Ù…Ø³Ø¨Ø­: <input type="file" onchange="sync(this, 'img_pool')"></div>
                    <div>Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨: <input type="file" onchange="sync(this, 'img_sports')"></div>
                    <div>Ø§Ù„Ø¨Ù„ÙŠØ§Ø±Ø¯Ùˆ: <input type="file" onchange="sync(this, 'img_billiard')"></div>
                </div>
            </div>
            <div class="admin-card">
                <h4 class="text-gold font-bold mb-4 underline">2. Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</h4>
                <div class="space-y-4">
                    <input type="text" id="admWA" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">
                    <input type="number" id="admP24" placeholder="Ø³Ø¹Ø± 24 Ø³Ø§Ø¹Ø©">
                    <div class="flex gap-2">
                        <button class="bg-green-700 w-full py-2 rounded font-bold">Ø¥Ø¶Ø§ÙØ© Ø­Ø¬Ø² +</button>
                        <button class="bg-red-900 w-full py-2 rounded font-bold">Ø¥Ù„ØºØ§Ø¡ Ø­Ø¬Ø² -</button>
                    </div>
                </div>
            </div>
        </div>
        <button onclick="applyAdmin()" class="w-full mt-10 bg-blue-600 py-4 rounded-2xl font-black text-xl">Ø­ÙØ¸ ÙƒØ§ÙØ© Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…ÙŠØ© âœ…</button>
    </div>

    <div id="invoice-template">
        <div style="text-align: center; border-bottom: 4px solid gold; padding-bottom: 20px;">
            <h2 style="margin: 0;">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h2>
            <p style="font-size: 12px;">ÙˆØµÙ„ Ø¯ÙØ¹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø¹ØªÙ…Ø¯</p>
        </div>
        <div style="padding: 20px 0;">
            <p><strong>Ø§Ø³Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†:</strong> <span id="vName"></span></p>
            <p><strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø­Ø¬Ø²:</strong> <span id="vDate"></span></p>
            <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„:</strong> <span id="vPhone"></span></p>
            <p><strong>Ù†ÙˆØ¹ Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©:</strong> <span id="vType"></span></p>
            <div style="background: #f4f4f4; padding: 20px; text-align: center; margin-top: 20px;">
                <h3 style="margin: 0;">Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„ÙˆØ§ØµÙ„</h3>
                <h1 style="margin: 5px 0; color: #c5a059;"><span id="vTotal"></span> Ø¯.Ø¹</h1>
            </div>
        </div>
        <p style="text-align: center; font-size: 10px; color: #666;">Ø³ÙŠØµÙ„Ùƒ Ø¥Ø´Ø¹Ø§Ø± ØªØ°ÙƒÙŠØ±ÙŠ Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø© Ù…Ù† Ø§Ù„Ù…ÙˆØ¹Ø¯ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</p>
    </div>

    <script>
        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ù…Ø§ÙŠØ©: Ù‚ÙÙ„ Ø§Ù„Ø§Ø³Ù… Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙØ¹
        function lockProcess() {
            const name = document.getElementById('custName');
            const f1 = document.getElementById('fId').files.length;
            const f2 = document.getElementById('fRes').files.length;
            const btn = document.getElementById('btnAction');

            if(name.value.length < 8) {
                alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ Ø£ÙˆÙ„Ø§Ù‹!");
                document.getElementById('fId').value = "";
                return;
            }
            name.readOnly = true;
            name.classList.add('locked');
            
            if(f1 > 0 && f2 > 0) {
                btn.disabled = false;
                btn.classList.remove('opacity-40', 'cursor-not-allowed');
                btn.classList.add('bg-green-500', 'text-white');
            }
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙˆØµÙ„ ÙˆØ§Ù„ÙˆØ§ØªØ³Ø§Ø¨
        function generateInvoice() {
            const name = document.getElementById('custName').value;
            const date = document.getElementById('bookingDate').value;
            const phone = document.getElementById('custPhone').value;
            const total = document.getElementById('finalPrice').innerText;
            const wa = localStorage.getItem('wa') || "9647700000000";

            // Ù…Ù„Ø¡ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙˆØµÙ„
            document.getElementById('vName').innerText = name;
            document.getElementById('vDate').innerText = date;
            document.getElementById('vPhone').innerText = phone;
            document.getElementById('vTotal').innerText = total;

            const msg = `ğŸ§¾ *ÙˆØµÙ„ Ø­Ø¬Ø² Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ - Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±*%0A%0AğŸ‘¤ Ø§Ù„Ø²Ø¨ÙˆÙ†: ${name}%0AğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: ${date}%0AğŸ’° Ø§Ù„Ù…Ø¨Ù„Øº: ${total} Ø¯.Ø¹%0AğŸ“± Ø§Ù„Ù‡Ø§ØªÙ: ${phone}%0A%0Aâš ï¸ *ØªÙ†Ø¨ÙŠÙ‡:* ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­. Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¥Ø´Ø¹Ø§Ø±Ùƒ Ù‚Ø¨Ù„ 24 Ø³Ø§Ø¹Ø© Ù…Ù† Ø§Ù„Ù…ÙˆØ¹Ø¯ (ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹).%0AğŸ“ _ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡Ø°Ø§ Ø§Ù„ÙˆØµÙ„ Ù„Ø¶Ù…Ø§Ù† Ø­Ù‚Ùƒ._`;
            
            alert("âœ… ØªÙ… Ø¥ØµØ¯Ø§Ø± Ø§Ù„ÙˆØµÙ„ ÙˆØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø¬Ø² ÙÙŠ Ø§Ù„Ø³Ø¬Ù„Ø§Øª.");
            window.location.href = `https://wa.me/${wa}?text=${msg}`;
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±
        function updateCalc() {
            const type = document.getElementById('bookingType').value;
            const p24 = localStorage.getItem('p24') || 600000;
            const p12 = localStorage.getItem('p12') || 350000;
            document.getElementById('finalPrice').innerText = (type === '24' ? p24 : p12).toLocaleString();
        }

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯ÙŠØ± ÙˆØ§Ù„ØµÙˆØ±
        function sync(input, targetId) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const el = document.getElementById(targetId);
                    if(el.tagName === 'IMG') el.src = e.target.result;
                    else el.style.backgroundImage = `url('${e.target.result}')`;
                    localStorage.setItem(targetId, e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        window.onload = function() {
            updateCalc();
            ['heroBg', 'img_pool', 'img_sports', 'img_billiard', 'img_interior', 'img_fun'].forEach(id => {
                const s = localStorage.getItem(id);
                if(s) {
                    const el = document.getElementById(id);
                    if(el.tagName === 'IMG') el.src = s;
                    else el.style.backgroundImage = `url('${s}')`;
                }
            });
        };

        function openAdmin() { if(prompt("ÙƒÙˆØ¯ Ø§Ù„Ø¯Ø®ÙˆÙ„:") === "1234") document.getElementById('adminOS').style.display='block'; }
        function closeAdmin() { document.getElementById('adminOS').style.display='none'; }
        function applyAdmin() {
            localStorage.setItem('wa', document.getElementById('admWA').value);
            localStorage.setItem('p24', document.getElementById('admP24').value);
            location.reload();
        }

        flatpickr("#bookingDate", { minDate: "today", locale: "ar" });
        function showAlbum(id) { alert("Ø³ÙŠØªÙ… Ø§Ù„Ø¢Ù† Ø¹Ø±Ø¶ Ø£Ù„Ø¨ÙˆÙ… ØµÙˆØ± " + id + " Ø¨Ø§Ù„ÙƒØ§Ù…Ù„..."); }
    </script>
</body>
</html>
