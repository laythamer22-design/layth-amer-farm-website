<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø± | Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --gold: #c5a059; --dark: #050505; --royal: #0a1118; }
        body { font-family: 'Tajawal', sans-serif; background: var(--dark); color: white; scroll-behavior: smooth; }
        
        /* Ø§Ù„Ø«ÙŠÙ… Ø§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø¬Ø°Ø§Ø¨ */
        .hero-bg {
            background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://i.ibb.co/v4S6Y6Q/photo-4.jpg');
            background-size: cover; background-attachment: fixed; background-position: center;
        }

        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gold-text { background: linear-gradient(135deg, #fceabb, #f8b500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .admin-modal { display: none; position: fixed; inset: 0; z-index: 9999; background: var(--royal); overflow-y: auto; padding: 2rem; }
        
        /* ØªØ­Ø±ÙŠÙƒ Ø§Ù„ØµÙˆØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ */
        .fade-slider img { position: absolute; inset:0; opacity:0; transition: opacity 1.5s; width:100%; height:100%; object-fit:cover; }
        .fade-slider img.active { opacity:1; }

        #receiptUI { background: white; color: black; padding: 2.5rem; width: 400px; border: 10px double var(--gold); position: relative; }
        .sig-stamp { position: absolute; bottom: 30px; left: 30px; width: 100px; transform: rotate(-15deg); }
    </style>
</head>
<body class="hero-bg">

    <nav class="fixed top-0 w-full z-[100] glass border-b border-white/10 px-8 py-5 flex justify-between items-center">
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 bg-gradient-to-br from-amber-400 to-amber-700 rounded-full flex items-center justify-center font-black text-black">AN</div>
            <h1 id="farmTitle" class="text-xl font-black gold-text italic tracking-tighter uppercase">Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h1>
        </div>
        <button onclick="openAdmin()" class="bg-amber-600/20 text-amber-500 px-4 py-2 rounded-full border border-amber-500/30 font-bold">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
    </nav>

    <section class="h-screen flex flex-col items-center justify-center text-center px-4">
        <h2 id="heroDisplay" class="text-6xl md:text-9xl font-black mb-4 gold-text">THE ROYAL OASIS</h2>
        <div class="space-y-2">
            <p id="locationDisplay" class="text-lg md:text-2xl tracking-[5px] uppercase font-light">Ø£Ø·Ø±Ø§Ù Ø§Ù„ÙÙ„ÙˆØ¬Ø© Ø§Ù„Ø³ÙƒÙ†ÙŠØ©</p>
            <div class="flex gap-4 justify-center mt-6">
                <a href="https://www.google.com/maps?q=33.3500,43.7833" class="flex items-center gap-2 bg-white/10 px-4 py-2 rounded-lg text-xs hover:bg-white/20 transition">
                    <i data-lucide="map"></i> Google Maps
                </a>
                <a href="https://waze.com/ul?ll=33.3500,43.7833&navigate=yes" class="flex items-center gap-2 bg-[#33ccff]/20 px-4 py-2 rounded-lg text-xs hover:bg-[#33ccff]/40 transition text-[#33ccff]">
                    <i data-lucide="navigation"></i> Waze
                </a>
            </div>
        </div>
    </section>

    <section class="py-20 max-w-7xl mx-auto px-6">
        <div class="relative h-[60vh] rounded-[3rem] overflow-hidden glass border border-amber-500/20 fade-slider" id="mainSlider">
            <img src="https://i.ibb.co/v4S6Y6Q/photo-4.jpg" class="active">
            <img src="https://i.ibb.co/C0mXm6H/photo-6.jpg">
            <img src="https://i.ibb.co/mFm7X8J/photo-10.jpg">
            <img src="https://i.ibb.co/C9GzX9V/photo-8.jpg">
        </div>
    </section>

    <section id="booking" class="py-20 max-w-5xl mx-auto px-6">
        <div class="glass p-12 rounded-[4rem] border-t-2 border-amber-500/50 shadow-2xl space-y-10">
            <div class="text-center">
                <h3 class="text-4xl font-black mb-2">ØªØ«Ø¨ÙŠØª Ø­Ø¬Ø² Ù…Ù„ÙƒÙŠ</h3>
                <p class="text-amber-500 font-bold">50% Ù…Ù‚Ø¯Ù… Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ø­Ø¬Ø² - 50% Ø¹Ù†Ø¯ Ø§Ù„Ù…ØºØ§Ø¯Ø±Ø©</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-4">
                    <input type="text" id="custName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full bg-white/5 p-5 rounded-2xl border border-white/10 outline-none">
                    <input type="text" id="custPhone" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (07XXXXXXXX)" class="w-full bg-white/5 p-5 rounded-2xl border border-white/10 outline-none">
                    <div class="grid grid-cols-2 gap-4">
                        <select id="custType" class="bg-slate-900 p-5 rounded-2xl border border-white/10">
                            <option>Ø¹Ø§Ø¦Ù„Ø© ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</option>
                            <option>Ø´Ø¨Ø§Ø¨ ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦</option>
                        </select>
                        <select id="custDuration" class="bg-slate-900 p-5 rounded-2xl border border-white/10" onchange="toggleFatra()">
                            <option value="1">ÙŠÙˆÙ… ÙƒØ§Ù…Ù„</option>
                            <option value="0.5">Ù†ØµÙ ÙŠÙˆÙ…</option>
                        </select>
                    </div>
                    <div id="fatraChoice" class="hidden animate-bounce">
                        <select id="selectedFatra" class="w-full bg-amber-600/20 p-5 rounded-2xl border border-amber-500/50">
                            <option value="ØµØ¨Ø§Ø­ÙŠ">ÙØªØ±Ø© ØµØ¨Ø§Ø­ÙŠØ©</option>
                            <option value="Ù…Ø³Ø§Ø¦ÙŠ">ÙØªØ±Ø© Ù…Ø³Ø§Ø¦ÙŠØ©</option>
                        </select>
                    </div>
                </div>

                <div class="grid grid-cols-2 gap-4 text-center">
                    <label id="labelId" class="border-2 border-dashed border-white/20 p-8 rounded-3xl cursor-pointer hover:border-amber-500 transition-all">
                        <i data-lucide="contact-2" class="mx-auto mb-2 opacity-50"></i>
                        <span class="text-[10px] block">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…ÙˆØ­Ø¯Ø©</span>
                        <input type="file" id="inputId" class="hidden" onchange="uploadDone('labelId')">
                    </label>
                    <label id="labelHome" class="border-2 border-dashed border-white/20 p-8 rounded-3xl cursor-pointer hover:border-amber-500 transition-all">
                        <i data-lucide="home" class="mx-auto mb-2 opacity-50"></i>
                        <span class="text-[10px] block">Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø³ÙƒÙ†</span>
                        <input type="file" id="inputHome" class="hidden" onchange="uploadDone('labelHome')">
                    </label>
                </div>
            </div>

            <button onclick="requestWhatsApp()" class="w-full bg-amber-600 py-6 rounded-2xl font-black text-black shadow-xl hover:scale-105 transition-all text-xl">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø² ÙˆØ§Ù„Ø¯ÙØ¹ ğŸ’³</button>
        </div>
    </section>

    <div id="adminPanel" class="admin-modal">
        <div class="max-w-6xl mx-auto space-y-10 pb-20">
            <div class="flex justify-between items-center border-b border-white/10 pb-6">
                <h2 class="text-3xl font-black gold-text italic uppercase">ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø·Ù„Ù‚Ø©</h2>
                <button onclick="document.getElementById('adminPanel').style.display='none'" class="bg-red-600/20 text-red-500 px-6 py-2 rounded-full font-bold">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="glass p-8 rounded-[3rem] space-y-4">
                    <h3 class="font-bold text-amber-500 border-b border-white/10 pb-2">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©</h3>
                    <input type="text" id="setFarmName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø²Ø±Ø¹Ø©" class="w-full bg-white/5 p-4 rounded-xl border">
                    <input type="text" id="setLocName" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ù…Ø«Ù„Ø§Ù‹: Ø£Ø·Ø±Ø§Ù Ø§Ù„ÙÙ„ÙˆØ¬Ø©)" class="w-full bg-white/5 p-4 rounded-xl border">
                    <input type="text" id="setWA" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…" class="w-full bg-white/5 p-4 rounded-xl border">
                    <div class="grid grid-cols-2 gap-2">
                        <input type="text" id="timeM" placeholder="ÙˆÙ‚Øª Ø§Ù„ØµØ¨Ø§Ø­ÙŠ" class="bg-white/5 p-4 rounded-xl border">
                        <input type="text" id="timeE" placeholder="ÙˆÙ‚Øª Ø§Ù„Ù…Ø³Ø§Ø¦ÙŠ" class="bg-white/5 p-4 rounded-xl border">
                    </div>
                    <button onclick="saveAdminSettings()" class="w-full bg-amber-600 py-4 rounded-2xl font-black">Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                </div>

                <div class="glass p-8 rounded-[3rem] space-y-4 overflow-hidden">
                    <h3 class="font-bold text-blue-500 border-b border-white/10 pb-2">Ø§Ù„Ø£Ø±Ø´ÙØ© ÙˆØ§Ù„ÙˆØ§ØªØ³Ø§Ø¨</h3>
                    <div class="overflow-x-auto h-64">
                        <table class="w-full text-right text-[10px]">
                            <thead><tr class="bg-white/5"><th class="p-2">Ø§Ù„Ø²Ø¨ÙˆÙ†</th><th class="p-2">Ø§Ù„Ø­Ø§Ù„Ø©</th><th class="p-2">ØªØ°ÙƒÙŠØ±</th></tr></thead>
                            <tbody id="dbTable"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="receiptModal" class="fixed inset-0 z-[10001] bg-black/95 hidden flex flex-col items-center justify-center">
        <div id="receiptUI">
            <div class="text-center mb-4">
                <h2 id="rFarmName" class="text-xl font-black">Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±</h2>
                <p class="text-[8px] border-b border-black pb-1 uppercase">ÙˆØµÙ„ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø¹ØªÙ…Ø¯</p>
            </div>
            <div class="space-y-2 text-[10px]">
                <div class="flex justify-between"><span>Ø§Ù„Ø§Ø³Ù…:</span> <span id="rCust">-</span></div>
                <div class="flex justify-between"><span>Ø§Ù„ÙØªØ±Ø©:</span> <span id="rTime">-</span></div>
                <div class="flex justify-between font-bold border-t border-black pt-2"><span>Ø§Ù„Ù…Ù‚Ø¯Ù… Ø§Ù„Ù…Ø¯ÙÙˆØ¹:</span> <span id="rPaid">-</span></div>
            </div>
            <div id="qrcode" class="flex justify-center my-4"></div>
            <img id="rSig" src="" class="sig-stamp">
            <p class="text-[7px] text-center text-gray-400">Ø§Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ­Ø³Ø§Ø¨Ø§ØªÙ†Ø§</p>
            <div class="mt-4 no-print flex gap-2">
                <button onclick="window.print()" class="flex-1 bg-black text-white py-2 rounded text-xs">Ø·Ø¨Ø§Ø¹Ø©</button>
                <button onclick="location.reload()" class="flex-1 border border-black py-2 rounded text-xs">Ø¥ØºÙ„Ø§Ù‚</button>
            </div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        
        let db = JSON.parse(localStorage.getItem('farm_db_v3')) || [];
        let config = JSON.parse(localStorage.getItem('farm_config_v3')) || {
            name: "Ø£Ø¨Ùˆ Ø³ÙŠÙ ÙˆØ£Ø¨Ùˆ Ù†Ù…Ø±",
            loc: "Ø£Ø·Ø±Ø§Ù Ø§Ù„ÙÙ„ÙˆØ¬Ø© Ø§Ù„Ø³ÙƒÙ†ÙŠØ©",
            wa: "9647700000000",
            timeM: "8 ØµØ¨Ø§Ø­Ø§Ù‹ - 8 Ù…Ø³Ø§Ø¡Ù‹",
            timeE: "8 Ù…Ø³Ø§Ø¡Ù‹ - 8 ØµØ¨Ø§Ø­Ø§Ù‹",
            sig: ""
        };

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        let slideIdx = 0;
        const slides = document.querySelectorAll('#mainSlider img');
        setInterval(() => {
            slides[slideIdx].classList.remove('active');
            slideIdx = (slideIdx + 1) % slides.length;
            slides[slideIdx].classList.add('active');
        }, 4000);

        function toggleFatra() {
            document.getElementById('fatraChoice').style.display = 
                document.getElementById('custDuration').value == "0.5" ? "block" : "none";
        }

        function uploadDone(id) {
            document.getElementById(id).classList.add('bg-green-600/20', 'border-green-500');
            document.getElementById(id).innerHTML = '<i data-lucide="check" class="mx-auto text-green-500"></i><span class="text-[8px] text-green-500">ØªÙ… Ø§Ù„Ø±ÙØ¹</span>';
            lucide.createIcons();
        }

        function requestWhatsApp() {
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            if(!name || !phone) return alert("Ø§ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø±Ø¬Ø§Ø¡Ù‹");

            const booking = {
                id: db.length + 1,
                name: name,
                phone: phone,
                fatra: document.getElementById('custDuration').value == "1" ? "ÙŠÙˆÙ… ÙƒØ§Ù…Ù„" : document.getElementById('selectedFatra').value,
                paid: false
            };
            db.push(booking);
            localStorage.setItem('farm_db_v3', JSON.stringify(db));

            const msg = `Ø·Ù„Ø¨ Ø­Ø¬Ø² Ø¬Ø¯ÙŠØ¯ Ø¨Ø§Ø³Ù…: ${name}\nØ±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ: ${phone}\nØ§Ù„ÙØªØ±Ø©: ${booking.fatra}\nÙŠØ±Ø¬Ù‰ ØªØ£ÙƒÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù€ 50% Ù…Ù‚Ø¯Ù….`;
            window.open(`https://wa.me/${config.wa}?text=${encodeURIComponent(msg)}`);
        }

        function openAdmin() {
            if(prompt("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±:") === "1234") {
                renderAdmin();
                document.getElementById('adminPanel').style.display = 'block';
            }
        }

        function renderAdmin() {
            const table = document.getElementById('dbTable');
            table.innerHTML = "";
            db.forEach((b, i) => {
                table.innerHTML += `<tr class="border-b border-white/5">
                    <td class="p-2">${b.name}</td>
                    <td class="p-2">${b.paid ? 'âœ…' : `<button onclick="confirmPay(${i})" class="text-amber-500">ØªØ£ÙƒÙŠØ¯ØŸ</button>`}</td>
                    <td class="p-2">
                        <button onclick="sendWAReminder(${i})" class="bg-green-600 p-1 rounded"><i data-lucide="bell" class="w-3 h-3 text-white"></i></button>
                        ${b.paid ? `<button onclick="showReceipt(${i})" class="mr-1 text-blue-400">ğŸ“„</button>` : ''}
                    </td>
                </tr>`;
            });
            lucide.createIcons();
        }

        function confirmPay(i) {
            db[i].paid = true;
            localStorage.setItem('farm_db_v3', JSON.stringify(db));
            renderAdmin();
        }

        function sendWAReminder(i) {
            const b = db[i];
            const msg = `Ù…Ø±Ø­Ø¨Ø§Ù‹ ${b.name} ğŸŒŸØŒ Ù†Ø°ÙƒØ±Ùƒ Ø¨Ù…ÙˆØ¹Ø¯ Ø­Ø¬Ø²Ùƒ ÙÙŠ Ù…Ø²Ø±Ø¹Ø© Ø£Ø¨Ùˆ Ø³ÙŠÙ ØºØ¯Ø§Ù‹. Ù†Ø­Ù† Ø¨Ø§Ù†ØªØ¸Ø§Ø±Ùƒ!\nØ§Ù„Ù…ÙˆÙ‚Ø¹: https://www.google.com/maps?q=33.3500,43.7833`;
            window.open(`https://wa.me/${b.phone}?text=${encodeURIComponent(msg)}`);
        }

        function showReceipt(i) {
            const b = db[i];
            document.getElementById('rCust').innerText = b.name;
            document.getElementById('rTime').innerText = b.fatra;
            document.getElementById('rPaid').innerText = "75,000 Ø¯.Ø¹";
            document.getElementById('rFarmName').innerText = config.name;
            
            document.getElementById('qrcode').innerHTML = "";
            new QRCode(document.getElementById("qrcode"), { text: "https://wa.me/"+config.wa, width: 70, height: 70 });
            
            document.getElementById('receiptModal').style.display = 'flex';
        }

        function saveAdminSettings() {
            config.name = document.getElementById('setFarmName').value || config.name;
            config.loc = document.getElementById('setLocName').value || config.loc;
            config.wa = document.getElementById('setWA').value || config.wa;
            localStorage.setItem('farm_config_v3', JSON.stringify(config));
            alert("ØªÙ… Ø§Ù„Ø­ÙØ¸!"); location.reload();
        }
    </script>
</body>
</html>
