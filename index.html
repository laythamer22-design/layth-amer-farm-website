<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Royal Oasis | ูุธุงู ุงูุฅุฏุงุฑุฉ ุงููููู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --gold: #c5a059; --dark: #050505; --accent: #1a1a1a; }
        
        body { 
            font-family: 'Tajawal', sans-serif; 
            color: white; 
            scroll-behavior: smooth; 
            overflow-x: hidden;
            background-color: var(--dark);
        }

        /* ุฎูููุฉ ุงููุฒุฑุนุฉ ุงูุนุงูููุฉ ุงููุชุบูุฑุฉ */
        .main-bg-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: 1s ease-in-out;
        }
        .overlay { position: fixed; inset: 0; background: linear-gradient(rgba(0,0,0,0.4), rgba(5,5,5,0.95)); z-index: -1; }

        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .gold-text { background: linear-gradient(135deg, #fceabb, #f8b500); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        
        /* ุงููููุดู ุงูุณูุงูุฏุฑ */
        .auto-slider img { position: absolute; inset:0; opacity:0; transition: opacity 1.5s ease-in-out; width:100%; height:100%; object-fit:cover; }
        .auto-slider img.active { opacity:1; }

        .admin-modal { display: none; position: fixed; inset: 0; z-index: 9999; background: #050505; overflow-y: auto; padding: 2rem; }
        
        #receiptUI { background: white; color: black; padding: 2rem; width: 450px; border: 15px double var(--gold); position: relative; font-family: 'Courier New', Courier, monospace; }
        .sig-stamp { position: absolute; bottom: 40px; left: 40px; width: 120px; transform: rotate(-10deg); filter: grayscale(1) contrast(1.5); }

        .chat-box { position: fixed; bottom: 20px; left: 20px; width: 320px; z-index: 100; display: none; }
        .location-badge { background: linear-gradient(45deg, #c5a059, #8e6d31); border-radius: 50px; padding: 12px 30px; box-shadow: 0 10px 30px rgba(197, 160, 89, 0.3); }

        @media print { .no-print { display: none; } body { background: white; } }
    </style>
</head>
<body>

    <div id="dynamicBg" class="main-bg-container"></div>
    <div class="overlay"></div>

    <nav class="fixed top-0 w-full z-[100] glass border-b border-white/10 px-8 py-4 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <div class="w-14 h-14 bg-gradient-to-br from-amber-200 via-amber-500 to-amber-900 rounded-2xl rotate-45 flex items-center justify-center shadow-2xl">
                <span class="rotate-[-45deg] font-black text-black text-xl">RO</span>
            </div>
            <div>
                <h1 id="farmTitle" class="text-2xl font-black gold-text italic tracking-tighter uppercase">ุงููุฒุฑุนุฉ ุงูููููุฉ</h1>
                <p class="text-[8px] uppercase tracking-[4px] opacity-60">The Royal Oasis Experience</p>
            </div>
        </div>
        <div class="hidden lg:flex items-center gap-8 text-[11px] font-bold uppercase tracking-widest">
            <a href="#gallery" class="hover:text-amber-500 transition-all">ุงููุชุงููุฌ</a>
            <a href="#map-section" class="hover:text-amber-500 transition-all">ุงูุฎุงุฑุทุฉ</a>
            <a href="#booking" class="hover:text-amber-500 transition-all">ุงุญุฌุฒ ุงูุขู</a>
            <button onclick="openAdmin()" class="bg-amber-600/10 border border-amber-500/30 text-amber-500 px-6 py-2 rounded-full hover:bg-amber-600 hover:text-black transition-all">ุจูุงุจุฉ ุงููุฏูุฑ</button>
        </div>
    </nav>

    <section class="h-screen flex flex-col items-center justify-center text-center px-4">
        <h2 id="heroDisplay" class="text-7xl md:text-[12rem] font-black mb-6 gold-text drop-shadow-[0_20px_50px_rgba(0,0,0,0.5)] leading-none italic">ROYAL OASIS</h2>
        <div class="location-badge mb-10 group cursor-pointer" onclick="window.open('https://maps.google.com/?q=33.375336,43.726315')">
            <div class="flex items-center gap-3">
                <i data-lucide="map-pin" class="text-black animate-bounce"></i>
                <p id="locationText" class="text-black font-black text-lg">ุฃุทุฑุงู ุงููููุฌุฉ ุงูุณูููุฉ</p>
            </div>
        </div>
        
        <div class="flex flex-wrap justify-center gap-6">
            <a href="https://maps.google.com/?q=33.375336,43.726315" target="_blank" class="glass px-10 py-5 rounded-2xl flex items-center gap-3 hover:scale-105 transition-all group">
                <img src="https://cdn-icons-png.flaticon.com/512/300/300221.png" class="w-6" alt="">
                <span class="font-bold">Google Maps</span>
            </a>
            <a href="https://waze.com/ul?ll=33.3500,43.7833&navigate=yes" target="_blank" class="glass px-10 py-5 rounded-2xl flex items-center gap-3 hover:scale-105 transition-all">
                <img src="https://cdn-icons-png.flaticon.com/512/732/732258.png" class="w-6" alt="">
                <span class="font-bold">Waze Navigation</span>
            </a>
        </div>
    </section>

    <section id="gallery" class="py-32 max-w-[1600px] mx-auto px-6">
        <div class="flex flex-col md:flex-row justify-between items-end mb-16 gap-8">
            <div class="max-w-2xl">
                <h3 class="text-5xl font-black gold-text mb-4 italic">ุงููุชุงููุฌ ุงููููู</h3>
                <p class="text-gray-400 text-lg leading-relaxed">ุงุณุชุนุฑุถ ุชูุงุตูู ุงููุฎุงูุฉ ูู ูุฒุฑุนุชูุง ูู ุฎูุงู ุฃูุจูู ูุชูุงูู ูุบุทู ูุงูุฉ ุงููุฑุงูู ุงูุฏุงุฎููุฉ ูุงูุฎุงุฑุฌูุฉ.</p>
            </div>
            <div class="glass p-6 rounded-3xl flex items-center gap-6">
                <div class="text-center"><p class="text-3xl font-black gold-text">โ</p><p class="text-[10px] text-gray-500 uppercase">ุตูุฑ ุบูุฑ ูุญุฏูุฏุฉ</p></div>
                <div class="w-px h-10 bg-white/10"></div>
                <div class="text-center"><p class="text-3xl font-black gold-text">4K</p><p class="text-[10px] text-gray-500 uppercase">ุฏูุฉ ุนุงููุฉ</p></div>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-6" id="catalogGrid">
            </div>

        <div class="mt-20 rounded-[4rem] overflow-hidden glass p-4 border border-amber-500/20 shadow-[0_50px_100px_rgba(0,0,0,0.5)]">
            <video id="mainVideo" autoplay muted loop class="w-full h-[80vh] object-cover rounded-[3rem]">
                <source src="https://assets.mixkit.co/videos/preview/mixkit-luxury-villa-with-a-pool-at-sunset-2826-large.mp4" type="video/mp4">
            </video>
        </div>
    </section>

    <section id="map-section" class="py-32 bg-black/50">
        <div class="max-w-7xl mx-auto px-6">
            <div class="text-center mb-20">
                <h3 class="text-5xl font-black gold-text italic mb-4">ุฎุงุฑุทุฉ ุงูุชุตููู ุงูุฏุงุฎูู</h3>
                <p class="text-gray-400">ุชูุฒูุน ุงููุฑุงูู ูุงูุฎุฏูุงุช ุฏุงุฎู ุงููุงุญุฉ</p>
            </div>
            <div class="relative rounded-[4rem] overflow-hidden border border-amber-500/20 glass h-[700px] group">
                <img id="interiorMap" src="https://i.ibb.co/mFm7X8J/photo-10.jpg" class="w-full h-full object-cover opacity-40 group-hover:scale-110 transition-all duration-[10s]">
                <div class="absolute inset-0 flex items-center justify-center">
                    <div class="p-10 text-center glass rounded-full border-amber-500/50">
                        <i data-lucide="scan-eye" class="w-12 h-12 mx-auto mb-4 gold-text animate-pulse"></i>
                        <p class="font-black text-xl tracking-widest uppercase">ุชุตูุญ ุงููุฑุงูู</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="booking" class="py-32 max-w-6xl mx-auto px-6">
        <div class="glass p-16 rounded-[5rem] border-t-4 border-amber-500 shadow-2xl space-y-12 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-10 opacity-5">
                <i data-lucide="crown" class="w-64 h-64 text-white"></i>
            </div>
            
            <div class="text-center relative">
                <h3 class="text-5xl font-black mb-4 italic uppercase">ุงุณุชูุงุฑุฉ ุงูุญุฌุฒ ุงููููู</h3>
                <p class="text-amber-500 font-bold tracking-[5px]">ูุธุงู ุงูุฏูุน ุงููุณุจู ุงูุขูู (50%)</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="space-y-6">
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-amber-500 mr-4">ุงููุนูููุงุช ุงูุดุฎุตูุฉ</label>
                        <input type="text" id="custName" placeholder="ุงูุงุณู ุงููุงูู ููุฒุจูู" class="w-full bg-white/5 p-6 rounded-3xl border border-white/10 outline-none focus:border-amber-500 text-lg">
                        <input type="text" id="custPhone" placeholder="ุฑูู ุงููุงุชุณุงุจ (ูุฅุฑุณุงู ุงููุตู ูุงูุฅุดุนุงุฑุงุช)" class="w-full bg-white/5 p-6 rounded-3xl border border-white/10 outline-none focus:border-amber-500 text-lg">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-amber-500 mr-4">ูุฆุฉ ุงููุณุชุฃุฌุฑ</label>
                            <select id="custType" class="w-full bg-black/80 p-6 rounded-3xl border border-white/10 text-white outline-none">
                                <option value="ุนุงุฆูุฉ">ุนุงุฆูุฉ ๐จโ๐ฉโ๐งโ๐ฆ</option>
                                <option value="ุดุจุงุจ">ุดุจุงุจ ๐จโ๐ฆโ๐ฆ</option>
                            </select>
                        </div>
                        <div class="space-y-2">
                            <label class="text-xs font-bold text-amber-500 mr-4">ูุฏุฉ ุงูุฅูุงูุฉ</label>
                            <select id="custDuration" class="w-full bg-black/80 p-6 rounded-3xl border border-white/10 text-white outline-none" onchange="updateBookingLogic()">
                                <option value="1">ููู ูุงูู (24 ุณุงุนุฉ)</option>
                                <option value="0.5">ูุตู ููู (12 ุณุงุนุฉ)</option>
                            </select>
                        </div>
                    </div>

                    <div id="halfDayOptions" class="hidden animate-fade-in">
                        <label class="text-xs font-bold text-amber-500 mr-4">ุงุฎุชูุงุฑ ุงููุชุฑุฉ</label>
                        <div class="grid grid-cols-2 gap-4 mt-2">
                            <button onclick="setFatra('ุตุจุงุญู')" class="fatra-btn bg-white/5 p-4 rounded-2xl border border-white/10 hover:border-amber-500 transition-all">ุตุจุงุญู</button>
                            <button onclick="setFatra('ูุณุงุฆู')" class="fatra-btn bg-white/5 p-4 rounded-2xl border border-white/10 hover:border-amber-500 transition-all">ูุณุงุฆู</button>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <label class="text-xs font-bold text-amber-500 mr-4">ุฑูุน ุงููุณุชูุณูุงุช ุงููุทููุจุฉ (ุจูุงุจุฉ ุฃูููุฉ)</label>
                    <div class="grid grid-cols-1 gap-4">
                        <label id="labelId" class="flex items-center gap-6 border-2 border-dashed border-white/10 p-8 rounded-3xl cursor-pointer hover:bg-white/5 hover:border-amber-500 transition-all">
                            <div class="w-16 h-16 bg-amber-500/20 rounded-2xl flex items-center justify-center text-amber-500"><i data-lucide="contact-2"></i></div>
                            <div><span class="block font-bold">ุงูุจุทุงูุฉ ุงูููุญุฏุฉ</span><span class="text-[10px] opacity-50 text-right">ูุฑุฌู ุฑูุน ุงููุฌู ุงูุฃูุงูู</span></div>
                            <input type="file" class="hidden" onchange="handleUpload(this, 'labelId')">
                        </label>
                        <label id="labelHome" class="flex items-center gap-6 border-2 border-dashed border-white/10 p-8 rounded-3xl cursor-pointer hover:bg-white/5 hover:border-amber-500 transition-all">
                            <div class="w-16 h-16 bg-blue-500/20 rounded-2xl flex items-center justify-center text-blue-500"><i data-lucide="home"></i></div>
                            <div><span class="block font-bold">ุจุทุงูุฉ ุงูุณูู</span><span class="text-[10px] opacity-50 text-right">ูุฑุฌู ุฑูุน ุตูุฑุฉ ูุงุถุญุฉ</span></div>
                            <input type="file" class="hidden" onchange="handleUpload(this, 'labelHome')">
                        </label>
                    </div>
                </div>
            </div>

            <div class="bg-gradient-to-l from-amber-600/20 to-transparent p-10 rounded-4xl border border-amber-500/30 flex flex-col md:flex-row justify-between items-center gap-8">
                <div>
                    <p class="text-gray-400 mb-1">ุงูุณุนุฑ ุงูุฅุฌูุงูู: <span id="displayTotal" class="line-through">0</span> ุฏ.ุน</p>
                    <h4 class="text-4xl font-black text-white">ุงูููุฏู (50%): <span id="displayPaid" class="gold-text">0</span> ุฏ.ุน</h4>
                    <p class="text-[10px] mt-2 text-amber-500/70">* ูุชู ุฅุตุฏุงุฑ ุงููุตู ุงูุชุณูุณูู ุจุนุฏ ุชุฃููุฏ ุงูุชุญููู ุงููุงูู ูู ูุจู ุงูุฅุฏุงุฑุฉ.</p>
                </div>
                <button onclick="submitBooking()" class="bg-amber-600 text-black px-12 py-6 rounded-3xl font-black text-xl hover:scale-105 active:scale-95 transition-all shadow-[0_20px_40px_rgba(217,167,74,0.3)]">ุชุฃููุฏ ุงูุทูุจ ูุงูุงูุชูุงู ููุฏูุน ๐ณ</button>
            </div>
        </div>
    </section>

    <div id="aiChat" class="chat-box glass p-5 rounded-3xl border-amber-500/50 shadow-2xl">
        <div class="flex justify-between items-center mb-4 border-b border-white/10 pb-4">
            <div class="flex items-center gap-3">
                <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                <span class="font-black gold-text italic">ูุณุงุนุฏ ุงููุงุญุฉ ุงูุฐูู</span>
            </div>
            <button onclick="toggleChat()" class="text-gray-500 hover:text-white">ร</button>
        </div>
        <div id="chatContent" class="h-64 overflow-y-auto space-y-4 pr-2 text-sm mb-4 custom-scroll">
            <p class="bg-white/5 p-3 rounded-2xl italic">ูุฑุญุจุงู ุจู ูู ุงููุฒุฑุนุฉ ุงูููููุฉุ ุฃูุง ููุง ููุฅุฌุงุจุฉ ุนูู ูุงูุฉ ุงุณุชูุณุงุฑุงุชู ุญูู ุงููุฑุงูู ูุงูุฃุณุนุงุฑ..</p>
        </div>
        <div class="relative">
            <input type="text" id="chatInput" placeholder="ุงูุชุจ ุณุคุงูู ููุง..." class="w-full bg-black/50 border border-white/10 p-4 rounded-2xl outline-none focus:border-amber-500 text-xs pr-12">
            <button onclick="aiResponse()" class="absolute left-2 top-2 bg-amber-600 p-2 rounded-xl text-black"><i data-lucide="send" class="w-4 h-4"></i></button>
        </div>
    </div>

    <button onclick="toggleChat()" class="fixed bottom-10 left-10 w-16 h-16 bg-amber-600 rounded-2xl shadow-2xl z-[100] flex items-center justify-center hover:rotate-12 transition-all">
        <i data-lucide="bot" class="text-black w-8 h-8"></i>
    </button>

    <div id="adminPanel" class="admin-modal">
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between items-center mb-16">
                <div>
                    <h2 class="text-5xl font-black gold-text italic">ุงูุณูุทุฑุฉ ูุงูุชุญูู</h2>
                    <p class="text-gray-500">ุฃุชูุชุฉ ุงูุฃุฑุดูุฉ ูุงูุชูุงุฑูุฑ ุงููุงููุฉ</p>
                </div>
                <button onclick="closeAdmin()" class="bg-red-600/20 text-red-500 px-8 py-3 rounded-2xl font-bold border border-red-500/50">ุฎุฑูุฌ ุขูู</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-12">
                <div class="glass p-8 rounded-3xl text-center">
                    <p class="text-xs text-gray-500 mb-2 uppercase">ุฅุฌูุงูู ุงูุญุฌูุฒุงุช</p>
                    <h4 id="statTotalBooks" class="text-4xl font-black">0</h4>
                </div>
                <div class="glass p-8 rounded-3xl text-center">
                    <p class="text-xs text-gray-500 mb-2 uppercase">ุงูุฃุฑุจุงุญ ุงูุดูุฑูุฉ</p>
                    <h4 id="statIncome" class="text-4xl font-black text-green-500">0</h4>
                </div>
                <div class="glass p-8 rounded-3xl text-center">
                    <p class="text-xs text-gray-500 mb-2 uppercase">ุญุงูุงุช ุงูุงูุชุธุงุฑ</p>
                    <h4 id="statPending" class="text-4xl font-black text-amber-500">0</h4>
                </div>
                <div class="glass p-8 rounded-3xl text-center">
                    <p class="text-xs text-gray-500 mb-2 uppercase">ุงูุฒูุงุฑ ุงูููู</p>
                    <h4 class="text-4xl font-black text-blue-500">12</h4>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-1 space-y-6">
                    <div class="glass p-8 rounded-[3rem] space-y-4">
                        <h4 class="font-black text-amber-500 border-b border-white/10 pb-4 mb-4">ุชุนุฏูู ูุนูููุงุช ุงููุธุงู</h4>
                        <input type="text" id="setFarmName" placeholder="ุงุณู ุงููุฒุฑุนุฉ" class="w-full bg-white/5 p-4 rounded-xl border border-white/10">
                        <input type="text" id="setPrice" placeholder="ุงูุณุนุฑ ูููู ูุงูู" class="w-full bg-white/5 p-4 rounded-xl border border-white/10">
                        <input type="text" id="setLoc" placeholder="ุงูุนููุงู ุงูุณููู" class="w-full bg-white/5 p-4 rounded-xl border border-white/10">
                        <input type="text" id="setWA" placeholder="ุฑูู ูุงุชุณุงุจ ุงูุฅุฏุงุฑุฉ" class="w-full bg-white/5 p-4 rounded-xl border border-white/10">
                        <textarea id="setBotData" placeholder="ุชุบุฐูุฉ ุจูุงูุงุช ุงูุจูุช (ุชูุงุตูู ุงููุฒุฑุนุฉ)" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 h-32"></textarea>
                        
                        <div class="p-4 border border-dashed border-white/10 rounded-xl">
                            <p class="text-[10px] text-gray-500 mb-2 italic">ุฑูุน ุชูููุน ุงููุฏูุฑ (PNG)</p>
                            <input type="file" id="setSig" class="text-xs">
                        </div>
                        
                        <input type="password" id="setPass" placeholder="ุชุบููุฑ ูููุฉ ุงูุณุฑ" class="w-full bg-white/5 p-4 rounded-xl border border-white/10">
                        <button onclick="saveAdminSettings()" class="w-full bg-amber-600 py-4 rounded-2xl font-black text-black">ุญูุธ ุงูุชุนุฏููุงุช ุงูููููุฉ</button>
                    </div>

                    <div class="glass p-8 rounded-[3rem] space-y-4">
                        <h4 class="font-black text-blue-500 border-b border-white/10 pb-4 mb-4">ุงูุชุญูู ุจุงูุซูู ูุงูุตูุฑ</h4>
                        <p class="text-[10px] text-gray-400">ููููู ูุถุน ุฑูุงุจุท ุงูุตูุฑ ุงูุญููููุฉ ููุง</p>
                        <input type="text" id="setMainBg" placeholder="ุฑุงุจุท ุฎูููุฉ ุงููููุน ุงูุฑุฆูุณูุฉ" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 text-xs">
                        <textarea id="setCatalogImgs" placeholder="ุฑูุงุจุท ุตูุฑ ุงููุชุงููุฌ (ุฑุงุจุท ููู ุณุทุฑ)" class="w-full bg-white/5 p-4 rounded-xl border border-white/10 h-32 text-xs"></textarea>
                        <button onclick="updateVisuals()" class="w-full bg-blue-600 py-4 rounded-2xl font-black">ุชุญุฏูุซ ุงูุตูุฑ ูุงูุซูู</button>
                    </div>
                </div>

                <div class="lg:col-span-2 space-y-8">
                    <div class="glass p-8 rounded-[3rem] overflow-hidden">
                        <h4 class="font-black text-white mb-6 flex justify-between">
                            <span>ุฃุฑุดูู ุงูุฒุจุงุฆู ูุงูุนูููุงุช</span>
                            <button onclick="downloadReports()" class="text-xs bg-white/10 px-4 py-2 rounded-lg">ุชุญููู ุชูุฑูุฑ ุดูุฑู</button>
                        </h4>
                        <div class="overflow-x-auto">
                            <table class="w-full text-right text-xs">
                                <thead class="bg-white/5 text-amber-500">
                                    <tr>
                                        <th class="p-4">ID</th>
                                        <th class="p-4">ุงูุฒุจูู</th>
                                        <th class="p-4">ุงูููุน</th>
                                        <th class="p-4">ุงููุชุฑุฉ</th>
                                        <th class="p-4">ุงูุญุงูุฉ</th>
                                        <th class="p-4">ุงูุฅุฌุฑุงุก</th>
                                    </tr>
                                </thead>
                                <tbody id="adminTableBody">
                                    </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="receiptModal" class="fixed inset-0 z-[10001] bg-black/95 hidden flex-col items-center justify-center p-6 overflow-y-auto">
        <div id="receiptUI">
            <div class="text-center mb-8 border-b-2 border-black pb-6">
                <h1 class="text-3xl font-black italic tracking-tighter" id="rFarmName">ุงููุฒุฑุนุฉ ุงูููููุฉ</h1>
                <p class="text-[8px] uppercase tracking-[5px] mt-1">Official Booking Invoice</p>
                <div class="flex justify-between mt-4 text-[10px] font-bold">
                    <span id="rSerial">#INV-0001</span>
                    <span id="rDate">2024/05/20</span>
                </div>
            </div>

            <div class="space-y-4 text-xs">
                <div class="flex justify-between border-b border-dotted border-black pb-2"><span>ุงุณู ุงููุณุชุฃุฌุฑ:</span><span id="rName" class="font-black">-</span></div>
                <div class="flex justify-between border-b border-dotted border-black pb-2"><span>ุงููุฆุฉ:</span><span id="rType">-</span></div>
                <div class="flex justify-between border-b border-dotted border-black pb-2"><span>ูุฏุฉ ุงูุญุฌุฒ:</span><span id="rDuration">-</span></div>
                <div class="flex justify-between border-b border-dotted border-black pb-2"><span>ุงููุชุฑุฉ:</span><span id="rFatra">-</span></div>
                
                <div class="my-8 p-4 bg-gray-100 rounded-xl">
                    <div class="flex justify-between mb-2"><span>ุฅุฌูุงูู ุงููุจูุบ:</span><span id="rTotal">-</span></div>
                    <div class="flex justify-between text-lg font-black border-t border-black pt-2"><span>ุงููุจูุบ ุงููุฏููุน (50%):</span><span id="rPaid">-</span></div>
                    <div class="flex justify-between text-gray-500 mt-2"><span>ุงููุชุจูู ุนูุฏ ุงููุบุงุฏุฑุฉ:</span><span id="rRemaining">-</span></div>
                </div>
            </div>

            <div class="flex justify-between items-end mt-12">
                <div id="qrcode" class="border-4 border-black p-1"></div>
                <div class="text-center relative">
                    <p class="text-[10px] font-bold mb-10">ุชูููุน ุงูุฅุฏุงุฑุฉ</p>
                    <img id="rSignature" src="" class="sig-stamp">
                    <div class="w-32 h-px bg-black mx-auto"></div>
                </div>
            </div>

            <p class="text-[7px] text-center mt-10 italic opacity-50">ูุฐุง ุงููุตู ูุนุชูุฏ ุฑุณููุงู ูู ุฅุฏุงุฑุฉ ุงููุฒุฑุนุฉุ ูุฑุฌู ุฅุจุฑุงุฒู ุนูุฏ ุงูุฏุฎูู.</p>
        </div>
        <div class="mt-8 flex gap-4 no-print">
            <button onclick="window.print()" class="bg-amber-600 text-black px-10 py-4 rounded-xl font-black">ุทุจุงุนุฉ / ุญูุธ PDF</button>
            <button onclick="closeReceipt()" class="border border-white/20 px-10 py-4 rounded-xl">ุฅุบูุงู</button>
        </div>
    </div>

    <script>
        // Initialization & Data
        lucide.createIcons();

        let db = JSON.parse(localStorage.getItem('royal_oasis_db')) || [];
        let config = JSON.parse(localStorage.getItem('royal_oasis_config')) || {
            name: "ูุฒุฑุนุฉ ุฃุจู ุณูู ูุฃุจู ููุฑ",
            loc: "ุฃุทุฑุงู ุงููููุฌุฉ ุงูุณูููุฉ",
            price: 150000,
            wa: "9647700000000",
            pass: "1234",
            botData: "ุงููุฒุฑุนุฉ ุชูุน ูู ุฃุทุฑุงู ุงููููุฌุฉ ุงูุณูููุฉ. ุชุญุชูู ุนูู ูุณุจุญ ุฃูููุจูุ ุตุงูุฉ VIPุ ุญุฏุงุฆู ูุงุณุนุฉ. ุงูุณุนุฑ ูููู ูุงูู 150 ุฃููุ ููุตู ููู 80 ุฃูู. ุงูุญุฌุฒ ูุชุทูุจ ุฏูุน 50% ููุฏูุงู.",
            bg: "https://images.unsplash.com/photo-1580587771525-78b9dba3b914?auto=format&fit=crop&q=80&w=2000",
            catalog: [
                "https://i.ibb.co/v4S6Y6Q/photo-4.jpg",
                "https://i.ibb.co/C0mXm6H/photo-6.jpg",
                "https://i.ibb.co/mFm7X8J/photo-10.jpg",
                "https://i.ibb.co/C9GzX9V/photo-8.jpg"
            ],
            signature: "",
            morningTime: "8:00 AM - 8:00 PM",
            eveningTime: "8:00 PM - 8:00 AM"
        };

        let currentFatra = "ููู ูุงูู";

        // UI Updates
        function initApp() {
            document.getElementById('farmTitle').innerText = config.name;
            document.getElementById('heroDisplay').innerText = config.name.split(' ').pop().toUpperCase();
            document.getElementById('locationText').innerText = config.loc;
            document.getElementById('displayTotal').innerText = config.price.toLocaleString();
            document.getElementById('displayPaid').innerText = (config.price * 0.5).toLocaleString();
            
            // Visuals
            updateVisualsUI();
            renderCatalog();
            updateBookingLogic();
        }

        function updateVisualsUI() {
            const bg = document.getElementById('dynamicBg');
            bg.style.backgroundImage = `url(${config.bg})`;
            
            // Auto-swapping Background Effect
            let i = 0;
            setInterval(() => {
                bg.style.backgroundImage = `url(${config.catalog[i]})`;
                i = (i + 1) % config.catalog.length;
            }, 8000);
        }

        function renderCatalog() {
            const grid = document.getElementById('catalogGrid');
            grid.innerHTML = config.catalog.map(img => `
                <div class="h-80 rounded-[2rem] overflow-hidden border border-white/10 hover:border-amber-500 transition-all cursor-zoom-in group">
                    <img src="${img}" class="w-full h-full object-cover group-hover:scale-110 transition-duration-700">
                </div>
            `).join('');
        }

        // Booking Logic
        function updateBookingLogic() {
            const duration = document.getElementById('custDuration').value;
            const options = document.getElementById('halfDayOptions');
            const total = duration == "1" ? config.price : (config.price * 0.6); // 12h is slightly more than half
            
            if(duration == "0.5") {
                options.classList.remove('hidden');
            } else {
                options.classList.add('hidden');
                currentFatra = "ููู ูุงูู";
            }

            document.getElementById('displayTotal').innerText = total.toLocaleString();
            document.getElementById('displayPaid').innerText = (total * 0.5).toLocaleString();
        }

        function setFatra(f) {
            currentFatra = f;
            document.querySelectorAll('.fatra-btn').forEach(btn => btn.classList.remove('border-amber-500', 'bg-amber-600/20'));
            event.target.classList.add('border-amber-500', 'bg-amber-600/20');
        }

        function handleUpload(input, labelId) {
            if(input.files && input.files[0]) {
                const label = document.getElementById(labelId);
                label.classList.add('bg-green-600/20', 'border-green-500');
                label.querySelector('span').innerText = "ุชู ุงูุฑูุน ุจูุฌุงุญ โ";
            }
        }

        function submitBooking() {
            const name = document.getElementById('custName').value;
            const phone = document.getElementById('custPhone').value;
            if(!name || !phone) return alert("ูุฑุฌู ููุฆ ูุงูุฉ ุงูุจูุงูุงุช!");

            const newBooking = {
                id: Date.now(),
                serial: db.length + 1001,
                name,
                phone,
                type: document.getElementById('custType').value,
                duration: document.getElementById('custDuration').value == "1" ? "24 ุณุงุนุฉ" : "12 ุณุงุนุฉ",
                fatra: currentFatra,
                total: document.getElementById('custDuration').value == "1" ? config.price : (config.price * 0.6),
                status: 'pending', // pending, paid, cancelled
                date: new Date().toLocaleDateString('ar-EG')
            };

            db.push(newBooking);
            localStorage.setItem('royal_oasis_db', JSON.stringify(db));

            // Redirect to WhatsApp
            const msg = `ุทูุจ ุญุฌุฒ ูููู ุฌุฏูุฏ ๐\n\nุงูุฒุจูู: ${name}\nุงููุงุชู: ${phone}\nุงููุทููุจ: ุฏูุน ููุฏู 50% ุจูููุฉ ${(newBooking.total * 0.5).toLocaleString()} ุฏ.ุน\n\nูุฑุฌู ุชุฃููุฏ ุงูุญุฌุฒ ูุฅุตุฏุงุฑ ุงููุตู ุงูุฑุณูู.`;
            window.open(`https://wa.me/${config.wa}?text=${encodeURIComponent(msg)}`);
        }

        // Admin Functions
        function openAdmin() {
            const pass = prompt("ูุฑุฌู ุฅุฏุฎุงู ุฑูุฒ ุงููุตูู ุงููููู:");
            if(pass === config.pass) {
                renderAdminTable();
                document.getElementById('adminPanel').style.display = 'block';
                // Fill settings
                document.getElementById('setFarmName').value = config.name;
                document.getElementById('setPrice').value = config.price;
                document.getElementById('setLoc').value = config.loc;
                document.getElementById('setWA').value = config.wa;
                document.getElementById('setBotData').value = config.botData;
                document.getElementById('setMainBg').value = config.bg;
                document.getElementById('setCatalogImgs').value = config.catalog.join('\n');
            } else {
                alert("ุงูุฑูุฒ ุฎุงุทุฆ!");
            }
        }

        function renderAdminTable() {
            const tbody = document.getElementById('adminTableBody');
            let income = 0;
            let pending = 0;
            
            tbody.innerHTML = db.slice().reverse().map(b => {
                if(b.status === 'paid') income += (b.total * 0.5);
                if(b.status === 'pending') pending++;

                return `
                    <tr class="border-b border-white/5 hover:bg-white/5 transition-all">
                        <td class="p-4 font-mono">#${b.serial}</td>
                        <td class="p-4 font-bold">${b.name}</td>
                        <td class="p-4">${b.type}</td>
                        <td class="p-4 text-gray-400">${b.fatra}</td>
                        <td class="p-4">
                            <span class="px-3 py-1 rounded-full ${b.status === 'paid' ? 'bg-green-600/20 text-green-500' : 'bg-amber-600/20 text-amber-500'}">
                                ${b.status === 'paid' ? 'ุชู ุงูุฏูุน' : 'ููุฏ ุงูุงูุชุธุงุฑ'}
                            </span>
                        </td>
                        <td class="p-4 flex gap-2">
                            ${b.status === 'pending' ? `<button onclick="approvePayment(${b.id})" class="p-2 bg-green-600 rounded-lg" title="ุชุฃููุฏ ุงูุฏูุน"><i data-lucide="check" class="w-4 h-4 text-black"></i></button>` : ''}
                            <button onclick="generateInvoice(${b.id})" class="p-2 bg-blue-600 rounded-lg"><i data-lucide="file-text" class="w-4 h-4"></i></button>
                            <button onclick="sendReminder(${b.id})" class="p-2 bg-amber-600 rounded-lg" title="ุฅุฑุณุงู ุชุฐููุฑ 24 ุณุงุนุฉ"><i data-lucide="bell" class="w-4 h-4 text-black"></i></button>
                        </td>
                    </tr>
                `;
            }).join('');
            
            document.getElementById('statTotalBooks').innerText = db.length;
            document.getElementById('statIncome').innerText = income.toLocaleString() + " ุฏ.ุน";
            document.getElementById('statPending').innerText = pending;
            lucide.createIcons();
        }

        function approvePayment(id) {
            const idx = db.findIndex(b => b.id === id);
            db[idx].status = 'paid';
            localStorage.setItem('royal_oasis_db', JSON.stringify(db));
            renderAdminTable();
            alert("ุชู ุชุฃููุฏ ุงูุฏูุน ูุฅุตุฏุงุฑ ุตูุงุญูุฉ ุงููุตู.");
        }

        function saveAdminSettings() {
            config.name = document.getElementById('setFarmName').value;
            config.price = parseInt(document.getElementById('setPrice').value);
            config.loc = document.getElementById('setLoc').value;
            config.wa = document.getElementById('setWA').value;
            config.botData = document.getElementById('setBotData').value;
            if(document.getElementById('setPass').value) config.pass = document.getElementById('setPass').value;
            
            // Handle Signature
            const sigFile = document.getElementById('setSig').files[0];
            if(sigFile) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    config.signature = e.target.result;
                    localStorage.setItem('royal_oasis_config', JSON.stringify(config));
                };
                reader.readAsDataURL(sigFile);
            }

            localStorage.setItem('royal_oasis_config', JSON.stringify(config));
            alert("ุชู ุชุญุฏูุซ ูุงูุฉ ุงูุฅุนุฏุงุฏุงุช!");
            location.reload();
        }

        function updateVisuals() {
            config.bg = document.getElementById('setMainBg').value || config.bg;
            config.catalog = document.getElementById('setCatalogImgs').value.split('\n').filter(l => l.length > 5);
            localStorage.setItem('royal_oasis_config', JSON.stringify(config));
            alert("ุชู ุชุญุฏูุซ ุงูุตูุฑ!");
            location.reload();
        }

        // Invoice Generation
        function generateInvoice(id) {
            const b = db.find(x => x.id === id);
            if(b.status !== 'paid') return alert("ูุง ูููู ุฅุตุฏุงุฑ ูุตู ูุทูุจ ูู ูุชู ุชุฃููุฏ ุฏูุนู ูู ุงููุฏูุฑ!");

            document.getElementById('rFarmName').innerText = config.name;
            document.getElementById('rSerial').innerText = `#INV-${b.serial}`;
            document.getElementById('rName').innerText = b.name;
            document.getElementById('rType').innerText = b.type;
            document.getElementById('rDuration').innerText = b.duration;
            document.getElementById('rFatra').innerText = b.fatra;
            document.getElementById('rTotal').innerText = b.total.toLocaleString() + " ุฏ.ุน";
            document.getElementById('rPaid').innerText = (b.total * 0.5).toLocaleString() + " ุฏ.ุน";
            document.getElementById('rRemaining').innerText = (b.total * 0.5).toLocaleString() + " ุฏ.ุน";
            document.getElementById('rSignature').src = config.signature;
            
            // QR Code
            document.getElementById('qrcode').innerHTML = "";
            new QRCode(document.getElementById("qrcode"), {
                text: `https://wa.me/${config.wa}?text=VerifyInvoice-${b.serial}`,
                width: 80, height: 80, colorDark : "#000000", colorLight : "#ffffff"
            });

            document.getElementById('receiptModal').classList.remove('hidden');
            document.getElementById('receiptModal').classList.add('flex');
        }

        function sendReminder(id) {
            const b = db.find(x => x.id === id);
            const msg = `ุชุฐููุฑ ูููู ๐\nุนุฒูุฒู ${b.name}ุ ูุฐูุฑู ุจููุนุฏ ุญุฌุฒู ุบุฏุงู ูู ${config.name}.\nุงูููุงู: ${config.loc}\nูุฑุฌู ุชุฌููุฒ ุงููุตู ุงูุฅููุชุฑููู ููุฏุฎูู.`;
            window.open(`https://wa.me/${b.phone}?text=${encodeURIComponent(msg)}`);
        }

        // AI Bot logic
        function toggleChat() {
            const chat = document.getElementById('aiChat');
            chat.style.display = chat.style.display === 'block' ? 'none' : 'block';
        }

        function aiResponse() {
            const input = document.getElementById('chatInput');
            const content = document.getElementById('chatContent');
            if(!input.value) return;

            content.innerHTML += `<div class="flex justify-end"><p class="bg-amber-600 text-black p-3 rounded-2xl rounded-tr-none max-w-[80%]">${input.value}</p></div>`;
            
            setTimeout(() => {
                content.innerHTML += `<div class="flex justify-start"><p class="bg-white/10 p-3 rounded-2xl rounded-tl-none max-w-[80%]">ุจูุงุกู ุนูู ูุนูููุงุช ุงูุฅุฏุงุฑุฉ: ${config.botData}</p></div>`;
                content.scrollTop = content.scrollHeight;
            }, 800);
            input.value = "";
        }

        function closeAdmin() { document.getElementById('adminPanel').style.display = 'none'; }
        function closeReceipt() { document.getElementById('receiptModal').classList.add('hidden'); }
        
        window.onload = initApp;
    </script>
</body>
</html>
